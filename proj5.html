<!DOCTYPE html>
<html lang="en" dir="ltr"> <!-- Default language and direction -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title will be set by JS -->
    <title>Mohamed Hagag - Portfolio</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- AOS Library for Animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /* ---=== Global Styles & Variables (Default Light Theme) ===--- */
        :root {
            --primary-color: #0a2a43; /* Deep Blue */
            --secondary-color: #1c77c3; /* Bright Blue */
            --accent-color: #f7c548; /* Gold/Yellow Accent */
            --light-color: #f8f9fa;
            --light-alt-color: #ffffff;
            --dark-color: #343a40;
            --text-color: #555;
            --text-muted: #777;
            --heading-color: var(--primary-color);
            --bg-color: var(--light-color);
            --card-bg-color: var(--light-alt-color);
            --border-color: #eee;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --heading-font: 'Poppins', 'Cairo', sans-serif; /* Cairo for Arabic */
            --body-font: 'Poppins', 'Cairo', sans-serif;
            --transition-speed: 0.4s ease;
            --theme-transition: background-color var(--transition-speed), color var(--transition-speed), border-color var(--transition-speed);
        }

        /* ---=== Dark Theme Variables ===--- */
        body.theme-dark {
            --primary-color: #1f2937; /* Dark Gray Blue */
            --secondary-color: #38bdf8; /* Light Blue */
            --accent-color: #fbbf24; /* Amber */
            --light-color: #111827; /* Very Dark Blue */
            --light-alt-color: #1f2937; /* Dark Gray Blue */
            --dark-color: #f9fafb; /* Light Gray for text */
            --text-color: #d1d5db; /* Gray 300 */
            --text-muted: #9ca3af; /* Gray 400 */
            --heading-color: #f9fafb; /* Light Gray */
            --bg-color: var(--light-color);
            --card-bg-color: var(--light-alt-color);
            --border-color: #374151; /* Gray 700 */
            --shadow-color: rgba(255, 255, 255, 0.05);
        }

         /* ---=== Blue Accent Theme Variables ===--- */
        body.theme-blue-accent {
             --primary-color: #e0f2fe; /* Sky 100 */
             --secondary-color: #0ea5e9; /* Sky 500 */
             --accent-color: #f43f5e; /* Rose 500 */
             --light-color: #f8fafc; /* Slate 50 */
             --light-alt-color: #ffffff;
             --dark-color: #1e293b; /* Slate 800 */
             --text-color: #475569; /* Slate 600 */
             --text-muted: #64748b; /* Slate 500 */
             --heading-color: #0f172a; /* Slate 900 */
             --bg-color: var(--light-color);
             --card-bg-color: var(--light-alt-color);
             --border-color: #e2e8f0; /* Slate 200 */
             --shadow-color: rgba(0, 0, 0, 0.06);
        }


        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; font-size: 16px; }

        body {
            font-family: var(--body-font);
            color: var(--text-color);
            line-height: 1.7;
            background-color: var(--bg-color);
            transition: var(--theme-transition);
            overflow-x: hidden;
        }

        /* RTL Specific Styles */
        html[dir="rtl"] body { font-family: 'Cairo', 'Poppins', sans-serif; }
        html[dir="rtl"] h1, html[dir="rtl"] h2, html[dir="rtl"] h3, html[dir="rtl"] h4 { font-family: 'Cairo', 'Poppins', sans-serif; }
        html[dir="rtl"] #main-nav li { margin-left: 0; margin-right: 30px; }
        html[dir="rtl"] .about-details i, html[dir="rtl"] .skill-category ul li i { margin-right: 0; margin-left: 10px; }
        html[dir="rtl"] .experience-item, html[dir="rtl"] .project-item { border-left: none; border-right: 5px solid var(--secondary-color); }
         html[dir="rtl"] .experience-item:hover { border-right-color: var(--accent-color); transform: translateX(-5px) scale(1.02); }
        html[dir="rtl"] .project-item { border-right-color: var(--accent-color); }
        html[dir="rtl"] #contact i { margin-right: 0; margin-left: 12px; }
        html[dir="rtl"] .social-links a { margin-right: 0; margin-left: 20px;}
        html[dir="rtl"] #back-to-top { right: auto; left: 25px; }
        html[dir="rtl"] .settings-panel { left: 0; right: auto; transform: translateX(-100%); }
        html[dir="rtl"] .settings-panel.open { transform: translateX(0); }
        html[dir="rtl"] #settings-toggle { right: auto; left: 20px; }


        /* ---=== Preloader (Advanced - Progress Bar) ===--- */
        #preloader {
            /* ... نفس خصائص الموضع، الخلفية، z-index، والانتقالات للخروج ... */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--primary-color); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.5s, visibility 0s linear 1.3s;
        }

        #preloader .preloader-content {
            display: flex; flex-direction: column; align-items: center; gap: 25px; /* زيادة المسافة قليلاً */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        #preloader .preloader-logo {
            /* ... نفس تنسيق الشعار وحركة ظهوره (fadeInElement) ... */
            font-family: var(--heading-font); font-size: 3rem; font-weight: 700;
            color: var(--accent-color); opacity: 0; transform: translateY(15px);
            animation: fadeInElement 0.6s 0.2s ease-out forwards;
        }

        /* تنسيق حاوية شريط التحميل */
        .progress-bar-container {
            width: 180px; /* عرض الشريط */
            height: 6px;  /* ارتفاع الشريط */
            background-color: color-mix(in srgb, var(--accent-color) 20%, transparent); /* لون خلفية باهت للشريط */
            border-radius: 3px;
            overflow: hidden;
            opacity: 0; transform: scaleX(0.5); /* يبدأ مخفياً ومضغوطاً أفقياً */
            animation: fadeInBarContainer 0.6s 0.5s ease-out forwards; /* حركة ظهور الحاوية */
        }

        @keyframes fadeInBarContainer {
            to { opacity: 1; transform: scaleX(1); }
        }

        /* تنسيق وحركة تعبئة الشريط */
        .progress-bar-fill-loader {
            width: 100%; height: 100%;
            background-color: var(--accent-color);
            /* يمكنك استخدام تدرج */
            /* background: linear-gradient(90deg, var(--accent-color), var(--secondary-color)); */
            border-radius: 3px;
            transform: scaleX(0); /* يبدأ بعرض صفر */
            transform-origin: left; /* يبدأ التمدد من اليسار */
            /* حركة التعبئة (بطيئة لتعطي إيحاء بالتحميل) */
            /* نضبطها لتعمل تقريباً مع التأخير الذي سنضعه في JS */
            animation: fillProgressBar 2.5s 0.8s cubic-bezier(0.65, 0, 0.35, 1) forwards; /* تبدأ بعد ظهور الحاوية */
        }
        html[dir="rtl"] .progress-bar-fill-loader { transform-origin: right; } /* يبدأ من اليمين في RTL */

        @keyframes fillProgressBar {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }

        #preloader .loading-text {
            /* ... نفس تنسيق النص وحركة ظهوره ... */
            font-family: var(--body-font); font-size: 1rem; color: var(--text-muted);
            letter-spacing: 1px; opacity: 0; transform: translateY(15px);
            animation: fadeInElement 0.6s 1.1s ease-out forwards; /* يظهر بعد بدء الشريط */
        }

        /* حالة الإخفاء */
        #preloader.hidden { opacity: 0; visibility: hidden; }
        #preloader.hidden .preloader-content { opacity: 0; transform: translateY(-15px); }

        /* Keyframes للإظهار (يستخدم في عدة عناصر) */
        @keyframes fadeInElement {
            to { opacity: 1; transform: translateY(0); }
        }




        /* ---=== Headings, Text, Links, Buttons, Sections (Apply Theme Variables) ===--- */
        h1, h2, h3, h4, h5, h6 { font-family: var(--heading-font); color: var(--heading-color); font-weight: 600; margin-bottom: 0.8rem; letter-spacing: -0.5px; transition: var(--theme-transition); }
        h1 { font-size: 2.8rem; font-weight: 700; line-height: 1.2; }
        h2 { font-size: 2.2rem; margin-bottom: 2.5rem; text-align: center; position: relative; }
        h3 { font-size: 1.5rem; color: var(--secondary-color); }
        h4 { font-size: 1.2rem; color: var(--dark-color); }
        p { margin-bottom: 1rem; color: var(--text-color); transition: var(--theme-transition); }
        a { color: var(--secondary-color); text-decoration: none; transition: color var(--transition-speed); }
        a:hover { color: var(--accent-color); }
        ul { list-style: none; }
        img { max-width: 100%; height: auto; display: block; }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        section { padding: 90px 0; overflow: hidden; border-bottom: 1px solid var(--border-color); transition: var(--theme-transition); }
        section:nth-child(even) { background-color: var(--card-bg-color); } /* Use card bg for alternating */
        section:last-of-type { border-bottom: none; }
        .section-title::after { content: ''; display: block; width: 70px; height: 4px; background-color: var(--accent-color); margin: 15px auto 40px; border-radius: 2px; transition: background-color var(--transition-speed); }

        .btn { /* Styles unchanged, uses variables */ display: inline-block; background: linear-gradient(45deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 80%, #ffffff 20%)); color: #fff; padding: 14px 30px; border-radius: 50px; font-weight: 600; transition: background var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed); border: none; cursor: pointer; box-shadow: 0 4px 15px color-mix(in srgb, var(--secondary-color) 30%, transparent); }
        .btn:hover { background: linear-gradient(45deg, color-mix(in srgb, var(--secondary-color) 80%, #ffffff 20%), var(--secondary-color)); color: #fff; transform: translateY(-3px) scale(1.03); box-shadow: 0 8px 20px color-mix(in srgb, var(--secondary-color) 40%, transparent); }

        /* ---=== Header (Apply Theme Variables) ===--- */
/* ---=== Header Styles (Improved) ===--- */
#main-header {
    /* Base Styles */
    background-color: color-mix(in srgb, var(--card-bg-color) 95%, transparent); /* Semi-transparent background */
    backdrop-filter: blur(5px); /* Glass effect */
    box-shadow: 0 2px 10px var(--shadow-color); /* Initial shadow */
    position: sticky;
    top: 0;
    z-index: 1000;
    padding: 20px 0; /* Initial vertical padding */
    border-bottom: 1px solid var(--border-color);
    /* Transitions for smooth changes on scroll, theme switch */
    transition: padding 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease, var(--theme-transition);
}

/* Scrolled State Styles */
#main-header.header-scrolled {
    padding: 10px 0; /* Reduced vertical padding */
    background-color: var(--card-bg-color); /* More opaque background when scrolled */
    box-shadow: 0 3px 15px var(--shadow-color); /* Slightly stronger shadow when scrolled */
}

/* Container within Header */
#main-header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Logo Styles */
#main-header .logo {
    font-size: 1.8rem; /* Initial logo text size */
    font-weight: 700;
    color: var(--heading-color);
    flex-shrink: 0; /* Prevent logo from shrinking too much on flex */
    /* Transition for smooth resizing */
    transition: font-size 0.3s ease, var(--theme-transition);
}
#main-header .logo a {
    color: inherit; /* Make link color same as parent */
    text-decoration: none;
    display: flex; /* Helps align image and text if both used */
    align-items: center;
}
#main-header .logo img { /* If using an image logo */
    max-height: 40px; /* Initial image height */
    margin-right: 10px; /* Space between logo image and text if both are present */
    transition: max-height 0.3s ease;
}

/* Logo Styles when Scrolled */
#main-header.header-scrolled .logo {
    font-size: 1.5rem; /* Reduced logo text size */
}
#main-header.header-scrolled .logo img {
    max-height: 30px; /* Reduced image height */
}

/* Desktop Navigation Container */
#main-nav {
    margin-left: auto; /* Push navigation to the right */
}
html[dir="rtl"] #main-nav {
    margin-left: 0;
    margin-right: auto; /* Push navigation to the left in RTL */
}

/* Desktop Navigation List */
#main-nav ul.desktop-nav {
    display: flex; /* Displayed by default on larger screens */
    list-style: none;
    margin: 0;
    padding: 0;
}

#main-nav ul.desktop-nav li {
    margin-left: 35px; /* Spacing between desktop nav items */
}
html[dir="rtl"] #main-nav ul.desktop-nav li {
    margin-left: 0;
    margin-right: 35px;
}

/* Desktop Navigation Links */
#main-nav ul.desktop-nav a {
    color: var(--heading-color);
    font-weight: 600;
    font-size: 1rem;
    padding: 10px 0; /* Vertical padding for bigger click area */
    position: relative; /* For the underline effect */
    transition: color 0.3s ease, var(--theme-transition);
}
/* Underline effect */
#main-nav ul.desktop-nav a::after {
    content: '';
    position: absolute;
    bottom: 5px; /* Position underline relative to padding */
    left: 0;
    width: 0; /* Initially hidden */
    height: 2px;
    background-color: var(--accent-color);
    transition: width 0.3s ease;
}
/* Underline effect on hover/active */
#main-nav ul.desktop-nav a:hover::after,
#main-nav ul.desktop-nav a.active::after {
    width: 100%;
}
/* Active link color */
#main-nav ul.desktop-nav a.active {
    color: var(--accent-color);
}
/* Hover link color */
#main-nav ul.desktop-nav a:hover {
    color: var(--secondary-color);
}


    /* ---=== Mobile Navigation Enhancements ===--- */

    #mobile-nav-container {
        position: fixed;
        top: 0;
        right: 0; /* Default LTR */
        width: 300px;
        max-width: 85%; /* تحديد عرض أقصى */
        height: 100vh; /* ارتفاع كامل للشاشة */
        background-color: var(--card-bg-color); /* استخدام لون البطاقة للخلفية */
        box-shadow: -6px 0 25px rgba(0,0,0,0.15); /* ظل أوضح */
        padding: 25px 0; /* حشو رأسي فقط، الروابط ستأخذ حشوها الخاص */
        z-index: 1010;
        /* التحويل والإخفاء المبدئي */
        transform: translateX(100%);
        opacity: 0.95; /* البدء بشفافية طفيفة */
        visibility: hidden;
        /* انتقال سلس ومخصص */
        transition: transform 0.45s cubic-bezier(0.6, 0.04, 0.98, 0.335), /* حركة أسرع في البداية وتبطؤ في النهاية */
                    opacity 0.3s ease-out,
                    visibility 0s linear 0.45s, /* الإخفاء الفوري بعد انتهاء الحركة */
                    var(--theme-transition);
        overflow-y: auto; /* السماح بالتمرير إذا كانت الروابط كثيرة */
        display: flex; /* استخدام flex لتنظيم المحتوى الداخلي */
        flex-direction: column; /* ترتيب العناصر عموديًا */
    }
    html[dir="rtl"] #mobile-nav-container {
        right: auto;
        left: 0;
        transform: translateX(-100%);
        box-shadow: 6px 0 25px rgba(0,0,0,0.15);
    }

    body.mobile-nav-active #mobile-nav-container {
        transform: translateX(0);
        opacity: 1; /* شفافية كاملة عند الفتح */
        visibility: visible;
        /* تعديل الانتقال عند الفتح */
        transition: transform 0.45s cubic-bezier(0.165, 0.84, 0.44, 1),
                    opacity 0.3s ease-in,
                    visibility 0s linear 0s, /* الإظهار الفوري مع بدء الحركة */
                    var(--theme-transition);
    }

    /* زر الإغلاق (تحسين الموضع والشكل) */
    #mobile-nav-close {
        position: absolute;
        top: 15px;
        right: 15px; /* LTR default */
        background: transparent; /* بدون خلفية */
        border: none;
        font-size: 2.4rem; /* أكبر قليلاً */
        color: var(--text-muted);
        cursor: pointer;
        line-height: 1;
        padding: 5px;
        transition: color 0.3s, transform 0.3s ease-out;
        z-index: 1011; /* فوق بقية المحتوى */
    }
    #mobile-nav-close:hover {
        color: var(--accent-color);
        transform: scale(1.1) rotate(90deg); /* تكبير ودوران عند المرور */
    }
    html[dir="rtl"] #mobile-nav-close {
        right: auto;
        left: 15px;
    }

    /* عنوان بسيط أو شعار أعلى القائمة (اختياري) */
    #mobile-nav-header {
        padding: 0 25px 15px 25px; /* حشو للعنوان */
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 15px;
    }
    #mobile-nav-header .logo-mobile { /* إذا أردت وضع شعار */
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--heading-color);
        text-align: center;
    }
    #mobile-nav-header .logo-mobile a {
        color: inherit;
        text-decoration: none;
    }
    /* أو مجرد عنوان نصي */
    /* #mobile-nav-header h5 {
        color: var(--secondary-color);
        margin-bottom: 0;
        text-align: center;
        font-size: 1.1rem;
    } */


    /* حاوية الروابط الرئيسية */
    #mobile-nav {
        flex-grow: 1; /* السماح للروابط بأخذ المساحة المتبقية */
        padding: 0 10px; /* حشو جانبي بسيط لحاوية الروابط */
    }

    #mobile-nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    #mobile-nav ul li {
        margin-bottom: 5px; /* مسافة أقل بين الروابط */
    }

    /* تحسين روابط الموبايل */
    #mobile-nav ul a {
        display: flex; /* استخدام flex لمحاذاة الأيقونة والنص */
        align-items: center;
        padding: 14px 20px; /* حشو أفضل */
        color: var(--text-color); /* لون النص العادي */
        font-size: 1.05rem; /* حجم الخط */
        font-weight: 500; /* وزن خط متوسط */
        border-radius: 8px; /* استدارة أكثر */
        transition: background-color 0.25s ease, color 0.25s ease, transform 0.2s ease, var(--theme-transition);
        position: relative;
    }
    #mobile-nav ul a:hover {
        background-color: color-mix(in srgb, var(--secondary-color) 15%, transparent); /* لون خلفية خفيف عند المرور */
        color: var(--secondary-color); /* تغيير لون النص عند المرور */
        transform: translateX(5px); /* تحريك بسيط لليمين (أو اليسار في RTL) */
    }
    html[dir="rtl"] #mobile-nav ul a:hover {
        transform: translateX(-5px);
    }

    /* أيقونات اختيارية بجانب الروابط */
    #mobile-nav ul a i {
        margin-right: 12px; /* مسافة بين الأيقونة والنص */
        font-size: 1.1rem;
        width: 20px; /* تحديد عرض ثابت للأيقونة */
        text-align: center;
        color: var(--text-muted); /* لون باهت للأيقونة */
        transition: color 0.25s ease;
    }
    html[dir="rtl"] #mobile-nav ul a i {
        margin-right: 0;
        margin-left: 12px;
    }
    #mobile-nav ul a:hover i {
        color: var(--secondary-color); /* تغيير لون الأيقونة عند المرور */
    }

    /* الرابط النشط في الموبايل */
    #mobile-nav ul a.active {
        background-color: var(--secondary-color);
        color: #fff; /* لون النص على الخلفية النشطة */
        font-weight: 600; /* خط أثقل قليلاً للنشط */
    }
    #mobile-nav ul a.active i {
        color: rgba(255, 255, 255, 0.8); /* لون الأيقونة على الخلفية النشطة */
    }


    /* قسم إضافي أسفل القائمة (اختياري) */
    #mobile-nav-footer {
        padding: 20px 25px 15px 25px; /* حشو للفوتر */
        border-top: 1px solid var(--border-color);
        margin-top: auto; /* دفع الفوتر لأسفل القائمة */
    }
    #mobile-nav-footer .social-links-mobile {
        text-align: center;
        margin-bottom: 15px;
    }
    #mobile-nav-footer .social-links-mobile a {
        color: var(--text-muted);
        font-size: 1.5rem;
        margin: 0 10px;
        transition: color 0.3s, transform 0.3s;
        display: inline-block;
    }
    #mobile-nav-footer .social-links-mobile a:hover {
        color: var(--secondary-color);
        transform: translateY(-3px);
    }
    #mobile-nav-footer .contact-info-mobile p {
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-bottom: 5px;
        text-align: center;
    }
    #mobile-nav-footer .contact-info-mobile p i {
        margin-right: 5px;
        color: var(--secondary-color);
    }
    html[dir="rtl"] #mobile-nav-footer .contact-info-mobile p i {
        margin-right: 0;
        margin-left: 5px;
    }


    /* تحسين تأثير التعتيم */
    #mobile-nav-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7); /* تعتيم أقوى قليلاً */
        z-index: 1005;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.45s cubic-bezier(0.165, 0.84, 0.44, 1), /* تطابق توقيت فتح القائمة */
                    visibility 0s linear 0.45s;
    }
    body.mobile-nav-active #mobile-nav-overlay {
        opacity: 1;
        visibility: visible;
        transition: opacity 0.45s cubic-bezier(0.165, 0.84, 0.44, 1),
                    visibility 0s linear 0s;
    }


/* ---=== Header Styles - Default (Desktop First) ===--- */

/* إخفاء زر الموبايل افتراضيًا على جميع الشاشات */
#mobile-nav-toggle {
    display: none;
    /* --- أضف هنا الأنماط الأساسية للزر التي لا تتغير بين الأحجام --- */
    background: none;        /* مثال: خلفية شفافة */
    border: none;            /* مثال: بدون حدود */
    color: var(--heading-color); /* مثال: لون النص الافتراضي */
    cursor: pointer;
    padding: 5px;            /* مثال: حشو داخلي */
    line-height: 1;          /* مثال: لمنع ارتفاع إضافي للسطر */
    font-size: 1.8rem;       /* مثال: حجم الأيقونة الافتراضي للشاشات الأكبر (سيتم تعديله لاحقًا للشاشات الأصغر) */
    transition: color 0.3s ease, var(--theme-transition), font-size 0.3s ease; /* مثال: انتقالات */
    /* --- لا تضع هنا أي display: block أو display: flex --- */
}

/* إظهار قائمة سطح المكتب افتراضيًا على جميع الشاشات */
#main-nav ul.desktop-nav {
    display: flex;
    /* --- أضف هنا بقية أنماط قائمة سطح المكتب --- */
    list-style: none;
    margin: 0;
    padding: 0;
    /* ... */
}


/* ---=== Responsive Adjustments ===--- */

/* --- Breakpoint للموبايل والأجهزة اللوحية الصغيرة (مثال: 992px وأقل) --- */
@media (max-width: 992px) {

    /* 1. إخفاء قائمة سطح المكتب */
    #main-nav ul.desktop-nav {
        display: none; /* أخفِ قائمة سطح المكتب تمامًا */
    }

    /* 2. إظهار زر تبديل قائمة الموبايل */
    #mobile-nav-toggle {
        display: block; /* أظهر الزر */
        /* أو استخدم flex إذا كنت تريد تحكمًا دقيقًا في محاذاة الأيقونة داخله: */
        /* display: flex; */
        /* justify-content: center; */
        /* align-items: center; */
    }
}


/* --- (اختياري) تعديلات إضافية للشاشات الأصغر (مثال: 768px وأقل) --- */
@media (max-width: 768px) {
    /* تعديل حجم أيقونة زر الموبايل للشاشات الأصغر */
    #mobile-nav-toggle {
        font-size: 1.6rem; /* اجعل الأيقونة أصغر قليلاً */
    }

    /* تعديلات أخرى للهيدر إذا لزم الأمر، مثل الحشو أو حجم الشعار */
    #main-header {
        padding: 15px 0;
    }
    #main-header.header-scrolled {
        padding: 8px 0;
    }
    #main-header .logo {
        font-size: 1.5rem;
    }
    #main-header.header-scrolled .logo {
        font-size: 1.3rem;
    }
}

/* --- (اختياري) تعديلات للشاشات الصغيرة جدًا (مثال: 576px وأقل) --- */
 @media (max-width: 576px) {
    #mobile-nav-toggle {
        font-size: 1.4rem; /* أصغر */
    }
    /* ... تعديلات أخرى */
} 

        #main-header .logo { font-size: 1.6rem; font-weight: 700; color: var(--heading-color); transition: var(--theme-transition); }
        #main-nav a { color: var(--heading-color); font-weight: 600; font-size: 1rem; padding-bottom: 8px; position: relative; transition: var(--theme-transition); }
        #main-nav a::after { /* Styles unchanged */ }

        /* ---=== Hero (Apply Theme Variables) ===--- */



        /* ---=== Hero Section Enhancements ===--- */

        #hero {
            /* استخدام متغيرات لتدرج الخلفية */
            --hero-grad-1: color-mix(in srgb, var(--primary-color) 80%, black 20%);
            --hero-grad-2: color-mix(in srgb, var(--primary-color) 60%, var(--secondary-color) 40%);
            --hero-grad-3: color-mix(in srgb, var(--secondary-color) 70%, var(--accent-color) 30%);

            /* خلفية متدرجة متحركة */
            background: linear-gradient(135deg, var(--hero-grad-1), var(--hero-grad-2), var(--hero-grad-3));
            background-size: 400% 400%; /* حجم أكبر للسماح بالحركة */
            animation: animatedGradient 18s ease infinite; /* تطبيق التحريك */

            color: #fff; /* لون النص الأساسي */
            padding: 140px 0;
            text-align: center;
            position: relative; /* ضروري للتراكبات والعناصر المطلقة */
            overflow: hidden; /* لمنع العناصر المتحركة من الخروج */
            border-bottom: 5px solid var(--accent-color);
            /* Simple Parallax Background Effect (Keep existing background-attachment or remove if using JS parallax) */
            /* background-attachment: fixed; // Use with caution, can have performance issues */
        }

        /* تحريك التدرج */
        @keyframes animatedGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* تراكب زخرفي خفيف (اختياري) */
        #hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* مثال: شبكة نقطية باهتة */
            background-image: radial-gradient(color-mix(in srgb, white 10%, transparent) 1px, transparent 1px);
            background-size: 15px 15px;
            opacity: 0.05; /* شفافية عالية جدًا */
            z-index: 0; /* خلف المحتوى */
        }

        /* حاوية المحتوى الرئيسي */
        #hero .hero-content {
            position: relative; /* ليكون فوق التراكب ::before */
            z-index: 1;
            max-width: 800px; /* تحديد عرض أقصى للمحتوى */
            margin: 0 auto; /* توسيط المحتوى */
        }

        /* تحسين الصورة الشخصية */
        #hero .profile-pic {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            /* إطار متدرج */
            border: 6px solid transparent; /* حد شفاف كأساس */
            background: linear-gradient(var(--card-bg-color), var(--card-bg-color)) padding-box, /* لون الخلفية الداخلية */
                        linear-gradient(45deg, var(--accent-color), var(--secondary-color)) border-box; /* تدرج الحد */
            margin: 0 auto 35px auto; /* توسيط وإضافة مسافة سفلية */
            object-fit: cover;
            box-shadow: 0 15px 40px rgba(0,0,0,0.35); /* ظل أعمق */
            transition: transform 0.4s ease; /* انتقال للتحريك */
        }
        #hero .profile-pic:hover {
            transform: scale(1.05) rotate(2deg); /* تأثير بسيط عند المرور */
        }

        /* تحسين العناوين */
        #hero h1 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 3.2rem; /* أكبر قليلاً */
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.4); /* ظل للنص */
            letter-spacing: -1px;
        }
        html[dir="rtl"] #hero h1 { letter-spacing: 0; } /* إلغاء تضييق الحروف في العربية */


        #hero .subtitle {
            font-size: 1.7rem; /* أكبر قليلاً */
            color: var(--light-alt-color); /* استخدام لون فاتح بديل للتباين */
            font-weight: 300;
            margin-bottom: 40px;
            min-height: 50px; /* للحفاظ على المساحة لـ Typed.js */
            opacity: 0.9; /* شفافية طفيفة */
        }

        /* معلومات الاتصال */
        #hero .contact-info-hero {
            margin-bottom: 30px;
        }
        #hero .contact-info-hero p {
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: #eee;
            opacity: 0.85; /* شفافية طفيفة */
        }
        #hero .contact-info-hero i {
            color: var(--accent-color);
            margin-right: 10px;
            width: 15px;
            opacity: 0.9;
        }
        html[dir="rtl"] #hero .contact-info-hero i {
            margin-right: 0;
            margin-left: 10px;
        }

        /* تحسين زر "Get In Touch" */
        #hero .btn {
            padding: 16px 35px; /* أكبر قليلاً */
            font-size: 1.05rem;
            /* تدرج لوني أكثر حيوية */
            background: linear-gradient(45deg, var(--accent-color), color-mix(in srgb, var(--accent-color) 70%, var(--secondary-color) 30%));
            box-shadow: 0 6px 20px color-mix(in srgb, var(--accent-color) 40%, transparent);
            /* تأثير نبض خفيف (اختياري) */
            /* animation: buttonPulse 2.5s infinite ease-in-out; */
        }
        #hero .btn:hover {
            background: linear-gradient(45deg, color-mix(in srgb, var(--accent-color) 70%, var(--secondary-color) 30%), var(--accent-color));
            transform: translateY(-4px) scale(1.05); /* حركة أكبر عند المرور */
            box-shadow: 0 10px 25px color-mix(in srgb, var(--accent-color) 50%, transparent);
        }

        /* تحريك النبض الاختياري للزر */
        @keyframes buttonPulse {
            0% { transform: scale(1); box-shadow: 0 6px 20px color-mix(in srgb, var(--accent-color) 40%, transparent); }
            50% { transform: scale(1.03); box-shadow: 0 10px 25px color-mix(in srgb, var(--accent-color) 50%, transparent); }
            100% { transform: scale(1); box-shadow: 0 6px 20px color-mix(in srgb, var(--accent-color) 40%, transparent); }
        }

        /* تعديلات خاصة بالثيمات الداكنة للـ Hero إذا لزم الأمر */
        body.theme-sapphire #hero h1,
        body.theme-emerald #hero h1,
        body.theme-crimson #hero h1 {
            /* قد تحتاج لتعديل ظل النص ليكون أوضح */
            text-shadow: 0 1px 3px rgba(0,0,0,0.6);
        }
        body.theme-sapphire #hero .profile-pic,
        body.theme-emerald #hero .profile-pic,
        body.theme-crimson #hero .profile-pic {
            /* تعديل حد الصورة للثيمات الداكنة */
            background: linear-gradient(var(--light-alt-color), var(--light-alt-color)) padding-box, /* لون الخلفية الداخلية للثيم الداكن */
                        linear-gradient(45deg, var(--accent-color), var(--secondary-color)) border-box;
        }

        /* تعديل الألوان المتدرجة للخلفية لكل ثيم */
        body.theme-sapphire #hero {
            --hero-grad-1: #0B132B;
            --hero-grad-2: #1C2541;
            --hero-grad-3: #3A506B;
        }
        body.theme-emerald #hero {
            --hero-grad-1: #1D3522;
            --hero-grad-2: #2A4B30;
            --hero-grad-3: #4A6D43; /* درجة أغمق قليلاً */
        }
        body.theme-crimson #hero {
            --hero-grad-1: #1A1A1A;
            --hero-grad-2: #282828;
            --hero-grad-3: #424242; /* درجة أفتح قليلاً */
        }
        body.theme-crimson #hero .profile-pic {
            background: linear-gradient(var(--light-alt-color), var(--light-alt-color)) padding-box,
                        linear-gradient(45deg, var(--accent-color), #757575) border-box; /* استخدام الرمادي بدلاً من الثانوي */
        }
        body.theme-crimson #hero .btn {
            background: linear-gradient(45deg, var(--accent-color), color-mix(in srgb, var(--accent-color) 80%, #757575 20%));
        }
        body.theme-crimson #hero .btn:hover {
            background: linear-gradient(45deg, color-mix(in srgb, var(--accent-color) 80%, #757575 20%), var(--accent-color));
        }




        /* Specific theme overrides for Hero background if needed */
        body.theme-dark #hero { background: linear-gradient(rgba(17, 24, 39, 0.85), rgba(17, 24, 39, 0.85)), url('https://via.placeholder.com/1500x800/333333/ffffff?text=Optional+Background') no-repeat center center/cover; background-attachment: fixed; }
        body.theme-blue-accent #hero { background: linear-gradient(rgba(14, 165, 233, 0.7), rgba(14, 165, 233, 0.7)), url('https://via.placeholder.com/1500x800/e0f2fe/1e293b?text=Optional+Background') no-repeat center center/cover; background-attachment: fixed; color: var(--dark-color);} /* Text color changes for light bg */
        body.theme-blue-accent #hero h1 { color: var(--dark-color); } /* Ensure heading is visible */
        body.theme-blue-accent #hero .contact-info-hero p { color: var(--text-color); } /* Adjust text color */
         body.theme-blue-accent #hero .contact-info-hero i { color: var(--secondary-color); } /* Adjust icon color */


        #hero .profile-pic { /* Unchanged */ width: 200px; height: 200px; border-radius: 50%; border: 6px solid var(--accent-color); margin-bottom: 30px; object-fit: cover; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: border-color var(--transition-speed); }
        #hero h1 { color: #fff; margin-bottom: 15px; /* Theme specific overrides above */ }
        #hero .subtitle { font-size: 1.6rem; color: var(--light-color); font-weight: 300; margin-bottom: 35px; min-height: 50px; transition: var(--theme-transition); }
        #hero .contact-info-hero p { margin-bottom: 5px; font-size: 0.9rem; color: #ddd; transition: var(--theme-transition); }
        #hero .contact-info-hero i { color: var(--accent-color); margin-right: 8px; width: 15px; transition: var(--theme-transition); }
        .typed-cursor { /* Unchanged */ opacity: 1; animation: blink 0.7s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }

        /* ---=== About, Skills, Experience, Edu, Projects (Apply Theme Variables) ===--- */
        /* Apply theme variables to backgrounds, text, borders, shadows etc. */
        /* ---=== About Section Enhancements ===--- */

        #about {
            /* خلفية مميزة للقسم */
            background: linear-gradient(175deg, var(--bg-color) 0%, color-mix(in srgb, var(--card-bg-color) 95%, var(--bg-color) 5%) 100%);
            position: relative; /* للسماح بالعناصر المطلقة مثل الأيقونة الخلفية */
            overflow: hidden; /* إخفاء أي عناصر فائضة */
        }

        /* (اختياري) أيقونة خلفية باهتة */
        /* #about::before {
            content: '\f5d7'; // Font Awesome blueprint icon or similar
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            bottom: -50px;
            right: -30px; // LTR
            font-size: 18rem;
            color: var(--secondary-color);
            opacity: 0.03;
            z-index: 0;
            transform: rotate(-15deg);
        }
        html[dir="rtl"] #about::before {
            right: auto;
            left: -30px;
            transform: rotate(15deg);
        } */

        /* تعديل الحاوية للسماح بالتداخل المحتمل */
        #about .container {
            display: flex;
            gap: 40px; /* المسافة الأولية */
            align-items: flex-start; /* المحاذاة للأعلى */
            position: relative; /* ليكون المحتوى فوق ::before */
            z-index: 1;
        }

        /* تحسين عنوان القسم */
        #about h2.section-title {
            margin-bottom: 1.5rem; /* مسافة أكبر قليلاً */
        }
        /* خط فاصل مزخرف تحت العنوان */
        #about h2.section-title::after {
            content: '';
            display: block;
            width: 100px; /* أطول */
            height: 4px;
            background: linear-gradient(90deg, var(--accent-color), var(--secondary-color)); /* تدرج لوني */
            margin: 20px auto 50px; /* مسافات أكبر */
            border-radius: 2px;
        }

        /* النص التعريفي */
        #about .about-text {
            flex: 1.8; /* إعطاء مساحة أكبر قليلاً للنص */
            padding-right: 20px; /* مسافة عن بطاقة الحقائق - LTR */
        }
        html[dir="rtl"] #about .about-text {
            padding-right: 0;
            padding-left: 20px;
        }

        #about .about-text p {
            font-size: 1.05rem; /* حجم خط أكبر قليلاً */
            line-height: 1.8; /* ارتفاع سطر مريح */
            margin-bottom: 1.5rem; /* مسافة أكبر بين الفقرات */
        }

        /* تمييز الكلمات المفتاحية */
        #about .about-text strong {
            color: var(--secondary-color); /* لون مميز */
            font-weight: 600;
        }
        /* يمكنك إضافة كلاس خاص لتلوين مختلف: */
        /* #about .about-text .skill-highlight { color: var(--accent-color); font-weight: 600; } */


        /* بطاقة الحقائق السريعة المحسنة */
        #about .about-details {
            flex: 1; /* مساحة للبطاقة */
            background-color: var(--card-bg-color);
            padding: 35px; /* حشو داخلي أكبر */
            border-radius: 12px; /* استدارة أكبر للحدود */
            box-shadow: 0 10px 35px -5px var(--shadow-color), 0 6px 15px rgba(0,0,0,0.05); /* ظل أكثر عمقًا ونعومة */
            border: 1px solid var(--border-color);
            border-top: 5px solid var(--accent-color); /* حد علوي مميز */
            position: sticky; /* جعل البطاقة تلتصق أثناء التمرير (اختياري) */
            top: 120px; /* المسافة من الأعلى عند الالتصاق (تحتاج لتعديل) */
            transition: var(--theme-transition), box-shadow 0.3s ease;
        }

        #about .about-details h4 {
            font-size: 1.3rem; /* حجم أكبر للعنوان */
            margin-bottom: 25px; /* مسافة أكبر */
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color); /* خط سفلي منقط/متقطع */
            color: var(--heading-color); /* لون العنوان الرئيسي */
            text-align: center; /* توسيط العنوان */
            position: relative;
        }
        /* أيقونة صغيرة بجانب عنوان الحقائق (اختياري) */
        /* #about .about-details h4::before {
            content: '\f05a'; // fa-info-circle
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: var(--accent-color);
            margin-right: 10px; // LTR
            font-size: 1.1rem;
        }
        html[dir="rtl"] #about .about-details h4::before { margin-right: 0; margin-left: 10px; } */

        /* قائمة الحقائق */
        #about .about-details ul {
            list-style: none;
            padding: 0;
            margin-bottom: 30px; /* مسافة قبل الهوايات (إذا كانت منفصلة) */
        }
        #about .about-details ul:last-child {
            margin-bottom: 0; /* إزالة المسافة السفلية لآخر قائمة */
        }

        #about .about-details ul li {
            display: flex; /* استخدام flex للمحاذاة */
            align-items: center; /* محاذاة عمودية للمركز */
            margin-bottom: 18px; /* مسافة أكبر بين العناصر */
            padding: 8px 10px; /* حشو داخلي بسيط */
            border-radius: 6px;
            transition: background-color 0.25s ease;
        }
        /* تأثير المرور على عناصر القائمة */
        #about .about-details ul li:hover {
            background-color: color-mix(in srgb, var(--secondary-color) 5%, transparent);
        }
        #about .about-details ul li:hover i { /* تغيير لون الأيقونة عند المرور */
            color: var(--secondary-color);
            transform: scale(1.1); /* تكبير بسيط للأيقونة */
        }

        /* تنسيق الأيقونات */
        #about .about-details ul li i {
            color: var(--accent-color); /* لون التمييز للأيقونات */
            font-size: 1.2rem; /* حجم أكبر للأيقونة */
            margin-right: 15px; /* مسافة أكبر عن النص - LTR */
            width: 25px; /* عرض ثابت للأيقونة */
            text-align: center;
            flex-shrink: 0; /* منع الأيقونة من الانكماش */
            transition: color 0.25s ease, transform 0.25s ease; /* انتقالات */
        }
        html[dir="rtl"] #about .about-details ul li i {
            margin-right: 0;
            margin-left: 15px;
        }

        /* تنسيق النص داخل عناصر القائمة */
        #about .about-details ul li span {
            font-size: 1rem; /* حجم خط مناسب */
            color: var(--text-color);
            line-height: 1.5; /* ارتفاع سطر جيد */
        }
        #about .about-details ul li span a { /* تنسيق الروابط داخل القائمة */
            color: var(--secondary-color);
            font-weight: 500;
        }
        #about .about-details ul li span a:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }


        /* فصل الهوايات (اختياري) */
        #about .about-details .hobbies-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        #about .about-details .hobbies-section h4 {
            font-size: 1.1rem; /* أصغر من العنوان الرئيسي */
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom-style: solid; /* خط عادي */
            text-align: left; /* محاذاة لليسار */
        }
        html[dir="rtl"] #about .about-details .hobbies-section h4 { text-align: right; }
        #about .about-details .hobbies-section ul li i {
            color: var(--secondary-color); /* لون مختلف لأيقونات الهوايات */
        }


        /* تعديلات الاستجابة */
        @media (max-width: 992px) {
            #about .container {
                flex-direction: column; /* تكديس عمودي */
                gap: 50px; /* مسافة بين النص والبطاقة */
            }
            #about .about-text {
                padding-right: 0; /* إلغاء الحشو الجانبي */
                padding-left: 0;
                flex: none; /* إلغاء نسبة العرض */
                width: 100%;
            }
            #about .about-details {
                flex: none; /* إلغاء نسبة العرض */
                width: 100%; /* عرض كامل */
                position: static; /* إلغاء الالتصاق */
                margin-top: 0; /* إلغاء الهامش العلوي (إذا كان هناك تداخل) */
            }
        }

        @media (max-width: 768px) {
            #about .about-details {
                padding: 25px; /* تقليل الحشو قليلاً */
            }
            #about .about-text p {
                font-size: 1rem; /* تصغير الخط قليلاً */
            }
            #about .about-details ul li span {
                font-size: 0.95rem;
            }
        }
        .skill-bar { background-color: color-mix(in srgb, var(--text-color) 20%, transparent); } /* Adjust bar background */
        .skill-bar-fill { background: linear-gradient(90deg, var(--secondary-color), var(--accent-color)); }
        .skill-item .skill-info span:first-child { color: var(--dark-color); }
        .skill-item .skill-info span:last-child { color: var(--secondary-color); }

        .experience-item, .project-item, .education-item { background: var(--card-bg-color); border-radius: 10px; box-shadow: 0 8px 25px var(--shadow-color); transition: var(--theme-transition), transform var(--transition-speed), box-shadow var(--transition-speed), border-color var(--transition-speed); }
        .experience-item, .project-item { padding: 35px; margin-bottom: 35px; border-left: 5px solid var(--secondary-color); }
        .experience-item:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 12px 30px color-mix(in srgb, var(--shadow-color) 150%, black); border-left-color: var(--accent-color); }
        .project-item { border-left-color: var(--accent-color); }
        .education-item { padding: 30px; margin-bottom: 25px; border-top: 4px solid var(--accent-color); }
        .experience-meta { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 15px; font-weight: 600; }
        .experience-meta i { margin-right: 5px; color: var(--heading-color); } /* Use heading color for icons */


        /* ---=== Footer (Apply Theme Variables) ===--- */
        footer { background-color: var(--dark-color); color: var(--text-muted); text-align: center; padding: 25px 0; font-size: 0.95rem; transition: var(--theme-transition); }
        footer a { color: var(--accent-color); font-weight: 600; }
        footer p { color: var(--text-muted); } /* Ensure footer text uses muted color */

        /* ---=== Back to Top Button (Apply Theme Variables) ===--- */
        #back-to-top { /* Styles unchanged, uses variables */ position: fixed; bottom: 25px; right: 25px; width: 50px; height: 50px; background-color: var(--secondary-color); color: #fff; border-radius: 50%; text-align: center; line-height: 50px; font-size: 1.5rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2); opacity: 0; visibility: hidden; transition: opacity 0.4s ease, visibility 0.4s ease, background-color 0.3s ease, transform 0.3s ease; z-index: 999; }
        #back-to-top:hover { background-color: var(--primary-color); transform: translateY(-3px); }
        #back-to-top.visible { opacity: 1; visibility: visible; }

        /* ---=== Settings Panel & Toggle Enhancements ===--- */

        #settings-toggle {
            position: fixed;
            top: 100px; /* أو حسب الحاجة */
            right: 0; /* LTR default */
            background: linear-gradient(135deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 70%, var(--accent-color) 30%)); /* Gradient background */
            color: #fff;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 5px 0 0 5px; /* Rounded on left */
            font-size: 1.5rem; /* حجم الأيقونة */
            cursor: pointer;
            z-index: 1001;
            box-shadow: -3px 3px 12px rgba(0,0,0,0.2); /* ظل أكثر بروزًا */
            display: flex;
            justify-content: center;
            align-items: center;
            /* Transition for icon and background */
            transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden; /* لإخفاء الأيقونات عند التبديل */
        }
        html[dir="rtl"] #settings-toggle {
            right: auto;
            left: 0;
            border-radius: 0 5px 5px 0; /* Rounded on right for RTL */
            box-shadow: 3px 3px 12px rgba(0,0,0,0.2);
        }

        #settings-toggle:hover {
            background: linear-gradient(135deg, color-mix(in srgb, var(--secondary-color) 70%, var(--accent-color) 30%), var(--secondary-color));
            transform: translateX(-3px); /* تحريك بسيط للخارج عند المرور - LTR */
            box-shadow: -5px 5px 15px rgba(0,0,0,0.3);
        }
        html[dir="rtl"] #settings-toggle:hover {
            transform: translateX(3px); /* تحريك بسيط للخارج عند المرور - RTL */
            box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
        }

        /* أيقونات الزر (Cog and Times) */
        #settings-toggle i {
            position: absolute; /* للسماح بالتبديل بين الأيقونتين */
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        #settings-toggle i.fa-cog {
            transform: scale(1) rotate(0deg);
            opacity: 1;
        }
        #settings-toggle i.fa-times {
            transform: scale(0) rotate(-180deg); /* مخفية ومستديرة مبدئيًا */
            opacity: 0;
        }

        /* حالة الزر عند فتح اللوحة */
        body.settings-panel-active #settings-toggle i.fa-cog {
            transform: scale(0) rotate(180deg); /* إخفاء الترس مع دوران */
            opacity: 0;
        }
        body.settings-panel-active #settings-toggle i.fa-times {
            transform: scale(1) rotate(0deg); /* إظهار الإغلاق */
            opacity: 1;
        }

        /* Optional: Pulse/Attention effect */
        /*
        @keyframes pulse {
        0% { box-shadow: -3px 3px 12px rgba(0,0,0,0.2), 0 0 0 0 color-mix(in srgb, var(--accent-color) 50%, transparent); }
        70% { box-shadow: -3px 3px 12px rgba(0,0,0,0.2), 0 0 0 10px color-mix(in srgb, var(--accent-color) 0%, transparent); }
        100% { box-shadow: -3px 3px 12px rgba(0,0,0,0.2), 0 0 0 0 color-mix(in srgb, var(--accent-color) 0%, transparent); }
        }
        #settings-toggle {
        animation: pulse 2s infinite cubic-bezier(0.66, 0, 0, 1); // Apply pulse animation
        }
        */


        /* Settings Panel Enhancements */
        .settings-panel {
            position: fixed;
            top: 0;
            right: 0; /* LTR default */
            width: 300px;
            height: 100%;
            background-color: var(--card-bg-color);
            box-shadow: -5px 0 20px rgba(0,0,0,0.15); /* ظل أعمق قليلاً */
            padding: 70px 30px 30px 30px; /* مساحة أكبر في الأعلى للإغلاق */
            z-index: 1002;
            transform: translateX(100%);
            opacity: 0; /* ابدأ شفافًا */
            visibility: hidden; /* ابدأ مخفيًا تمامًا */
            /* Transition أكثر سلاسة مع تأخير للتعتيم */
            transition: transform 0.5s cubic-bezier(0.7, 0, 0.3, 1), opacity 0.4s ease 0.1s, visibility 0s linear 0.5s, var(--theme-transition);
            overflow-y: auto;
            border-left: 1px solid var(--border-color);
        }
        html[dir="rtl"] .settings-panel {
            right: auto;
            left: 0;
            transform: translateX(-100%);
            box-shadow: 5px 0 20px rgba(0,0,0,0.15);
            border-left: none;
            border-right: 1px solid var(--border-color);
        }

        .settings-panel.open {
            transform: translateX(0);
            opacity: 1; /* اجعله مرئيًا */
            visibility: visible; /* اجعله مرئيًا */
            transition: transform 0.5s cubic-bezier(0.2, 1, 0.3, 1), opacity 0.4s ease, visibility 0s linear 0s, var(--theme-transition); /* تعديل التوقيت للدخول */
        }

        /* تحريك ظهور عناصر التحكم داخل اللوحة */
        .settings-panel .setting-group {
            margin-bottom: 30px; /* زيادة المسافة */
            opacity: 0; /* ابدأ مخفيًا */
            transform: translateY(15px); /* ابدأ من الأسفل قليلاً */
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .settings-panel.open .setting-group {
            opacity: 1;
            transform: translateY(0);
            /* تطبيق تأخير متتابع لكل مجموعة */
            transition-delay: calc(0.2s + var(--group-index, 0) * 0.1s); /* التأخير يبدأ بعد 0.2 ثانية من فتح اللوحة ويزيد لكل مجموعة */
        }

        /* تحسينات الأزرار داخل اللوحة */
        .settings-panel h4 { /* تعديلات طفيفة */
            color: var(--heading-color);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 1.2rem; /* أكبر قليلاً */
        }

        .settings-panel label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-muted);
            font-size: 0.95rem; /* أوضح قليلاً */
        }

        /* تحسين أزرار اللغة (يمكن إضافة أيقونات) */
        .settings-panel .options button.lang-btn {
            display: inline-flex; /* لمحاذاة الأيقونة والنص */
            align-items: center;
            padding: 10px 18px; /* حشو أفضل */
            margin: 5px 8px 5px 0;
            border: 1px solid var(--border-color);
            background-color: var(--bg-color);
            color: var(--text-color);
            border-radius: 20px; /* أكثر استدارة */
            cursor: pointer;
            font-size: 0.95rem;
            transition: var(--theme-transition), background-color 0.2s, border-color 0.2s, box-shadow 0.2s;
        }
        html[dir="rtl"] .settings-panel .options button.lang-btn {
            margin: 5px 0 5px 8px;
        }

        /* Optional: Icons for language buttons */
        /* .settings-panel .options button.lang-btn i {
            margin-right: 8px;
            font-size: 1rem;
            color: var(--text-muted);
            transition: color 0.2s;
        }
        html[dir="rtl"] .settings-panel .options button.lang-btn i {
            margin-right: 0;
            margin-left: 8px;
        } */
        .settings-panel .options button.lang-btn:hover {
            border-color: var(--secondary-color);
            background-color: color-mix(in srgb, var(--bg-color) 80%, var(--secondary-color) 20%);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        /* .settings-panel .options button.lang-btn:hover i { color: var(--secondary-color); } */

        .settings-panel .options button.lang-btn.active {
            background-color: var(--secondary-color);
            color: #fff;
            border-color: var(--secondary-color);
            font-weight: bold;
            box-shadow: 0 3px 8px color-mix(in srgb, var(--secondary-color) 40%, transparent);
        }
        /* .settings-panel .options button.lang-btn.active i { color: #fff; } */

        /* تحسين أزرار الثيم */
        .settings-panel .options .theme-option {
            width: 35px; height: 35px; /* أكبر قليلاً */
            padding: 0; border-radius: 50%; vertical-align: middle;
            position: relative; overflow: hidden;
            border-width: 2px; /* حد أوضح */
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin: 5px 8px 5px 0;
        }
        html[dir="rtl"] .settings-panel .options .theme-option {
            margin: 5px 0 5px 8px;
        }
        .settings-panel .options .theme-option:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .settings-panel .options .theme-option.active {
            border-color: var(--accent-color); /* استخدام لون التمييز للإشارة للنشط */
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 50%, transparent); /* حلقة خارجية */
        }
        .settings-panel .options .theme-option::after { /* Checkmark for active theme */
            /* ... (نفس نمط علامة الصح) ... */
            content: '\f00c'; /* Font Awesome check */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            /* ضبط لون علامة الصح ليتناسب مع خلفية الزر */
            color: color-mix(in srgb, var(--check-mark-color, #ffffff) 100%, transparent); /* متغير للون علامة الصح */
            font-size: 0.9rem; /* أكبر قليلاً */
            opacity: 0;
            transition: opacity 0.2s;
            text-shadow: 0 0 2px rgba(0,0,0,0.5); /* ظل للنص لجعله أوضح */
        }
        /* تحديد ألوان علامة الصح لكل ثيم */
        .settings-panel .options .theme-option[data-theme="light"].active { --check-mark-color: #333; }
        .settings-panel .options .theme-option[data-theme="dark"].active { --check-mark-color: #fff; }
        .settings-panel .options .theme-option[data-theme="blue-accent"].active { --check-mark-color: #1e293b; }

        .settings-panel .options .theme-option.active::after { opacity: 1; }

        /* Specific Theme Button Colors (Unchanged) */
        .theme-option[data-theme="ivory"] { background-color: #FFFAF0; border-color: #E0E0E0; }
        .theme-option[data-theme="sapphire"] { background-color: #1C2541; border-color: #3A506B; }
        .theme-option[data-theme="emerald"] { background-color: #2A4B30; border-color: #4A6D43; }
        .theme-option[data-theme="crimson"] { background-color: #282828; border-color: #424242; }
        /* زر الإغلاق */
        #settings-close {
            position: absolute;
            top: 20px; /* مسافة أكبر من الأعلى */
            right: 25px; /* LTR default */
            background: none;
            border: none;
            font-size: 2rem; /* أكبر قليلاً */
            color: var(--text-muted);
            cursor: pointer;
            line-height: 1;
            padding: 0; /* لا حاجة لحشو إضافي */
            transition: color 0.3s, transform 0.3s;
        }
        #settings-close:hover {
            color: var(--accent-color);
            transform: rotate(90deg); /* دوران بسيط عند المرور */
        }
        html[dir="rtl"] #settings-close { right: auto; left: 25px; }


        /* ---=== Global Styles & Variables (Default: Classic Ivory Theme) ===--- */
        :root { /* Classic Ivory */
            --primary-color: #7D7C7A; /* Warm Gray */
            --secondary-color: #003366; /* Deep Classic Blue */
            --accent-color: #B08D57; /* Muted Gold/Bronze accent */
            --light-color: #FFFAF0; /* Floral White / Ivory */
            --light-alt-color: #FFFFFF; /* White for cards */
            --dark-color: #4A4A4A; /* Dark Warm Gray Text */
            --text-color: #4A4A4A;
            --text-muted: #8A8A8A; /* Lighter Warm Gray */
            --heading-color: #2C2C2C; /* Very Dark Gray/Near Black */
            --bg-color: var(--light-color);
            --card-bg-color: var(--light-alt-color);
            --border-color: #E0E0E0; /* Light Gray Border */
            --shadow-color: rgba(0, 0, 0, 0.06);
            /* Fonts and transitions remain the same */
            --heading-font: 'Poppins', 'Cairo', sans-serif;
            --body-font: 'Poppins', 'Cairo', sans-serif;
            --transition-speed: 0.4s ease;
            --theme-transition: background-color var(--transition-speed), color var(--transition-speed), border-color var(--transition-speed);
        }

        /* ---=== Sapphire Night Theme Variables ===--- */
        body.theme-sapphire {
            --primary-color: #3A506B; /* Slate Blue */
            --secondary-color: #5BC0BE; /* Medium Turquoise */
            --accent-color: #E0A800; /* Rich Gold */
            --light-color: #0B132B; /* Very Dark Navy */
            --light-alt-color: #1C2541; /* Darker Navy/Indigo */
            --dark-color: #F8F9FA; /* Light Gray for text */
            --text-color: #CED4DA; /* Lighter Gray */
            --text-muted: #ADB5BD; /* Gray */
            --heading-color: #FFFFFF; /* White */
            --bg-color: var(--light-color);
            --card-bg-color: var(--light-alt-color);
            --border-color: #3A506B; /* Slate Blue Border */
            --shadow-color: rgba(255, 255, 255, 0.05);
        }

        /* ---=== Emerald Forest Theme Variables ===--- */
        body.theme-emerald {
            --primary-color: #588157; /* Medium Forest Green */
            --secondary-color: #A3B18A; /* Sage Green */
            --accent-color: #D4AF37; /* Muted Gold */
            --light-color: #1D3522; /* Very Dark Green */
            --light-alt-color: #2A4B30; /* Dark Green */
            --dark-color: #F5F5DC; /* Beige / Cream */
            --text-color: #E8E8E8; /* Light Gray/Cream */
            --text-muted: #B0BF9A; /* Lighter Sage */
            --heading-color: #F5F5DC; /* Beige / Cream */
            --bg-color: var(--light-color);
            --card-bg-color: var(--light-alt-color);
            --border-color: #4A6D43; /* Darker Green Border */
            --shadow-color: rgba(245, 245, 220, 0.06); /* Subtle light shadow */
        }

        /* ---=== Crimson Peak Theme Variables ===--- */
        body.theme-crimson {
            --primary-color: #424242; /* Medium Gray */
            --secondary-color: #00BCD4; /* Bright Cyan */
            --accent-color: #E53935; /* Strong Crimson */
            --light-color: #1A1A1A; /* Very Dark Gray/Charcoal */
            --light-alt-color: #282828; /* Dark Gray */
            --dark-color: #F5F5F5; /* Near White */
            --text-color: #BDBDBD; /* Light Gray */
            --text-muted: #757575; /* Medium Gray */
            --heading-color: #FFFFFF; /* White */
            --bg-color: var(--light-color);
            --card-bg-color: var(--light-alt-color);
            --border-color: #424242; /* Medium Gray Border */
            --shadow-color: rgba(255, 255, 255, 0.04);
        }

        /* -------------[ تعديلات على الأنماط العامة لتناسب الثيمات الجديدة ]-------------- */

        /* قد تحتاج لتعديل بعض الظلال أو التدرجات لتناسب كل ثيم */
        /* مثال: تعديل ظل الأزرار ليتناسب مع الثيمات الداكنة */
        body.theme-sapphire .btn, body.theme-emerald .btn, body.theme-crimson .btn {
            box-shadow: 0 4px 15px color-mix(in srgb, var(--secondary-color) 20%, transparent);
        }
        body.theme-sapphire .btn:hover, body.theme-emerald .btn:hover, body.theme-crimson .btn:hover {
            box-shadow: 0 8px 20px color-mix(in srgb, var(--secondary-color) 30%, transparent);
        }

        /* تعديل خلفية الهيدر في حالة التمرير للثيمات الداكنة */
        body.theme-sapphire #main-header.header-scrolled,
        body.theme-emerald #main-header.header-scrolled,
        body.theme-crimson #main-header.header-scrolled {
            background-color: color-mix(in srgb, var(--card-bg-color) 98%, black 2%); /* زيادة التعتيم قليلاً */
        }

        /* تعديل ألوان خطوط شريط المهارات لتناسب الخلفيات المختلفة */
        .skill-bar {
            background-color: color-mix(in srgb, var(--text-muted) 30%, transparent);
        }
        /* قد تحتاج لتعديل تدرج التعبئة إذا لم يكن مناسبًا لبعض الثيمات */
        /* .skill-bar-fill { background: linear-gradient(90deg, var(--secondary-color), var(--accent-color)); } */

        /* تعديل لون علامة الصح في أزرار الثيمات */
        /* (نحتاج لتحديث المتغيرات في CSS لجعلها تعمل لكل ثيم جديد) */
        .settings-panel .options .theme-option.active {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 50%, transparent);
        }
        .settings-panel .options .theme-option::after {
            /* ... (نفس الأنماط الأساسية) ... */
            color: var(--checkmark-color, #ffffff); /* استخدام متغير */
            /* ... (بقية الأنماط) ... */
        }

        /* تحديد لون علامة الصح لكل ثيم */
        body.theme-ivory .settings-panel .options .theme-option[data-theme="ivory"].active { --checkmark-color: var(--heading-color); }
        body.theme-sapphire .settings-panel .options .theme-option[data-theme="sapphire"].active { --checkmark-color: var(--heading-color); }
        body.theme-emerald .settings-panel .options .theme-option[data-theme="emerald"].active { --checkmark-color: var(--heading-color); }
        body.theme-crimson .settings-panel .options .theme-option[data-theme="crimson"].active { --checkmark-color: var(--heading-color); }

        /* ألوان أزرار اختيار الثيم نفسها */
        .theme-option[data-theme="ivory"] { background-color: #FFFAF0; border-color: #E0E0E0; }
        .theme-option[data-theme="sapphire"] { background-color: #1C2541; border-color: #3A506B; }
        .theme-option[data-theme="emerald"] { background-color: #2A4B30; border-color: #4A6D43; }
        .theme-option[data-theme="crimson"] { background-color: #282828; border-color: #424242; }


        /* ---=== Skills Section Enhancements ===--- */

        #skills {
            background-color: var(--bg-color); /* أو تدرج خفيف */
            /* background: linear-gradient(175deg, color-mix(in srgb, var(--card-bg-color) 95%, var(--bg-color) 5%) 0%, var(--bg-color) 100%); */
            padding: 90px 0 60px 0; /* تعديل الحشو السفلي */
            position: relative;
            overflow: hidden;
        }

        /* عنوان القسم */
        #skills h2.section-title {
            margin-bottom: 1.5rem;
        }
        #skills h2.section-title::after {
            /* يمكن استخدام نفس الخط الفاصل المزخرف من قسم About أو تعديله */
            content: ''; display: block; width: 100px; height: 4px;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            margin: 20px auto 60px; /* زيادة المسافة السفلية */
            border-radius: 2px;
        }

        /* تخطيط شبكي لبطاقات المهارات */
        .skills-grid-container {
            display: grid;
            /* أعمدة متجاوبة: بعرض أدنى 280px وأقصى 1fr (تأخذ المساحة المتاحة بالتساوي) */
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 35px; /* مسافة بين البطاقات */
        }

        /* بطاقة المهارة الفردية */
        .skill-card {
            background-color: var(--card-bg-color);
            border-radius: 12px; /* استدارة الحواف */
            padding: 30px 25px;
            box-shadow: 0 8px 25px -5px var(--shadow-color), 0 5px 15px rgba(0,0,0,0.04); /* ظل أنعم */
            border: 1px solid var(--border-color);
            border-bottom: 4px solid var(--secondary-color); /* حد سفلي ملون */
            display: flex; /* استخدام flex لتنسيق المحتوى الداخلي */
            flex-direction: column; /* ترتيب عمودي */
            align-items: center; /* توسيط أفقي */
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, var(--theme-transition);
        }

        .skill-card:hover {
            transform: translateY(-8px) scale(1.02); /* رفع وتكبير بسيط */
            box-shadow: 0 15px 40px -10px color-mix(in srgb, var(--shadow-color) 150%, black), 0 8px 20px rgba(0,0,0,0.06);
            border-bottom-color: var(--accent-color); /* تغيير لون الحد السفلي عند المرور */
        }

        /* أيقونة المهارة */
        .skill-card .skill-icon {
            font-size: 3.5rem; /* حجم كبير للأيقونة */
            color: var(--secondary-color);
            margin-bottom: 20px;
            line-height: 1;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        .skill-card:hover .skill-icon {
            color: var(--accent-color);
            transform: scale(1.1) rotate(-5deg); /* تأثير حركة للأيقونة */
        }

        /* عنوان المهارة */
        .skill-card h4 {
            font-size: 1.25rem;
            margin-bottom: 15px;
            color: var(--heading-color);
            font-weight: 600;
        }

        /* وصف قصير للمهارة (اختياري) */
        .skill-card .skill-description {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 25px;
            min-height: 40px; /* ارتفاع أدنى للحفاظ على التنسيق */
        }

        /* حاوية أشرطة التقدم (إذا كانت المهارة تحتوي على مهارات فرعية بمستويات) */
        .skill-card .progress-bars-container {
            width: 100%; /* تأخذ عرض البطاقة بالكامل */
            margin-top: auto; /* تدفع الأشرطة لأسفل البطاقة إذا كانت البطاقة لها ارتفاع متغير */
        }

        /* عنصر شريط التقدم الفردي */
        .progress-item {
            margin-bottom: 15px;
            text-align: left; /* محاذاة لليسار داخل البطاقة */
        }
        .progress-item:last-child {
            margin-bottom: 0;
        }

        .progress-item .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .progress-item .progress-info span:first-child {
            color: var(--text-color); /* اسم المهارة الفرعية */
        }
        .progress-item .progress-info span:last-child {
            color: var(--secondary-color); /* النسبة المئوية */
            font-weight: 600;
        }

        /* شريط التقدم نفسه */
        .progress-bar-wrapper {
            height: 8px; /* ارتفاع الشريط */
            background-color: color-mix(in srgb, var(--border-color) 50%, var(--card-bg-color) 50%); /* خلفية باهتة للشريط */
            border-radius: 4px;
            overflow: hidden; /* لإخفاء الجزء الزائد من التعبئة */
            position: relative; /* للسماح بتعبئة الشريط */
        }

        .progress-bar-fill {
            height: 100%;
            /* تدرج لوني جذاب للتعبئة */
            background: linear-gradient(90deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 60%, var(--accent-color) 40%));
            border-radius: 4px;
            width: 0; /* العرض المبدئي صفر، سيتم تحديده بواسطة JS */
            transition: width 1.8s cubic-bezier(0.25, 0.1, 0.25, 1); /* حركة تعبئة سلسة وطويلة */
            position: absolute;
            left: 0;
            top: 0;
        }
        html[dir="rtl"] .progress-bar-fill {
            left: auto;
            right: 0;
        }


        /* قسم المهارات الإضافية (مثل Exploring Next) */
        .additional-skills {
            text-align: center;
            margin-top: 60px; /* مسافة أكبر */
            padding-top: 30px;
            border-top: 1px dashed var(--border-color); /* فاصل مختلف */
        }
        .additional-skills h4 {
            font-size: 1.3rem;
            color: var(--heading-color);
            margin-bottom: 15px;
        }
        .additional-skills h4 i {
            margin-right: 10px; /* LTR */
            color: var(--accent-color);
        }
        html[dir="rtl"] .additional-skills h4 i { margin-right: 0; margin-left: 10px; }

        .additional-skills p {
            font-size: 1.1rem; /* أكبر قليلاً */
            color: var(--text-muted);
            line-height: 1.8;
        }
        .additional-skills p span { /* لتمييز أسماء الأدوات */
            display: inline-block;
            margin: 0 5px;
            padding: 3px 8px;
            background-color: color-mix(in srgb, var(--secondary-color) 10%, transparent);
            border-radius: 4px;
            font-weight: 500;
            color: var(--secondary-color);
            font-size: 1rem;
        }


        /* تعديلات الاستجابة لقسم المهارات */
        @media (max-width: 768px) {
            .skills-grid-container {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* أعمدة أضيق قليلاً */
                gap: 25px; /* مسافة أقل */
            }
            .skill-card {
                padding: 25px 20px;
            }
            .skill-card .skill-icon {
                font-size: 3rem;
            }
            .skill-card h4 {
                font-size: 1.15rem;
            }
        }

        @media (max-width: 576px) {
            .skills-grid-container {
                grid-template-columns: 1fr; /* عمود واحد فقط */
            }
            .additional-skills p {
                font-size: 1rem;
            }
            .additional-skills p span {
                font-size: 0.9rem;
                margin: 5px 3px; /* ترتيب أفضل على أسطر متعددة */
            }
        }

        



        /* ---=== Work Experience Section Enhancements (Timeline Design) ===--- */

        #experience {
            background-color: var(--bg-color); /* أو تدرج لوني خفيف */
            padding: 90px 0;
            position: relative; /* لتحديد موضع الخط الزمني */
        }

        /* عنوان القسم */
        #experience h2.section-title {
            margin-bottom: 1.5rem;
        }
        #experience h2.section-title::after {
            /* نفس الخط الفاصل أو تعديله */
            content: ''; display: block; width: 100px; height: 4px;
            background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
            margin: 20px auto 70px; /* زيادة المسافة السفلية كثيرًا */
            border-radius: 2px;
        }

        /* حاوية الخط الزمني */
        .timeline-container {
            position: relative;
            max-width: 900px; /* تحديد عرض أقصى للخط الزمني */
            margin: 0 auto; /* توسيط الخط الزمني */
            padding: 0 20px; /* حشو جانبي */
        }

        /* الخط الزمني العمودي */
        .timeline-container::after {
            content: '';
            position: absolute;
            width: 4px; /* سمك الخط */
            background-color: var(--border-color); /* لون الخط الأساسي */
            /* تدرج لوني للخط (اختياري) */
            /* background: linear-gradient(to bottom, var(--secondary-color), var(--accent-color)); */
            top: 0;
            bottom: 0;
            left: 50%; /* توسيط الخط */
            margin-left: -2px; /* تعديل لسمك الخط */
            z-index: 0; /* خلف البطاقات */
            border-radius: 2px;
            transition: var(--theme-transition); /* لتغيير لون الخط مع الثيم */
        }
        html[dir="rtl"] .timeline-container::after {
            left: auto;
            right: 50%;
            margin-left: 0;
            margin-right: -2px;
        }





        /* ---=== Work Experience Section Enhancements (Timeline Design) ===--- */

#experience {
    background-color: var(--bg-color);
    padding: 90px 0;
    position: relative;
}

/* Section Title */
#experience h2.section-title {
    margin-bottom: 1.5rem;
}
#experience h2.section-title::after {
    content: ''; display: block; width: 100px; height: 4px;
    background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
    margin: 20px auto 70px;
    border-radius: 2px;
}

/* Timeline Container */
.timeline-container {
    position: relative;
    max-width: 900px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Vertical Timeline Line (Default LTR) */
.timeline-container::after {
    content: '';
    position: absolute;
    width: 4px;
    background-color: var(--border-color);
    top: 0;
    bottom: 0;
    left: 50%; /* Center line */
    margin-left: -2px; /* Adjust for line thickness */
    z-index: 0;
    border-radius: 2px;
    transition: var(--theme-transition);
}

/* Timeline Item Base Styles */
.timeline-item {
    padding: 10px 40px;
    position: relative;
    background-color: inherit;
    width: 50%;
    margin-bottom: 50px;
    opacity: 0; /* Hidden initially for AOS */
    box-sizing: border-box;
}
.timeline-item:last-child {
    margin-bottom: 0;
}

/* --- LTR Specific Positioning --- */

/* Left Side Items (LTR) */
.timeline-item.timeline-left {
    left: 0; /* Positioned on the left half */
    padding-right: 60px; /* Padding towards the center line */
    padding-left: 40px;  /* Original side padding */
}

/* Right Side Items (LTR) */
.timeline-item.timeline-right {
    left: 50%; /* Positioned on the right half */
    padding-left: 60px;  /* Padding towards the center line */
    padding-right: 40px; /* Original side padding */
}

/* Arrow for Left Side Items (LTR) */
.timeline-item.timeline-left .timeline-arrow {
    content: " ";
    height: 0; width: 0;
    position: absolute;
    top: 28px;
    z-index: 1;
    right: 30px; /* Position pointing right */
    border: medium solid var(--card-bg-color);
    border-width: 10px 0 10px 10px;
    border-left-color: var(--card-bg-color);
    transition: border-left-color 0.3s ease, var(--theme-transition);
}

/* Arrow for Right Side Items (LTR) */
.timeline-item.timeline-right .timeline-arrow {
    content: " ";
    height: 0; width: 0;
    position: absolute;
    top: 28px;
    z-index: 1;
    left: 30px; /* Position pointing left */
    border: medium solid var(--card-bg-color);
    border-width: 10px 10px 10px 0;
    border-right-color: var(--card-bg-color);
    transition: border-right-color 0.3s ease, var(--theme-transition);
}

/* Dot on the Timeline (Default LTR) */
.timeline-item .timeline-dot {
    content: '';
    position: absolute;
    width: 18px; height: 18px;
    background-color: var(--secondary-color);
    border: 4px solid var(--bg-color);
    top: 25px;
    border-radius: 50%;
    z-index: 1;
    transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.3s ease, var(--theme-transition);
}
/* Position dot for Left items (LTR) */
.timeline-item.timeline-left .timeline-dot {
    right: -9px; /* Center on the line (half dot width) */
}
/* Position dot for Right items (LTR) */
.timeline-item.timeline-right .timeline-dot {
    left: -9px; /* Center on the line (half dot width) */
}

/* Dot Hover Effect */
.timeline-item:hover .timeline-dot {
    background-color: var(--accent-color);
    transform: scale(1.2);
}

/* Card Content Styles */
.timeline-content {
    padding: 25px 30px;
    background-color: var(--card-bg-color);
    position: relative;
    border-radius: 10px;
    box-shadow: 0 6px 20px -5px var(--shadow-color), 0 4px 10px rgba(0,0,0,0.03);
    border: 1px solid var(--border-color);
    transition: box-shadow 0.3s ease, var(--theme-transition);
}
.timeline-item:hover .timeline-content {
     box-shadow: 0 12px 35px -8px color-mix(in srgb, var(--shadow-color) 150%, black), 0 8px 15px rgba(0,0,0,0.05);
}

/* Card Header */
.timeline-content h3 {
    margin-top: 0;
    margin-bottom: 5px;
    font-size: 1.4rem;
    color: var(--heading-color);
    font-weight: 600;
}
.timeline-meta {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 18px;
    font-weight: 500;
    display: flex;
    flex-wrap: wrap;
    gap: 5px 15px;
}
.timeline-meta span {
    display: inline-flex;
    align-items: center;
}
.timeline-meta i {
    margin-right: 6px; /* LTR spacing */
    color: var(--secondary-color);
    font-size: 0.95rem;
}

/* Task List */
.timeline-content ul {
    list-style: none;
    padding-left: 5px; /* LTR indent */
    margin: 0;
}
.timeline-content ul li {
    margin-bottom: 10px;
    position: relative;
    padding-left: 25px; /* LTR padding for marker */
    font-size: 0.95rem;
    line-height: 1.6;
}
.timeline-content ul li:last-child { margin-bottom: 0; }

/* Custom List Marker (LTR) */
.timeline-content ul li::before {
    content: '\f0da'; /* fa-chevron-right */
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    position: absolute;
    left: 0;
    top: 4px;
    color: var(--accent-color);
    font-size: 0.9em;
    transition: color 0.3s ease, var(--theme-transition);
}
/* Highlight keywords */
.timeline-content ul li strong {
    color: var(--secondary-color);
    font-weight: 600;
}


/* ---=== RTL Overrides for Experience Section ===--- */
html[dir="rtl"] {

    /* Adjust Timeline Line */
    .timeline-container::after {
        left: auto;
        right: 50%;
        margin-left: 0;
        margin-right: -2px;
    }

    /* Adjust Item Positioning */
    .timeline-item.timeline-left { /* Should be on the RIGHT in RTL */
        left: auto;
        right: 0;
        padding-left: 60px;  /* Padding towards center */
        padding-right: 40px; /* Original side padding */
    }
    .timeline-item.timeline-right { /* Should be on the LEFT in RTL */
        left: auto;
        right: 50%;
        padding-right: 60px; /* Padding towards center */
        padding-left: 40px;  /* Original side padding */
    }

    /* Adjust Arrows */
    .timeline-item.timeline-left .timeline-arrow { /* Now on right, arrow points left */
        right: auto;
        left: 30px;
        border-width: 10px 10px 10px 0;
        border-left-color: transparent;
        border-right-color: var(--card-bg-color);
        transition-property: border-right-color; /* Explicit transition property */
    }
    .timeline-item.timeline-right .timeline-arrow { /* Now on left, arrow points right */
        left: auto;
        right: 30px;
        border-width: 10px 0 10px 10px;
        border-right-color: transparent;
        border-left-color: var(--card-bg-color);
        transition-property: border-left-color; /* Explicit transition property */
    }

    /* Adjust Dots */
    .timeline-item.timeline-left .timeline-dot { /* Now on right */
        right: auto;
        left: -9px;
    }
    .timeline-item.timeline-right .timeline-dot { /* Now on left */
        left: auto;
        right: -9px;
    }

    /* Adjust Content Alignment & Spacing */
    .timeline-meta i {
        margin-right: 0;
        margin-left: 6px;
    }
    .timeline-content ul {
        padding-left: 0;
        padding-right: 5px; /* RTL indent */
    }
    .timeline-content ul li {
        padding-left: 0;
        padding-right: 25px; /* RTL padding for marker */
    }
    .timeline-content ul li::before {
        left: auto;
        right: 0;
        content: '\f0d9'; /* fa-chevron-left */
    }

} /* End of html[dir="rtl"] */


/* ---=== Responsive Adjustments for Timeline ===--- */
@media (max-width: 768px) {
    /* Switch to single column layout */
    .timeline-container::after {
        left: 20px; /* Move line to the left */
        right: auto;
        margin-left: 0;
        margin-right: 0;
    }
    html[dir="rtl"] .timeline-container::after {
        left: auto;
        right: 20px; /* Move line to the right in RTL */
        margin-left: 0;
        margin-right: 0;
    }

    .timeline-item {
        width: 100%; /* Full width */
        padding-left: 60px; /* Consistent padding from the line */
        padding-right: 15px; /* Reduce other side padding */
        left: 0 !important; /* Override LTR/RTL positioning */
        right: auto !important;
    }
     html[dir="rtl"] .timeline-item {
        padding-left: 15px;
        padding-right: 60px; /* Consistent padding from the line in RTL */
        left: auto !important;
        right: 0 !important;
    }

    /* Hide arrows on small screens */
    .timeline-item .timeline-arrow {
        display: none;
    }

    /* Reposition dots for single column */
    .timeline-item .timeline-dot {
        left: 11px; /* (20px line position - 9px half dot width) */
        right: auto !important;
         /* No need to override transform if hover effect is desired */
         /* transform: none !important; */
         margin-left: 0 !important;
         margin-right: 0 !important;
    }
     html[dir="rtl"] .timeline-item .timeline-dot {
        left: auto !important;
        right: 11px;
        /* transform: none !important; */
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}




        /* ---=== Educational Background Section Enhancements ===--- */

/* ---=== Educational Background Section Enhancements ===--- */

#education {
    background-color: var(--bg-color);
    /* Optional Gradient: */
    /* background: linear-gradient(175deg, var(--bg-color) 0%, color-mix(in srgb, var(--card-bg-color) 95%, var(--bg-color) 5%) 100%); */
    padding: 90px 0;
    position: relative;
    overflow: hidden;
}

/* Section Title */
#education h2.section-title {
    margin-bottom: 1.5rem;
}
#education h2.section-title::after {
    content: '';
    display: block;
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
    margin: 20px auto 60px;
    border-radius: 2px;
}

/* Education Card Container */
.education-card-container {
    max-width: 750px;
    margin: 0 auto;
}

/* Education Card */
.education-item {
    background-color: var(--card-bg-color);
    border-radius: 15px;
    box-shadow: 0 12px 40px -10px var(--shadow-color), 0 8px 20px rgba(0,0,0,0.05);
    border: 1px solid var(--border-color);
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), /* Elastic ease out */
                box-shadow 0.4s ease,
                var(--theme-transition);
}
.education-item:hover {
    transform: translateY(-12px); /* Slightly more lift */
    box-shadow: 0 22px 55px -15px color-mix(in srgb, var(--shadow-color) 160%, black), 0 15px 35px rgba(0,0,0,0.08);
}

/* Card Header */
.education-header {
    background: linear-gradient(135deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 65%, var(--accent-color) 35%));
    color: #fff;
    padding: 30px 35px;
    display: flex;
    align-items: center;
    gap: 20px;
    border-bottom: 4px solid var(--accent-color); /* Thicker accent border */
}
.education-header .edu-icon {
    font-size: 3.2rem; /* Slightly larger icon */
    opacity: 0.85;
    flex-shrink: 0; /* Prevent icon shrinking */
}
.education-header h3 {
    color: #fff;
    margin: 0;
    font-size: 1.6rem;
    font-weight: 600;
    line-height: 1.3;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2); /* Subtle text shadow */
}
.education-header p.education-meta {
    color: rgba(255, 255, 255, 0.9);
    margin: 5px 0 0 0;
    font-size: 0.95rem;
    font-weight: 400;
    opacity: 0.9;
}
.education-header p.education-meta span[data-lang-key="eduUniversity"] {
    font-weight: 500; /* Slightly bolder university name */
}


/* Card Body */
.education-body {
    padding: 35px 35px; /* More padding */
}

/* Grades Section */
.education-grades ul {
    list-style: none;
    padding: 0;
    margin: 0 0 30px 0; /* Increased bottom margin */
    display: flex;
    flex-wrap: wrap;
    gap: 15px 20px; /* Row and column gap */
    justify-content: center; /* Center items if space allows */
    text-align: center;
}
.education-grades ul li {
    background-color: color-mix(in srgb, var(--bg-color) 85%, var(--card-bg-color) 15%);
    padding: 12px 18px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    font-size: 0.9rem; /* Smaller label text */
    flex: 1; /* Allow items to grow */
    min-width: 150px; /* Minimum width before wrapping */
    color: var(--text-muted);
    border-left: 4px solid var(--secondary-color); /* Left accent border */
}
html[dir="rtl"] .education-grades ul li {
    border-left: none;
    border-right: 4px solid var(--secondary-color);
}
.education-grades ul li span[data-lang-key$="Label"] { /* Styling for the label part */
    display: block;
    margin-bottom: 4px;
}
.education-grades ul li strong { /* Styling for the grade value */
    display: block;
    color: var(--heading-color);
    font-weight: 700; /* Bolder grade */
    font-size: 1.2rem;
}

/* Graduation Project Section */
.graduation-project {
    border-top: 1px dashed var(--border-color);
    padding-top: 30px;
    margin-top: 30px;
}
.graduation-project h4 {
    font-size: 1.3rem; /* Larger title */
    color: var(--secondary-color);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
}
.graduation-project h4 i {
    font-size: 1.2em; /* Larger icon */
    color: var(--accent-color);
    transition: transform 0.3s ease;
}
.graduation-project:hover h4 i { /* Subtle icon animation on section hover */
     transform: rotate(-10deg);
}


/* Project Details List */
.graduation-project ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.graduation-project ul li {
    margin-bottom: 18px; /* More space */
    padding-left: 30px; /* More padding for icon/label */
    position: relative;
    font-size: 0.95rem;
    line-height: 1.6;
    color: var(--text-color);
}
.graduation-project ul li:last-child {
    margin-bottom: 0;
}

/* List item marker (can use ::before or target label span) */
.graduation-project ul li::before {
    content: ''; /* Reset default marker */
}
/* Styling for the label part (e.g., "Methodology:") */
.graduation-project ul li span[data-lang-key$="Label"] {
    display: block;
    font-weight: 600;
    color: var(--heading-color);
    margin-bottom: 5px;
    position: relative; /* For potential icon */
    padding-left: 0; /* Reset padding if needed */
}
/* Optional: Add icon before label */
.graduation-project ul li span[data-lang-key$="Label"]::before {
     content: '\f105'; /* fa-chevron-right */
     font-family: 'Font Awesome 6 Free';
     font-weight: 900;
     color: var(--accent-color);
     position: absolute;
     left: -25px; /* Position relative to the start of the li padding */
     top: 2px;
     font-size: 0.9em;
}
html[dir="rtl"] .graduation-project ul li span[data-lang-key$="Label"]::before {
     content: '\f104'; /* fa-chevron-left */
     left: auto;
     right: -25px;
}


/* Styling for the description part (em/span/strong) */
.graduation-project ul li em,
.graduation-project ul li span[data-lang-key$="Desc"],
.graduation-project ul li strong[data-lang-key$="Value"] {
    display: block;
    font-style: normal;
    color: var(--text-muted);
    padding-left: 0px; /* Optional padding for description */
    margin-left: 0px; /* Ensure alignment if label has icon */
    font-size: 0.95rem; /* Match li font-size */
}
html[dir="rtl"] .graduation-project ul li em,
html[dir="rtl"] .graduation-project ul li span[data-lang-key$="Desc"],
html[dir="rtl"] .graduation-project ul li strong[data-lang-key$="Value"] {
     padding-left: 0; padding-right: 0px; margin-left:0; margin-right: 0px;
}

.graduation-project ul li strong[data-lang-key="eduProjectGradeValue"] {
     color: var(--accent-color);
     background-color: color-mix(in srgb, var(--accent-color) 10%, transparent);
     padding: 2px 6px;
     border-radius: 4px;
     font-weight: 700; /* Ensure it's bold */
     display: inline-block; /* Make it inline block */
}

/* Styling for the tools list */
.graduation-project ul li .tools-list {
    padding-left: 0px; /* Align with description */
    margin-left: 0px;
    margin-top: 8px;
}
html[dir="rtl"] .graduation-project ul li .tools-list {
     padding-left: 0; padding-right: 0px; margin-left:0; margin-right: 0px;
}
.graduation-project ul li .tools-list span {
    display: inline-block;
    background-color: color-mix(in srgb, var(--secondary-color) 15%, transparent); /* Slightly stronger background */
    color: var(--secondary-color);
    padding: 3px 8px;
    margin: 4px 4px 4px 0; /* Adjust spacing */
    border-radius: 5px;
    font-size: 0.9em; /* Slightly larger */
    font-weight: 500;
    border: 1px solid color-mix(in srgb, var(--secondary-color) 20%, transparent); /* Subtle border */
}
html[dir="rtl"] .graduation-project ul li .tools-list span { margin: 4px 0 4px 4px; }


/* Responsive Adjustments */
@media (max-width: 768px) {
    .education-header {
        padding: 25px 25px;
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    .education-header h3 {
        font-size: 1.4rem;
    }
     .education-header .edu-icon {
        font-size: 2.8rem;
    }
    .education-body {
        padding: 25px 25px;
    }
    .education-grades ul li {
        flex-basis: 100%; /* Stack grades */
        min-width: unset;
    }
     .graduation-project h4 {
        font-size: 1.2rem;
    }
    .graduation-project ul li {
         padding-left: 25px; /* Adjust padding */
    }
     html[dir="rtl"] .graduation-project ul li { padding-left: 0; padding-right: 25px; }
     .graduation-project ul li span[data-lang-key$="Label"]::before { left: -20px; } /* Adjust icon position */
     html[dir="rtl"] .graduation-project ul li span[data-lang-key$="Label"]::before { left: auto; right: -20px; }

}

@media (max-width: 576px) {
     .education-header h3 {
        font-size: 1.3rem;
    }
    .education-grades ul li strong {
         font-size: 1.1rem;
     }
    .graduation-project ul li,
    .graduation-project ul li em,
    .graduation-project ul li span[data-lang-key$="Desc"],
    .graduation-project ul li strong[data-lang-key$="Value"] {
         font-size: 0.9rem;
     }
    .graduation-project ul li .tools-list span {
         font-size: 0.8em;
         padding: 2px 5px;
    }
     .education-item:hover { transform: translateY(0); } /* Disable lift on very small screens if it causes issues */
}





    /* ---=== Key Project Achievements Section Enhancements ===--- */

    #projects {
        background-color: var(--bg-color);
        /* Optional Gradient */
        /* background: linear-gradient(175deg, var(--bg-color) 0%, color-mix(in srgb, var(--card-bg-color) 90%, var(--bg-color) 10%) 100%); */
        padding: 90px 0;
        position: relative;
        overflow: hidden;
    }

    /* Section Title */
    #projects h2.section-title {
        margin-bottom: 1.5rem;
    }
    #projects h2.section-title::after {
        content: ''; display: block; width: 100px; height: 4px;
        background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
        margin: 20px auto 60px;
        border-radius: 2px;
    }

    /* Grid Container for Projects */
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive columns */
        gap: 40px; /* Space between cards */
    }

    /* Individual Project Card */
    .project-card {
        background-color: var(--card-bg-color);
        border-radius: 12px;
        overflow: hidden; /* Important for image and overlay */
        box-shadow: 0 10px 30px -8px var(--shadow-color), 0 6px 15px rgba(0,0,0,0.04);
        position: relative; /* For positioning overlay */
        display: flex;
        flex-direction: column; /* Stack image/icon and content */
        transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease, var(--theme-transition);
    }
    .project-card:hover {
        transform: translateY(-10px) scale(1.01); /* Lift and slight scale */
        box-shadow: 0 18px 45px -12px color-mix(in srgb, var(--shadow-color) 150%, black), 0 10px 25px rgba(0,0,0,0.06);
    }

    /* Project Image/Icon Area */
    .project-card-image {
        height: 220px; /* Fixed height for consistency */
        position: relative; /* For overlay */
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: color-mix(in srgb, var(--secondary-color) 15%, transparent); /* Fallback bg */
    }
    .project-card-image img { /* If using an image */
        width: 100%;
        height: 100%;
        object-fit: cover; /* Cover the area */
        transition: transform 0.5s ease, filter 0.5s ease;
    }
    .project-card-image .project-icon { /* If using an icon */
        font-size: 5rem;
        color: var(--secondary-color);
        opacity: 0.6;
        transition: transform 0.5s ease, color 0.5s ease;
    }
    .project-card:hover .project-card-image img,
    .project-card:hover .project-card-image .project-icon {
        transform: scale(1.1); /* Zoom effect on hover */
    }
    .project-card:hover .project-card-image img {
        filter: brightness(0.7); /* Darken image slightly on hover */
    }
    .project-card:hover .project-card-image .project-icon {
        color: var(--accent-color); /* Change icon color */
    }


    /* Hover Overlay on Image/Icon Area */
    .project-card-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.1) 60%); /* Gradient overlay */
        opacity: 0; /* Hidden by default */
        display: flex;
        flex-direction: column;
        justify-content: flex-end; /* Align content to bottom */
        align-items: center;
        padding: 20px;
        transition: opacity 0.4s ease;
    }
    .project-card:hover .project-card-overlay {
        opacity: 1; /* Show on hover */
    }

    /* Details Button on Overlay */
    .project-card-overlay .details-btn {
        background-color: var(--accent-color);
        color: var(--heading-color);
        /* color: #fff; */ /* Alternative color */
        padding: 10px 25px;
        border-radius: 50px;
        font-weight: 600;
        font-size: 0.9rem;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transform: translateY(20px); /* Start slightly down */
        opacity: 0;
        transition: transform 0.4s ease 0.1s, opacity 0.4s ease 0.1s, background-color 0.3s ease; /* Delayed entry */
    }
    .project-card:hover .project-card-overlay .details-btn {
        transform: translateY(0); /* Move up on hover */
        opacity: 1;
    }
    .project-card-overlay .details-btn:hover {
        background-color: color-mix(in srgb, var(--accent-color) 85%, black 15%);
        color: #fff;
    }


    /* Project Content Area */
    .project-card-content {
        padding: 25px;
        flex-grow: 1; /* Allow content to take remaining space */
        display: flex;
        flex-direction: column;
    }
    .project-card-content h3 {
        margin-top: 0;
        margin-bottom: 8px;
        font-size: 1.35rem;
        color: var(--heading-color);
        font-weight: 600;
        line-height: 1.4;
    }
    .project-location {
        font-size: 0.9rem;
        color: var(--text-muted);
        margin-bottom: 15px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 6px;
    }
    .project-location i {
        color: var(--secondary-color);
        font-size: 0.95rem;
    }

    /* Short description visible on card */
    .project-short-desc {
        font-size: 0.95rem;
        color: var(--text-color);
        line-height: 1.6;
        margin-bottom: 0; /* Remove bottom margin if button is below */
        /* Limit lines shown (optional) */
        /* display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis; */
        flex-grow: 1; /* Takes available space before footer */
    }

    /* Project Card Footer (Optional for Status) */
    .project-card-footer {
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
        text-align: right; /* Align status to the right */
    }
    html[dir="rtl"] .project-card-footer { text-align: left; }

    .project-status {
        font-size: 0.85rem;
        font-weight: 600;
        padding: 4px 10px;
        border-radius: 15px;
        display: inline-flex; /* Use inline-flex for icon alignment */
        align-items: center;
        gap: 5px;
    }
    .project-status.completed {
        background-color: color-mix(in srgb, var(--accent-color) 20%, transparent);
        color: color-mix(in srgb, var(--accent-color) 80%, black 20%);
        border: 1px solid color-mix(in srgb, var(--accent-color) 40%, transparent);
    }
    .project-status.ongoing {
        background-color: color-mix(in srgb, var(--secondary-color) 20%, transparent);
        color: var(--secondary-color);
        border: 1px solid color-mix(in srgb, var(--secondary-color) 40%, transparent);
    }
    .project-status i {
        font-size: 0.8em;
    }

    /* ---=== Project Modal Styles ===--- */
    .project-modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 1050; /* Above everything else */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0,0,0,0.7); /* Dark overlay */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0s linear 0.4s;
    }
    .project-modal.active {
        display: block;
        opacity: 1;
        visibility: visible;
        transition: opacity 0.4s ease, visibility 0s linear 0s;
    }

    .project-modal-content {
        background-color: var(--card-bg-color);
        margin: 8% auto; /* Centered vertically (approx) and horizontally */
        padding: 30px 40px;
        border-radius: 10px;
        max-width: 800px; /* Max width of modal */
        position: relative;
        box-shadow: 0 5px 25px rgba(0,0,0,0.3);
        transform: translateY(-50px) scale(0.95); /* Initial state for animation */
        opacity: 0;
        transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s ease, var(--theme-transition);
    }
    .project-modal.active .project-modal-content {
        transform: translateY(0) scale(1);
        opacity: 1;
    }

    .project-modal-close {
        position: absolute;
        top: 15px;
        right: 20px;
        color: var(--text-muted);
        font-size: 2.5rem;
        font-weight: bold;
        line-height: 1;
        cursor: pointer;
        transition: color 0.3s ease, transform 0.3s ease;
    }
    .project-modal-close:hover {
        color: var(--accent-color);
        transform: scale(1.1);
    }
    html[dir="rtl"] .project-modal-close { right: auto; left: 20px; }

    .project-modal-content h2 { /* Title inside modal */
        color: var(--secondary-color);
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.8rem;
        border-bottom: 2px solid var(--accent-color);
        padding-bottom: 10px;
    }
    .project-modal-content .modal-location {
        font-size: 1rem;
        color: var(--text-muted);
        margin-bottom: 25px;
        display: flex; align-items: center; gap: 8px;
    }
    .project-modal-content .modal-location i { color: var(--secondary-color); }

    .project-modal-content h4 { /* Sub-headings inside modal */
        font-size: 1.2rem;
        color: var(--heading-color);
        margin-top: 25px;
        margin-bottom: 10px;
        border-bottom: 1px solid var(--border-color);
        padding-bottom: 5px;
    }

    .project-modal-content p,
    .project-modal-content ul {
        font-size: 1rem;
        line-height: 1.7;
        color: var(--text-color);
        margin-bottom: 15px;
    }
    .project-modal-content ul {
        list-style: none;
        padding-left: 0;
    }
    .project-modal-content ul li {
        padding-left: 25px;
        position: relative;
        margin-bottom: 8px;
    }
    html[dir="rtl"] .project-modal-content ul li { padding-left: 0; padding-right: 25px; }
    .project-modal-content ul li::before {
        content: '\f00c'; /* fa-check */
        font-family: 'Font Awesome 6 Free';
        font-weight: 900;
        position: absolute;
        left: 0; top: 5px;
        color: var(--accent-color);
        font-size: 0.9em;
    }
    html[dir="rtl"] .project-modal-content ul li::before { left: auto; right: 0; }
    .project-modal-content ul li strong { color: var(--secondary-color); }


    /* Responsive Adjustments */
    @media (max-width: 992px) {
        .projects-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }
    }
    @media (max-width: 768px) {
        .project-card-image { height: 200px; }
        .project-card-content h3 { font-size: 1.25rem; }
        .project-modal-content { margin: 15% auto; padding: 25px 30px; max-width: 90%; }
        .project-modal-content h2 { font-size: 1.6rem; }
    }
    @media (max-width: 576px) {
        .projects-grid {
            grid-template-columns: 1fr; /* Single column */
        }
        .project-modal-content { margin: 20% auto; padding: 20px 20px; }
        .project-modal-content h2 { font-size: 1.4rem; }
        .project-modal-close { font-size: 2rem; top: 10px; right: 15px; }
        html[dir="rtl"] .project-modal-close { right: auto; left: 15px; }
    }



    /* ---=== Contact Section Enhancements ===--- */
    /* ---=== Contact Section Enhancements - V2 (Elegance & Professionalism with Form) ===--- */

    #contact {
        /* خلفية غنية - تتغير مع الثيم */
        --contact-bg-grad-1: color-mix(in srgb, var(--primary-color) 95%, black 5%);
        --contact-bg-grad-2: color-mix(in srgb, var(--primary-color) 70%, black 30%);
        --contact-bg-grad-3: color-mix(in srgb, var(--secondary-color) 50%, var(--primary-color) 50%);

        background: linear-gradient(160deg, var(--contact-bg-grad-1) 0%, var(--contact-bg-grad-2) 60%, var(--contact-bg-grad-3) 100%);
        color: #f0f0f5; /* لون نص فاتح ناعم */
        padding: 120px 0 100px 0; /* زيادة الحشو */
        position: relative;
        overflow: hidden;
        border-bottom: none; /* إزالة الحد السفلي إذا كان هذا آخر قسم */
    }
    /* تراكب نمط هندسي خفيف (اختياري) */
    #contact::before {
        content: '';
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.4; /* جعلها أخف */
        z-index: 0;
    }

    /* تعديل خاص بخلفية الثيمات الأخرى إذا لزم الأمر */
    body.theme-ivory #contact {
        --contact-bg-grad-1: color-mix(in srgb, var(--secondary-color) 15%, white 85%);
        --contact-bg-grad-2: color-mix(in srgb, var(--secondary-color) 5%, var(--bg-color) 95%);
        --contact-bg-grad-3: var(--bg-color);
        color: var(--text-color); /* استخدام لون النص الأساسي للثيم */
    }
    body.theme-ivory #contact::before {
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23003366' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.6;
    }
    body.theme-ivory #contact h2.section-title,
    body.theme-ivory #contact .contact-info-item .info-text a, /* روابط الاتصال */
    body.theme-ivory #contact .social-links a, /* روابط التواصل */
    body.theme-ivory #contact .contact-references p, /* نص المراجع */
    body.theme-ivory #contact .qr-code p, /* نص QR */
    body.theme-ivory #contact .contact-form-column h3, /* عنوان النموذج */
    body.theme-ivory #contact .form-group label, /* تسميات النموذج */
    body.theme-ivory #contact .form-status /* حالة النموذج */
    { color: var(--heading-color); } /* تعديل لون النص للثيم الفاتح */

    body.theme-ivory #contact .contact-info-item { background: rgba(0, 51, 102, 0.03); border: 1px solid rgba(0, 51, 102, 0.1); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);}
    body.theme-ivory #contact .contact-info-item:hover { background: rgba(0, 51, 102, 0.06); border-color: var(--accent-color); }
    body.theme-ivory #contact .contact-details h3::after,
    body.theme-ivory #contact .contact-social-column h3::after,
    body.theme-ivory #contact .contact-form-column h3::after { background-color: var(--accent-color);} /* تأكيد لون الخط السفلي للعنوان */
    body.theme-ivory #contact .contact-details h3,
    body.theme-ivory #contact .contact-social-column h3,
    body.theme-ivory #contact .contact-form-column h3 { border-bottom-color: rgba(0, 51, 102, 0.1); }
    body.theme-ivory #contact .social-links a { background: rgba(0, 51, 102, 0.04); border: 1px solid rgba(0, 51, 102, 0.1); color: var(--secondary-color); box-shadow: none; }
    body.theme-ivory #contact .social-links a:hover { background: var(--secondary-color); border-color: var(--secondary-color); color: #fff; box-shadow: 0 8px 15px color-mix(in srgb, var(--secondary-color) 30%, transparent); }
    body.theme-ivory #contact .contact-references p { color: var(--text-color); background: rgba(0, 51, 102, 0.03); border: 1px solid rgba(0, 51, 102, 0.1); }
    body.theme-ivory #contact .qr-code p { color: var(--text-muted); }
    body.theme-ivory #contact .form-group label { color: var(--text-muted); }
    body.theme-ivory #contact .form-group input[type="text"],
    body.theme-ivory #contact .form-group input[type="tel"],
    body.theme-ivory #contact .form-group textarea { background-color: rgba(0, 51, 102, 0.03); border-color: rgba(0, 51, 102, 0.15); color: var(--text-color); box-shadow: inset 0 1px 3px rgba(0, 51, 102, 0.05); }
    body.theme-ivory #contact .form-group input[type="text"]::placeholder,
    body.theme-ivory #contact .form-group input[type="tel"]::placeholder,
    body.theme-ivory #contact .form-group textarea::placeholder { color: #aaa; }
    body.theme-ivory #contact .form-group input[type="text"]:focus,
    body.theme-ivory #contact .form-group input[type="tel"]:focus,
    body.theme-ivory #contact .form-group textarea:focus { background-color: rgba(0, 51, 102, 0.05); border-color: var(--accent-color); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent), inset 0 1px 3px rgba(0, 51, 102, 0.05); }
    body.theme-ivory #contact .contact-submit-btn { color: #fff; /* ضمان لون نص أبيض للزر في الثيم الفاتح */ }
    body.theme-ivory .form-status.success { color: #10B981; }
    body.theme-ivory .form-status.error { color: #EF4444; }

    body.theme-emerald #contact {
        --contact-bg-grad-1: #1D3522;
        --contact-bg-grad-2: color-mix(in srgb, #2A4B30 70%, black 30%);
        --contact-bg-grad-3: #4A6D43;
    }
    body.theme-crimson #contact {
        --contact-bg-grad-1: #1A1A1A;
        --contact-bg-grad-2: #282828;
        --contact-bg-grad-3: #424242;
    }
    /* ... أضف تعديلات ألوان للخلفية ::before لكل ثيم إذا أردت ... */


    #contact .container {
        position: relative;
        z-index: 1;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 60px 50px;
        align-items: start;
    }

    /* Section Title */
    #contact h2.section-title {
        color: #fff; /* لون أبيض للعنوان على الخلفيات الداكنة */
        margin-bottom: 1.5rem;
        text-align: left; /* محاذاة لليسار افتراضي (LTR) */
        grid-column: 1 / -1;
        font-size: 2.5rem;
        font-weight: 700;
        letter-spacing: -1px;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    body.theme-ivory #contact h2.section-title { color: var(--heading-color); text-shadow: none;}
    html[dir="rtl"] #contact h2.section-title { text-align: right; letter-spacing: 0; } /* محاذاة لليمين في RTL */

    /* Underline for Section Title */
    #contact h2.section-title::after {
        content: '';
        display: block;
        background: var(--accent-color);
        width: 90px;
        height: 5px;
        border-radius: 2.5px;
        /* الهامش الافتراضي للمحاذاة لليسار في LTR */
        margin: 20px 0 60px 0;
        transition: margin 0.4s ease; /* انتقال للهامش */
    }
    /* تعديل الهامش للمحاذاة لليمين في RTL */
    html[dir="rtl"] #contact h2.section-title::after {
        margin-right: 0;
        margin-left: auto; /* دفعه لليمين */
    }

    /* Subheadings */
    .contact-details h3, .contact-social-column h3, .contact-form-column h3 {
        color: var(--accent-color);
        margin-bottom: 30px;
        font-size: 1.6rem;
        font-weight: 600;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(255,255,255,0.15); /* خط سفلي باهت للخلفيات الداكنة */
        position: relative;
    }
    body.theme-ivory #contact .contact-details h3,
    body.theme-ivory #contact .contact-social-column h3,
    body.theme-ivory #contact .contact-form-column h3 { border-bottom-color: rgba(0, 51, 102, 0.1); } /* تعديل للثيم الفاتح */

    /* Underline Accent for Subheadings */
    .contact-details h3::after, .contact-social-column h3::after, .contact-form-column h3::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0; /* محاذاة لليسار افتراضي (LTR) */
        width: 50px;
        height: 2px;
        background-color: var(--accent-color);
    }
    html[dir="rtl"] .contact-details h3::after,
    html[dir="rtl"] .contact-social-column h3::after,
    html[dir="rtl"] .contact-form-column h3::after {
        left: auto;
        right: 0; /* محاذاة لليمين في RTL */
    }


    /* Contact Info Items (Glassmorphism) */
    .contact-info-item {
        display: flex; align-items: center; gap: 20px; margin-bottom: 25px;
        background: rgba(255, 255, 255, 0.07); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
        padding: 20px 25px; border-radius: 10px;
        transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    body.theme-ivory #contact .contact-info-item { /* تعديل للثيم الفاتح */
        background: rgba(255, 255, 255, 0.6); border: 1px solid rgba(0, 51, 102, 0.15);
        box-shadow: 0 8px 32px 0 rgba(0, 51, 102, 0.1); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
    }
    .contact-info-item:hover {
        background: rgba(255, 255, 255, 0.12); border: 1px solid rgba(255, 255, 255, 0.2);
        transform: scale(1.03);
    }
    body.theme-ivory #contact .contact-info-item:hover { background: rgba(255, 255, 255, 0.8); border-color: var(--accent-color); }

    .contact-info-item i {
        color: var(--accent-color); font-size: 1.9rem; width: 35px; text-align: center;
        flex-shrink: 0; filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));
        transition: color 0.3s ease, transform 0.3s ease;
    }
    .contact-info-item:hover i { color: color-mix(in srgb, var(--accent-color) 85%, white 15%); transform: scale(1.1); }
    .contact-info-item .info-text { font-size: 1rem; line-height: 1.6; color: #f0f0f5; }
    body.theme-ivory #contact .contact-info-item .info-text { color: var(--text-color); }
    .contact-info-item .info-text span { display: block; }
    .contact-info-item .info-text a { color: #fff; text-decoration: none; font-weight: 500; position: relative; transition: color 0.3s; }
    body.theme-ivory #contact .contact-info-item .info-text a { color: var(--secondary-color); }
    .contact-info-item .info-text a::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 1px; background-color: var(--accent-color); transition: width 0.3s ease; }
    .contact-info-item .info-text a:hover { color: var(--accent-color); }
    .contact-info-item .info-text a:hover::after { width: 100%; }

    /* Contact Form Styles */
    .contact-form-column {} /* Container for form and other items */

    #contact-form { margin-top: 10px; }
    .form-group { margin-bottom: 25px; position: relative; }
    .form-group label { display: block; font-weight: 500; color: #ccc; margin-bottom: 8px; font-size: 0.9rem; opacity: 0.8; text-align: left; /* LTR Default */ }
    html[dir="rtl"] .form-group label { text-align: right; } /* RTL Alignment */
    body.theme-ivory #contact .form-group label { color: var(--text-muted); }

    .form-group input[type="text"],
    .form-group input[type="tel"],
    .form-group textarea {
        width: 100%; padding: 14px 18px; border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.15); background-color: rgba(255, 255, 255, 0.05);
        color: #fff; font-size: 1rem; font-family: var(--body-font);
        transition: border-color 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        text-align: left; /* LTR Default */
    }
    html[dir="rtl"] .form-group input[type="text"],
    html[dir="rtl"] .form-group input[type="tel"],
    html[dir="rtl"] .form-group textarea { text-align: right; } /* RTL Alignment */

    body.theme-ivory #contact .form-group input[type="text"],
    body.theme-ivory #contact .form-group input[type="tel"],
    body.theme-ivory #contact .form-group textarea { background-color: rgba(0, 51, 102, 0.03); border-color: rgba(0, 51, 102, 0.15); color: var(--text-color); box-shadow: inset 0 1px 3px rgba(0, 51, 102, 0.05); }

    .form-group input[type="text"]::placeholder,
    .form-group input[type="tel"]::placeholder,
    .form-group textarea::placeholder { color: #99a; opacity: 0.8; }
    body.theme-ivory #contact .form-group input[type="text"]::placeholder,
    body.theme-ivory #contact .form-group input[type="tel"]::placeholder,
    body.theme-ivory #contact .form-group textarea::placeholder { color: #aaa; }

    .form-group input[type="text"]:focus,
    .form-group input[type="tel"]:focus,
    .form-group textarea:focus {
        outline: none; border-color: var(--accent-color); background-color: rgba(255, 255, 255, 0.08);
        box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent), inset 0 1px 3px rgba(0,0,0,0.1);
    }
    body.theme-ivory #contact .form-group input[type="text"]:focus,
    body.theme-ivory #contact .form-group input[type="tel"]:focus,
    body.theme-ivory #contact .form-group textarea:focus { background-color: rgba(0, 51, 102, 0.05); border-color: var(--accent-color); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent), inset 0 1px 3px rgba(0, 51, 102, 0.05); }

    .form-group textarea { resize: vertical; min-height: 120px; }
    .form-submit-group { display: flex; align-items: center; gap: 15px; margin-top: 10px; justify-content: flex-start; /* LTR Default */}
    html[dir="rtl"] .form-submit-group { justify-content: flex-end; } /* RTL Alignment */

    .contact-submit-btn {
        padding: 14px 30px; font-size: 1rem; cursor: pointer; background: var(--accent-color);
        color: var(--heading-color); border: none; border-radius: 50px; font-weight: 600;
        box-shadow: 0 5px 15px color-mix(in srgb, var(--accent-color) 35%, transparent);
        transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
    }
    body.theme-ivory #contact .contact-submit-btn { color: #fff; }

    .contact-submit-btn:hover { background-color: color-mix(in srgb, var(--accent-color) 85%, black 15%); transform: translateY(-3px) scale(1.03); box-shadow: 0 8px 20px color-mix(in srgb, var(--accent-color) 45%, transparent); }
    .contact-submit-btn.loading { cursor: wait; opacity: 0.7; }
    .contact-submit-btn.loading::after { content: '...'; display: inline-block; margin-left: 5px; animation: loadingDots 1s infinite steps(3, end); }
    html[dir="rtl"] .contact-submit-btn.loading::after { margin-left: 0; margin-right: 5px; }
    @keyframes loadingDots { 0%, 20% { opacity: 0; } 40% { opacity: 1; } }

    .form-status { font-size: 0.9rem; font-weight: 500; opacity: 0; transition: opacity 0.3s ease; }
    .form-status.success { color: #34d399; opacity: 1; }
    .form-status.error { color: #f87171; opacity: 1; }
    body.theme-ivory .form-status.success { color: #10B981; }
    body.theme-ivory .form-status.error { color: #EF4444; }

    /* Social Links Section inside form column */
    .contact-social-links {} /* Container */
    .social-links { display: flex; flex-wrap: wrap; gap: 18px; margin-bottom: 40px; }
    .social-links a {
        color: rgba(255, 255, 255, 0.8); font-size: 1.7rem; display: inline-flex;
        justify-content: center; align-items: center; width: 50px; height: 50px;
        border-radius: 50%; background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: inset 0 0 10px rgba(255,255,255,0.05);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    body.theme-ivory #contact .social-links a { color: var(--secondary-color); background: rgba(0, 51, 102, 0.05); border: 1px solid rgba(0, 51, 102, 0.15); box-shadow: none; }
    .social-links a:hover { color: #fff; background: var(--secondary-color); border-color: var(--secondary-color); transform: translateY(-6px) scale(1.1); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
    body.theme-ivory #contact .social-links a:hover { background: var(--secondary-color); border-color: var(--secondary-color); color: #fff; box-shadow: 0 8px 15px color-mix(in srgb, var(--secondary-color) 30%, transparent); }

    /* QR Code Section inside form column */
    .contact-qr {} /* Container */
    .qr-code { text-align: center; }
    .qr-code img { max-width: 170px; border: 7px solid var(--accent-color); padding: 8px; background: #fff; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
    .qr-code p { font-size: 0.95rem; color: #bbb; }
    body.theme-ivory #contact .qr-code p { color: var(--text-muted); }


    /* References Section (if moved to details column) */
    .contact-references {} /* Container */
    .contact-references p {
        font-size: 1rem; color: #e0e0e0; line-height: 1.8; background: rgba(255,255,255,0.05);
        padding: 15px 20px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);
        text-align: left; /* LTR Default */
    }
    html[dir="rtl"] .contact-references p { text-align: right; } /* RTL Alignment */
    body.theme-ivory #contact .contact-references p { color: var(--text-color); background: rgba(0, 51, 102, 0.03); border: 1px solid rgba(0, 51, 102, 0.1); }


    /* Responsive Adjustments */
    @media (max-width: 992px) { #contact .container { grid-template-columns: 1fr; gap: 50px; } }
    @media (max-width: 768px) {
        #contact { padding: 100px 0 70px 0; }
        #contact h2.section-title { font-size: 2.2rem; text-align: center; }
        #contact h2.section-title::after { margin-left: auto; margin-right: auto; }
        .contact-details h3, .contact-social-column h3, .contact-form-column h3 { text-align: center; }
        .contact-details h3::after, .contact-social-column h3::after, .contact-form-column h3::after { left: 50%; transform: translateX(-50%); }
        html[dir="rtl"] .contact-details h3::after, html[dir="rtl"] .contact-social-column h3::after, html[dir="rtl"] .contact-form-column h3::after { left: 50%; right: auto; } /* Corrected RTL for center */
        .social-links { justify-content: center; }
        .contact-qr, .contact-references, .contact-social-links { margin-top: 40px; } /* Add consistent spacing */
        .form-submit-group { justify-content: center; } /* Center button on small screens */
    }
    @media (max-width: 576px) {
        #contact { padding: 80px 0 50px 0; }
        .contact-info-item { flex-direction: column; text-align: center; gap: 12px; padding: 18px; }
        .contact-info-item i { font-size: 1.8rem; margin-bottom: 8px; }
        .contact-info-item .info-text { font-size: 0.95rem; }
        .social-links a { width: 48px; height: 48px; font-size: 1.5rem; }
        .qr-code img { max-width: 140px; }
    }



    /* ---=== Contact Section Enhancements ===--- */
    /* ... (الأنماط العامة للقسم والخلفية والحاوية والعنوان الرئيسي) ... */

    /* --- Subheadings (يشمل الآن contactSocialTitle) --- */
    .contact-details h3,
    .contact-social-column h3, /* سيطبق على كل العناوين في العمود الثاني */
    .contact-form-column h3 { /* التأكد من تضمينه إذا كان في عمود النموذج */
        color: var(--accent-color);
        margin-bottom: 30px;
        font-size: 1.6rem;
        font-weight: 600;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(255,255,255,0.15);
        position: relative;
        text-align: left; /* محاذاة لليسار افتراضي (LTR) */
        /* إضافة أيقونة اختيارية بجانب العنوان */
        /* display: flex; align-items: center; gap: 10px; */
    }
    /* Optional icon styling */
    /* .contact-details h3 i, .contact-social-column h3 i { font-size: 0.9em; opacity: 0.8; } */

    body.theme-ivory #contact .contact-details h3,
    body.theme-ivory #contact .contact-social-column h3,
    body.theme-ivory #contact .contact-form-column h3 {
        border-bottom-color: rgba(0, 51, 102, 0.1);
        color: var(--secondary-color); /* تعديل لون العنوان في الثيم الفاتح */
    }
    body.theme-ivory #contact .contact-details h3 i,
    body.theme-ivory #contact .contact-social-column h3 i { color: var(--secondary-color); }


    /* Underline Accent for Subheadings */
    .contact-details h3::after,
    .contact-social-column h3::after,
    .contact-form-column h3::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0; /* محاذاة لليسار افتراضي (LTR) */
        width: 50px;
        height: 2px;
        background-color: var(--accent-color);
        transition: background-color 0.3s ease; /* إضافة انتقال */
    }
    /* Hover effect on subheading underline */
    /* .contact-details h3:hover::after,
    .contact-social-column h3:hover::after,
    .contact-form-column h3:hover::after {
        background-color: color-mix(in srgb, var(--accent-color) 80%, white 20%);
    } */


    /* --- RTL Alignment for Subheadings and Underlines --- */
    html[dir="rtl"] .contact-details h3,
    html[dir="rtl"] .contact-social-column h3,
    html[dir="rtl"] .contact-form-column h3 {
        text-align: right; /* محاذاة لليمين في RTL */
    }
    html[dir="rtl"] .contact-details h3::after,
    html[dir="rtl"] .contact-social-column h3::after,
    html[dir="rtl"] .contact-form-column h3::after {
        left: auto;
        right: 0; /* محاذاة لليمين في RTL */
    }
    /* Optional icon styling for RTL */
    /* html[dir="rtl"] .contact-details h3 i,
    html[dir="rtl"] .contact-social-column h3 i { order: 1; margin-left: 10px; margin-right: 0; } */


    /* Social Links Section Specific Styles */
    .contact-social-links {
        margin-bottom: 40px; /* مسافة قبل العنصر التالي (مثل QR) */
    }

    .social-links {
        display: flex;
        flex-wrap: wrap;
        gap: 18px;
        margin-bottom: 40px;
        /* إزالة margin-bottom من هنا إذا كان .contact-social-links موجودًا */
        /* justify-content: flex-start; /* محاذاة لليسار افتراضي LTR */
    }
    /* لا حاجة لتحديد محاذاة هنا، ستتبع محاذاة النص للعنصر الأب h3 */
    /* html[dir="rtl"] .social-links { justify-content: flex-end; } */


    /* Individual Social Link (The Circle) */
    .social-links a {
        color: rgba(255, 255, 255, 0.8);
        font-size: 1.7rem;
        /* --- هذه الخصائص هي المسؤولة عن التوسيط --- */
        display: inline-flex;  /* استخدم flex */
        justify-content: center; /* توسيط أفقي للمحتوى (الأيقونة) */
        align-items: center;   /* توسيط رأسي للمحتوى (الأيقونة) */
        /* --- نهاية خصائص التوسيط --- */
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: inset 0 0 10px rgba(255,255,255,0.05);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        text-decoration: none; /* تأكد من عدم وجود خط سفلي */
    }
    /* Styles for light theme */
    body.theme-ivory #contact .social-links a {
        color: var(--secondary-color);
        background: rgba(0, 51, 102, 0.05);
        border: 1px solid rgba(0, 51, 102, 0.15);
        box-shadow: none;
    }
    /* Hover styles */
    .social-links a:hover {
        color: #fff;
        background: var(--secondary-color);
        border-color: var(--secondary-color);
        transform: translateY(-6px) scale(1.1);
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    body.theme-ivory #contact .social-links a:hover {
        background: var(--secondary-color);
        border-color: var(--secondary-color);
        color: #fff;
        box-shadow: 0 8px 15px color-mix(in srgb, var(--secondary-color) 30%, transparent);
    }

    /* --- Responsive Adjustments --- */
    @media (max-width: 768px) {
        /* ... (أنماط الاستجابة الأخرى للقسم) ... */

        /* توسيط العناوين الفرعية ومحتواها */
        .contact-details h3,
        .contact-social-column h3,
        .contact-form-column h3 {
            text-align: center;
        }
        .contact-details h3::after,
        .contact-social-column h3::after,
        .contact-form-column h3::after {
            left: 50%;
            transform: translateX(-50%);
            right: auto; /* تأكد من إلغاء right لـ RTL */
        }
        /* لا حاجة لقاعدة RTL خاصة هنا لأن التوسيط يعمل بنفس الطريقة */

        .social-links {
            justify-content: center; /* توسيط الأيقونات */
        }
    }

    /* ... (بقية أنماط قسم contact) ... */




        /* ---=== Footer Section Enhancements ===--- */

    footer {
        /* خلفية داكنة وغنية */
        background-color: color-mix(in srgb, var(--primary-color) 90%, black 10%);
        /* يمكنك استخدام تدرج إذا أردت */
        /* background: linear-gradient(to top, #051a2e, #0a2a43); */
        color: var(--text-muted); /* لون نص أساسي باهت */
        padding: 60px 0 0 0; /* حشو علوي فقط مبدئيًا، السفلي يأتي من القسم الأخير */
        position: relative;
        overflow: hidden;
        border-top: 1px solid rgba(255, 255, 255, 0.08); /* خط علوي خفيف */
        margin-top: -1px; /* لمنع ظهور فجوة بسبب الحد العلوي */
    }

    /* تأثير إضاءة علوية خافتة */
    footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 150px; /* ارتفاع منطقة الإضاءة */
        background: linear-gradient(to bottom, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%);
        opacity: 0.5;
        z-index: 0;
        pointer-events: none; /* تجاهل التفاعل مع هذا العنصر */
    }
    /* تعديل للثيم الفاتح */
    body.theme-ivory footer {
        background-color: var(--dark-color); /* استخدام لون داكن للفوتر حتى في الثيم الفاتح */
        color: #a0a0a0;
        border-top-color: rgba(0,0,0,0.1);
    }
    body.theme-ivory footer::before { display: none; } /* إخفاء الإضاءة العلوية في الثيم الفاتح */


    footer .container {
        position: relative; /* فوق ::before */
        z-index: 1;
        text-align: center; /* توسيط المحتوى بشكل عام */
    }

    /* القسم العلوي (اختياري - روابط سريعة أو شعار) */
    .footer-top {
        margin-bottom: 40px;
        padding-bottom: 30px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
    body.theme-ivory .footer-top { border-bottom-color: rgba(0,0,0,0.1); }

    .footer-top .footer-logo a {
        display: inline-block;
        font-size: 1.8rem;
        font-weight: 700;
        color: #fff; /* لون أبيض للشعار */
        text-decoration: none;
        margin-bottom: 15px; /* مسافة تحت الشعار */
    }
    body.theme-ivory .footer-top .footer-logo a { color: var(--accent-color); } /* لون مختلف للشعار في الثيم الفاتح */

    .footer-quick-links ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px 25px; /* مسافات بين الروابط */
    }
    .footer-quick-links a {
        color: var(--text-muted);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        transition: color 0.3s ease;
    }
    .footer-quick-links a:hover {
        color: var(--accent-color);
    }
    body.theme-ivory .footer-quick-links a { color: #777; }
    body.theme-ivory .footer-quick-links a:hover { color: var(--accent-color); }


    /* القسم الأوسط (روابط التواصل الاجتماعي) */
    .footer-social {
        margin-bottom: 40px;
    }
    .footer-social h4 { /* عنوان بسيط */
        font-size: 1.1rem;
        color: #ccc;
        margin-bottom: 20px;
        font-weight: 500;
        letter-spacing: 0.5px;
    }
    body.theme-ivory .footer-social h4 { color: var(--text-muted); }

    .footer-social .social-links { /* إعادة استخدام نفس الكلاس مع تعديلات بسيطة */
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px; /* مسافة أكبر قليلاً */
        margin-bottom: 0; /* إزالة الهامش السفلي لأنه آخر عنصر في هذا القسم */
    }
    .footer-social .social-links a {
        color: #bbb; /* لون أفتح قليلاً من النص العادي */
        font-size: 1.6rem; /* حجم مناسب للفوتر */
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 45px; /* أصغر قليلاً */
        height: 45px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: none; /* إزالة الظل الداخلي */
        transition: all 0.3s ease; /* انتقال أبسط */
    }
    body.theme-ivory .footer-social .social-links a {
        color: #888;
        background: rgba(0, 0, 0, 0.04);
        border-color: rgba(0, 0, 0, 0.1);
    }

    .footer-social .social-links a:hover {
        color: var(--bg-color); /* لون الخلفية الأساسي للقسم */
        background: var(--accent-color); /* استخدام لون التمييز للخلفية */
        border-color: var(--accent-color);
        transform: translateY(-4px); /* رفع بسيط */
        box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }
    body.theme-ivory .footer-social .social-links a:hover {
        color: #fff;
        background: var(--accent-color);
        border-color: var(--accent-color);
        box-shadow: 0 6px 12px color-mix(in srgb, var(--accent-color) 30%, transparent);
    }


    /* القسم السفلي (حقوق النشر) */
    .footer-bottom {
        background-color: rgba(0, 0, 0, 0.2); /* خلفية أغمق قليلاً للتمييز */
        padding: 25px 0;
        margin-top: 40px; /* مسافة عن القسم الأوسط */
    }
    body.theme-ivory .footer-bottom { background-color: rgba(0, 0, 0, 0.05); }

    .footer-bottom p {
        margin: 0;
        font-size: 0.9rem;
        color: #999; /* لون باهت جدًا */
        line-height: 1.6;
    }
    body.theme-ivory .footer-bottom p { color: #777; }

    .footer-bottom p strong { /* لاسمك أو أي تمييز */
        color: #ccc;
        font-weight: 500;
    }
    body.theme-ivory .footer-bottom p strong { color: #555; }

    .footer-bottom p i { /* أيقونة القلب أو غيرها */
        color: var(--accent-color);
        margin: 0 3px;
        font-size: 0.85em; /* أصغر قليلاً */
    }


    /* زر العودة للأعلى (إذا لم يكن له نمط خاص) */
    /* يمكن تعديل موقعه ليتناسب مع الفوتر */
    #back-to-top {
        bottom: 90px; /* رفعه قليلاً فوق قسم الحقوق (إذا كان الفوتر طويلاً) */
        /* أو: bottom: 30px; إذا كان الفوتر قصيرًا */
    }
    /* تعديل RTL لزر العودة للأعلى إذا لم يكن موجودًا */
    html[dir="rtl"] #back-to-top {
        right: auto;
        left: 25px; /* أو القيمة المناسبة */
    }



    /* ---=== Settings Panel Enhancements ===--- */
    /* ... (الأنماط السابقة للوحة الإعدادات) ... */

    /* Font Size Controls Styles */
    .fontsize-options {
        display: flex;
        align-items: center; /* محاذاة رأسية */
        gap: 8px; /* مسافة بين الأزرار */
    }

    .fontsize-options button {
        /* استخدام نفس نمط الأزرار الأخرى أو تخصيصه */
        display: inline-flex;
        justify-content: center;
        align-items: center;
        padding: 0; /* إزالة الحشو الداخلي */
        width: 35px; /* عرض ثابت */
        height: 35px; /* ارتفاع ثابت */
        margin: 0; /* إزالة الهوامش الافتراضية */
        border: 1px solid var(--border-color);
        background-color: var(--bg-color);
        color: var(--text-color);
        border-radius: 50%; /* جعل الأزرار دائرية */
        cursor: pointer;
        font-size: 0.9rem; /* حجم الأيقونة */
        transition: var(--theme-transition), background-color 0.2s, border-color 0.2s, box-shadow 0.2s, transform 0.2s;
    }
    .fontsize-options button:hover {
        border-color: var(--secondary-color);
        background-color: color-mix(in srgb, var(--bg-color) 80%, var(--secondary-color) 20%);
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        transform: scale(1.05); /* تكبير بسيط عند المرور */
    }
    .fontsize-options button:active {
        transform: scale(0.95); /* تصغير بسيط عند النقر */
    }

    /* زر إعادة التعيين يمكن أن يكون له شكل مختلف قليلاً */
    #reset-fontsize {
        background-color: color-mix(in srgb, var(--accent-color) 15%, transparent);
        border-color: var(--accent-color);
    }

    /* عرض حجم الخط الحالي */
    .fontsize-display {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--secondary-color);
        background-color: color-mix(in srgb, var(--secondary-color) 10%, transparent);
        padding: 5px 10px;
        border-radius: 15px;
        min-width: 50px; /* عرض أدنى */
        text-align: center;
        margin: 0 5px; /* هوامش حول العرض */
    }








    </style>
</head>
<body>


        <!-- Preloader -->
        <div id="preloader">
            <div class="preloader-content">
                <div class="preloader-logo" data-lang-key="logoText">MH</div>
                <!-- شريط التحميل -->
                <div class="progress-bar-container">
                    <div class="progress-bar-fill-loader"></div>
                </div>
                <div class="loading-text" data-lang-key="preloaderLoading">Loading...</div>
            </div>
        </div>
    
        <!-- Settings Toggle Button -->
        <button id="settings-toggle" aria-label="Settings">
            <i class="fas fa-cog"></i>
            <i class="fas fa-times"></i>
        </button>
    
        <!-- ... باقي محتوى الـ body ... -->
    



    <!-- Settings Panel (Initially Hidden) -->
    <!-- Settings Panel -->
    <aside class="settings-panel" id="settings-panel">
        <button id="settings-close" aria-label="Close Settings">×</button>
        <h4>Settings</h4>

        <!-- Language Options -->
        <div class="setting-group">
            <label for="language-options" data-lang-key="settingsLanguage">Language</label>
            <div class="options" id="language-options">
                <button data-lang="en" class="lang-btn active">English</button>
                <button data-lang="ar" class="lang-btn">العربية</button>
            </div>
        </div>

        <!-- Theme Options -->
        <div class="setting-group">
            <label for="theme-options" data-lang-key="settingsTheme">Theme</label>
            <div class="options" id="theme-options">
                <button class="theme-option" data-theme="ivory" title="Classic Ivory"></button>
                <button class="theme-option" data-theme="sapphire" title="Sapphire Night"></button>
                <button class="theme-option" data-theme="emerald" title="Emerald Forest"></button>
                <button class="theme-option" data-theme="crimson" title="Crimson Peak"></button>
            </div>
        </div>

        <!-- **** START: Font Size Controls **** -->
        <div class="setting-group">
            <label for="fontsize-options" data-lang-key="settingsFontSize">Font Size</label>
            <div class="options fontsize-options" id="fontsize-options">
                <button id="decrease-fontsize" aria-label="Decrease Font Size" title="Decrease Font Size"><i class="fas fa-minus"></i></button>
                <button id="reset-fontsize" aria-label="Reset Font Size" title="Reset Font Size"><i class="fas fa-sync-alt"></i></button>
                <button id="increase-fontsize" aria-label="Increase Font Size" title="Increase Font Size"><i class="fas fa-plus"></i></button>
                <span id="current-fontsize-display" class="fontsize-display">100%</span> <!-- لعرض الحجم الحالي -->
            </div>
        </div>
        <!-- **** END: Font Size Controls **** -->

    </aside>

    <!-- Header -->
    <!-- Header -->
    <header id="main-header">
        <div class="container">
        <!-- Optional: Replace text logo with an image -->
        <div class="logo">
            <a href="#hero" data-lang-key="logoText">
                <!-- <img src="path/to/your-logo.png" alt="Mohamed Hagag Logo"> -->
                    Mohamed Hagag
                </a>
            </div>

        <nav id="main-nav">
            <!-- This UL will be hidden on mobile and duplicated/moved into the mobile nav -->
            <ul class="desktop-nav">
                <li><a href="#hero" data-lang-key="navHome">Home</a></li>
                <li><a href="#about" data-lang-key="navAbout">About</a></li>
                <li><a href="#skills" data-lang-key="navSkills">Skills</a></li>
                <li><a href="#experience" data-lang-key="navExperience">Experience</a></li>
                <li><a href="#education" data-lang-key="navEducation">Education</a></li>
                <li><a href="#projects" data-lang-key="navProjects">Projects</a></li>
                <li><a href="#contact" data-lang-key="navContact">Contact</a></li>
            </ul>
        </nav>

        <!-- Mobile Nav Toggle Button -->
        <button id="mobile-nav-toggle" aria-label="Toggle Navigation">
            <i class="fas fa-bars"></i>
        </button>
    </div>
    </header>

        <!-- Mobile Navigation Menu (Off-Canvas) -->
        <div id="mobile-nav-container">
            <!-- زر الإغلاق يبقى كما هو -->
            <button id="mobile-nav-close" aria-label="Close Navigation">×</button>

            <!-- (اختياري) رأس القائمة -->
            <div id="mobile-nav-header">
                <div class="logo-mobile">
                    <a href="#hero" data-lang-key="logoText">Mohamed Hagag</a>
                    <!-- أو <h5>Menu</h5> -->
                </div>
            </div>

            <!-- حاوية الروابط الرئيسية -->
            <nav id="mobile-nav">
                <!-- الروابط سيتم إنشاؤها بواسطة JS هنا داخل <ul> -->
                <!-- مثال على شكل الرابط مع أيقونة (سيتم إنشاؤه بواسطة JS): -->
                <!-- <ul>
                    <li><a href="#hero"><i class="fas fa-home"></i> <span data-lang-key="navHome">Home</span></a></li>
                    ...
                </ul> -->
            </nav>

            <!-- (اختياري) فوتر القائمة -->
            <div id="mobile-nav-footer">
                <div class="social-links-mobile">
                    <a href="https://www.linkedin.com/in/mohamed-ahmed-807178a2/" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.facebook.com/moh.gogo11" target="_blank" title="Facebook"><i class="fab fa-facebook-square"></i></a>
                    <a href="https://twitter.com/1__24M" target="_blank" title="X (Twitter)"><i class="fab fa-twitter-square"></i></a>
                    <a href="https://www.behance.net/mohamed183" target="_blank" title="Behance"><i class="fab fa-behance-square"></i></a>
                </div>
                <div class="contact-info-mobile">
                    <p><i class="fas fa-envelope"></i> <span data-lang-key="heroEmail">m.hagag.lala@gmail.com</span></p>
                    <!-- <p><i class="fas fa-phone"></i> <span data-lang-key="heroPhone">+20 ...</span></p> -->
                </div>
            </div>

        </div>
        <div id="mobile-nav-overlay"></div> <!-- التعتيم يبقى كما هو -->


    <main>
        <!-- Hero Section -->
        <section id="hero">
            <!-- التراكب ::before سيتم إنشاؤه بواسطة CSS -->
            <div class="container">
                <div class="hero-content">
                    <!-- إضافة data-aos وتأخيرات مختلفة -->
                    <img src="https://media.licdn.com/dms/image/v2/D4D03AQFzvXGf5oj6Vw/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1725109128141?e=1749686400&v=beta&t=nEFEHn0Mf06jxbCpFqmyLhV3Smd46c_0tFmQnTulbbg" alt="Mohamed Hagag Profile Picture" class="profile-pic" data-aos="zoom-in" data-aos-duration="800"> <!-- ** REPLACE IMAGE ** -->

                    <h1 data-lang-key="heroTitle" data-aos="fade-up" data-aos-delay="200">Mohamed Hagag</h1>

                    <p class="subtitle" data-aos="fade-up" data-aos-delay="400">
                        <span id="typed-subtitle"></span><!-- Typed.js Target -->
                    </p>

                    <div class="contact-info-hero" data-aos="fade-up" data-aos-delay="600">
                        <p><i class="fas fa-map-marker-alt"></i> <span data-lang-key="heroLocation">...</span></p>
                        <p><i class="fas fa-phone"></i> <span data-lang-key="heroPhone">...</span></p>
                        <p><i class="fas fa-envelope"></i> <span data-lang-key="heroEmail">...</span></p>
                    </div>

                    <a href="#contact" class="btn" data-lang-key="heroButton" data-aos="fade-up" data-aos-delay="800" data-aos-anchor-placement="top-bottom">Get In Touch</a>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about">
            <!-- <i class="fas fa-drafting-compass background-icon"></i> A different way for background icon -->
            <div class="container">
                <div class="about-text" data-aos="fade-right" data-aos-duration="800">
                    <h2 class="section-title" data-lang-key="aboutTitle">About Me</h2>
                    <!-- مثال لإضافة اقتباس -->
                    <!-- <blockquote class="blockquote text-center fst-italic fs-5 mb-4">
                        "The best way to predict the future is to design it."
                    </blockquote> -->
                    <p data-lang-key="aboutP1">
                        I am a dedicated <strong>Civil Structural Engineer</strong>, graduating in 2022 with an <span class="skill-highlight">excellent grade</span> in my reinforced concrete structures design project. This project encompassed both rigorous manual calculations and proficiency in advanced engineering software such as <strong>SAP2000, ETABS, SAFE, SCI Column, Excel</strong>, and <strong class="skill-highlight">Revit (Structural & Architectural)</strong>.
                    </p>
                    <p data-lang-key="aboutP2">
                        My practical experience includes over a year as a <strong>Site Engineer</strong>, supervising construction tasks, finishing works, and project execution. Additionally, I worked as a <strong>Technical Office Engineer</strong> for more than a year in Sharm El-Sheikh, handling tasks like <strong>quantity surveying, shop drawings</strong>, and preparing invoices.
                    </p>
                    <p data-lang-key="aboutP3">
                        Beyond engineering, I bring over <strong>6 years</strong> of versatile experience in <strong>graphic design</strong> and <strong>marketing</strong>, mastering tools like <strong>Photoshop, Illustrator</strong>, and <strong>CorelDRAW</strong>. My expertise extends to <span class="skill-highlight">SEO, content creation, video editing</span>, and social media management.
                    </p>
                </div>
                <aside class="about-details" data-aos="fade-left" data-aos-delay="200" data-aos-duration="800">
                    <h4 data-lang-key="aboutQuickFacts">Quick Facts</h4>
                    <ul>
                        <li><i class="fas fa-user"></i> <span data-lang-key="aboutName">Name: Mohamed Hagag</span></li>
                        <li><i class="fas fa-briefcase"></i> <span data-lang-key="aboutRole">Role: Structural Engineer / BIM</span></li>
                        <li><i class="fas fa-graduation-cap"></i> <span data-lang-key="aboutGraduated">Graduated: 2022</span></li>
                        <li><i class="fas fa-envelope"></i> <span data-lang-key="aboutEmailAside">Email: <a href="mailto:m.hagag.lala@gmail.com">m.hagag.lala@gmail.com</a></span></li>
                        <li><i class="fas fa-map-marker-alt"></i> <span data-lang-key="aboutLocationAside">Location: El-Mahala El-Kubra, Egypt</span></li>
                        <li><i class="fas fa-globe"></i> <span data-lang-key="aboutLanguages">Languages: Arabic (Native), English (Very Good)</span></li>
                    </ul>

                    <!-- قسم منفصل للهوايات -->
                    <div class="hobbies-section">
                        <h4 data-lang-key="aboutHobbies">Hobbies</h4>
                        <ul>
                            <li><i class="fas fa-book-reader"></i> <span data-lang-key="hobbyLearning">Learning</span></li>
                            <li><i class="fas fa-pencil-alt"></i> <span data-lang-key="hobbyWriting">Writing</span></li>
                            <li><i class="fas fa-film"></i> <span data-lang-key="hobbyMovies">Watching Movies</span></li>
                            <!-- يمكن تغيير الأيقونات هنا لتكون أكثر تعبيرًا -->
                        </ul>
                    </div>
                </aside>
            </div>
        </section>

        <!-- Skills Section -->
        <!-- Skills Section -->
        <section id="skills">
            <div class="container">
                <h2 class="section-title" data-lang-key="skillsTitle">Skills & Proficiencies</h2>

                <div class="skills-grid-container">

                    <!-- Skill Card 1: Engineering Software -->
                    <div class="skill-card" data-aos="fade-up" data-aos-duration="600">
                        <div class="skill-icon"><i class="fas fa-drafting-compass"></i></div>
                        <h4 data-lang-key="skillsCatEngSoft">Engineering Software</h4>
                        <p class="skill-description" data-lang-key="skillsDescEngSoft">Proficiency in industry-standard structural analysis and modeling tools.</p>
                        <div class="progress-bars-container">
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillRevit">Revit (Struct/Arch)</span>
                                    <span>90%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="90"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillAutocad">AutoCAD</span>
                                    <span>85%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="85"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillCsi">ETABS/SAP2000/SAFE</span>
                                    <span>80%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="80"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Skill Card 2: BIM & Technical Office -->
                    <div class="skill-card" data-aos="fade-up" data-aos-delay="100" data-aos-duration="600">
                        <div class="skill-icon"><i class="fas fa-building"></i></div> <!-- أو fas fa-cubes -->
                        <h4 data-lang-key="skillsCatBim">BIM & Technical Office</h4>
                        <p class="skill-description" data-lang-key="skillsDescBim">Expertise in BIM workflows, coordination, and technical documentation.</p>
                        <div class="progress-bars-container">
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillBimMgmt">BIM Management</span>
                                    <span>85%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="85"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillQsBoq">Quantity Surveying / BOQ</span>
                                    <span>85%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="85"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillShopDraw">Shop Drawings</span>
                                    <span>90%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="90"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Skill Card 3: Design & Creative -->
                    <div class="skill-card" data-aos="fade-up" data-aos-delay="200" data-aos-duration="600">
                        <div class="skill-icon"><i class="fas fa-palette"></i></div>
                        <h4 data-lang-key="skillsCatCreative">Design & Creative Suite</h4>
                        <p class="skill-description" data-lang-key="skillsDescCreative">Skilled in graphic design software for visual communication and marketing.</p>
                        <div class="progress-bars-container">
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillPs">Adobe Photoshop</span>
                                    <span>95%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="95"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillAi">Adobe Illustrator</span>
                                    <span>90%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="90"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillCorel">CorelDRAW</span>
                                    <span>85%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="85"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Skill Card 4: Digital Marketing & Other -->
                    <div class="skill-card" data-aos="fade-up" data-aos-delay="300" data-aos-duration="600">
                        <div class="skill-icon"><i class="fas fa-chart-line"></i></div> <!-- أو fa-laptop-code -->
                        <h4 data-lang-key="skillsCatDigital">Digital & Management</h4>
                        <p class="skill-description" data-lang-key="skillsDescDigital">Experience in digital marketing, content, AI, and office productivity.</p>
                        <div class="progress-bars-container">
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillSeoMarket">SEO & Digital Marketing</span>
                                    <span>80%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="80"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillContentCreate">Content Creation</span>
                                    <span>85%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="85"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillAiUsage">Professional AI Usage</span>
                                    <span>80%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="80"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-info">
                                    <span data-lang-key="skillMsOffice">Microsoft Office</span>
                                    <span>95%</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-fill" data-progress="95"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- أضف المزيد من بطاقات المهارات حسب الحاجة -->

                </div> <!-- نهاية skills-grid-container -->

                <!-- قسم المهارات الإضافية -->
                <div class="additional-skills" data-aos="fade-up" data-aos-delay="400" data-aos-duration="600">
                    <h4 data-lang-key="skillsExploring"><i class="fas fa-lightbulb"></i> Exploring Next</h4>
                    <p data-lang-key="skillsExploringListParsed"> <!-- استخدم مفتاح جديد للغة إذا أردت تنسيق HTML -->
                        <span>Prokon</span> | <span>RAM</span> | <span>ANSYS</span> | <span>STAAD.Pro</span>
                    </p>
                </div>

            </div> <!-- نهاية container -->
        </section>

        <!-- Work Experience Section -->
        <section id="experience">
            <div class="container">
                <h2 class="section-title" data-lang-key="experienceTitle">Work Experience</h2>

                <div class="timeline-container">

                    <!-- Experience Item 1 (Right Side) -->
                    <div class="timeline-item timeline-right" data-aos="fade-left">
                        <div class="timeline-arrow"></div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 data-lang-key="exp1Title">Technical Office Engineer (BIM Manager)</h3>
                            <div class="timeline-meta">
                                <span><i class="fas fa-map-marker-alt"></i> <span data-lang-key="exp1Location">New Alamin</span></span>
                                <span><i class="fas fa-calendar-alt"></i> <span data-lang-key="exp1Duration">1.5 Years</span></span>
                            </div>
                            <ul>
                                <li data-lang-key="exp1Detail1">Conducted detailed quantity surveying and prepared BOQs, utilizing <strong>BIM-based takeoffs</strong> for enhanced accuracy.</li>
                                <li data-lang-key="exp1Detail2">Worked extensively with <strong>Building Information Modeling (BIM)</strong> to optimize project coordination.</li>
                                <li data-lang-key="exp1Detail3">Utilized <strong>4D & 5D BIM</strong> for scheduling and cost control.</li>
                                <li data-lang-key="exp1Detail4">Developed structural/architectural <strong>shop drawings</strong> using <strong>Revit</strong> and <strong>AutoCAD</strong>.</li>
                                <li data-lang-key="exp1Detail5">Managed project documentation (invoices, submittals, reports).</li>
                                <li data-lang-key="exp1Detail6">Coordinated with contractors & suppliers.</li>
                            </ul>
                            <!-- Optional: Accordion/Read More Button -->
                        </div>
                    </div>

                    <!-- Experience Item 2 (Left Side) -->
                    <div class="timeline-item timeline-left" data-aos="fade-right">
                        <div class="timeline-arrow"></div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 data-lang-key="exp2Title">Site Engineer</h3>
                            <div class="timeline-meta">
                                <span><i class="fas fa-map-marker-alt"></i> <span data-lang-key="exp2Location">New Alamin</span></span>
                                <span><i class="fas fa-calendar-alt"></i> <span data-lang-key="exp2Duration">1.5 Years</span></span>
                            </div>
                            <ul>
                                <li data-lang-key="exp2Detail1">Supervised on-site construction and <strong>finishing works</strong>, ensuring <strong>quality & safety</strong> compliance.</li>
                                <li data-lang-key="exp2Detail2">Monitored daily activities & resolved technical issues promptly.</li>
                                <li data-lang-key="exp2Detail3">Collaborated with stakeholders for workflow efficiency.</li>
                                <li data-lang-key="exp2Detail4">Oversaw material delivery & specification adherence.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Experience Item 3 (Right Side) -->
                    <div class="timeline-item timeline-right" data-aos="fade-left">
                        <div class="timeline-arrow"></div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 data-lang-key="exp3Title">Media Buyer & SMMA Manager</h3>
                            <div class="timeline-meta">
                                <span><i class="fas fa-globe"></i> <span data-lang-key="exp3Location">Remote/Various</span></span>
                                <span><i class="fas fa-calendar-alt"></i> <span data-lang-key="exp3Duration">2+ Years</span></span>
                            </div>
                            <ul>
                            <li data-lang-key="exp3Detail1">Planned and managed <strong>digital advertising</strong> campaigns (various platforms).</li>
                            <li data-lang-key="exp3Detail2">Handled advertising <strong>budgets</strong> effectively for targeted <strong>ROI</strong>.</li>
                            <li data-lang-key="exp3Detail3">Analyzed campaign performance & adjusted strategies.</li>
                            <li data-lang-key="exp3Detail4">Developed marketing strategies with clients.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Experience Item 4 (Left Side) -->
                    <div class="timeline-item timeline-left" data-aos="fade-right">
                        <div class="timeline-arrow"></div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 data-lang-key="exp4Title">Graphic Designer</h3>
                            <div class="timeline-meta">
                                <span><i class="fas fa-globe"></i> <span data-lang-key="exp4Location">Remote/Freelance</span></span>
                                <span><i class="fas fa-calendar-alt"></i> <span data-lang-key="exp4Duration">6+ Years (2017 - 2023)</span></span>
                            </div>
                            <ul>
                                <li data-lang-key="exp4Detail1">Designed creative materials using <strong>Photoshop, Illustrator, & CorelDRAW</strong>.</li>
                                <li data-lang-key="exp4Detail2">Executed branding (logos, brochures), social media visuals.</li>
                                <li data-lang-key="exp4Detail3">Collaborated with marketing teams on campaigns.</li>
                                <li data-lang-key="exp4Detail4">Managed design projects concept-to-delivery.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- أضف المزيد من عناصر الخبرة بالتناوب (يمين/يسار) -->

                </div> <!-- نهاية timeline-container -->
            </div> <!-- نهاية container -->
        </section>

        <!-- Education Section -->
        <!-- ============================ Education Section Start ============================ -->
        <section id="education">
            <div class="container">
                <!-- عنوان القسم -->
                <h2 class="section-title" data-lang-key="educationTitle">Educational Background</h2>

                <!-- حاوية بطاقة التعليم -->
                <div class="education-card-container">
                    <!-- بطاقة التعليم -->
                    <div class="education-item" data-aos="zoom-in-up" data-aos-duration="800">

                        <!-- رأس البطاقة: أيقونة، اسم الشهادة، الجامعة، السنة -->
                        <div class="education-header">
                            <div class="edu-icon"><i class="fas fa-university"></i></div>
                            <div>
                                <h3 data-lang-key="eduDegree">Bachelor's Degree in Civil Engineering</h3>
                                <p class="education-meta">
                                    <span data-lang-key="eduUniversity">Future academy in MANS, Mansoura</span> |
                                    <span data-lang-key="eduGradYearLabel">Graduated:</span> <span data-lang-key="eduGradYear">2022</span>
                                </p>
                            </div>
                        </div>

                        <!-- جسم البطاقة: التقديرات وتفاصيل المشروع -->
                        <div class="education-body">

                            <!-- قسم التقديرات -->
                            <div class="education-grades">
                                <ul>
                                    <li> <!-- التقدير العام -->
                                        <span data-lang-key="eduOverallGradeLabel">Overall Grade:</span>
                                        <strong data-lang-key="eduOverallGradeValue">Good</strong>
                                    </li>
                                    <li> <!-- تقدير السنة النهائية -->
                                        <span data-lang-key="eduFinalYearGradeLabel">Final Year Grade:</span>
                                        <strong data-lang-key="eduFinalYearGradeValue">Very Good</strong>
                                    </li>
                                </ul>
                            </div>

                            <!-- قسم مشروع التخرج -->
                            <div class="graduation-project">
                                <h4> <!-- عنوان المشروع -->
                                    <i class="fas fa-project-diagram"></i>
                                    <span data-lang-key="eduProjectTitleShort">Graduation Project</span>
                                </h4>
                                <ul>
                                    <li> <!-- الاسم الكامل للمشروع -->
                                        <span data-lang-key="eduProjectFullNameLabel">Project Title:</span>
                                        <span data-lang-key="eduProjectFullNameDesc">Design of Reinforced Concrete Structures</span>
                                    </li>
                                    <li> <!-- تقدير المشروع -->
                                        <span data-lang-key="eduProjectGradeLabel">Project Grade:</span>
                                        <strong data-lang-key="eduProjectGradeValue">Excellent</strong>
                                    </li>
                                    <li> <!-- المنهجية -->
                                        <span data-lang-key="eduProjectMethodLabel">Methodology:</span>
                                        <em data-lang-key="eduProjectMethodDesc">Combined manual calculations with advanced software.</em>
                                    </li>
                                    <li> <!-- الأدوات المستخدمة -->
                                        <span data-lang-key="eduProjectToolsLabel">Tools Used:</span>
                                        <div class="tools-list" data-lang-key="eduProjectToolsList">
                                            <span>Revit (Struct/Arch)</span> <span>SAP2000</span> <span>ETABS</span> <span>SAFE</span> <span>SCI Column</span> <span>Excel</span>
                                        </div>
                                    </li>
                                </ul>
                            </div> <!-- نهاية graduation-project -->

                        </div> <!-- نهاية education-body -->
                    </div> <!-- نهاية education-item -->
                </div> <!-- نهاية education-card-container -->
            </div> <!-- نهاية container -->
        </section>
        <!-- ============================ Education Section End ============================ -->

        <!-- Projects/Achievements Section -->
        <!-- Projects/Achievements Section -->
        <section id="projects">
            <div class="container">
            <h2 class="section-title" data-lang-key="projectsTitle">Key Project Achievements</h2>

            <div class="projects-grid">

                <!-- Project Card 1: Two Tower Gate -->
                <div class="project-card" data-aos="fade-up" data-aos-duration="600">
                    <div class="project-card-image">
                        <!-- يمكنك وضع صورة هنا: <img src="path/to/two-tower-gate.jpg" alt="Two Tower Gate"> -->
                        <!-- أو أيقونة: -->
                        <div class="project-icon"><i class="fas fa-city"></i></div>
                        <div class="project-card-overlay">
                            <!-- زر فتح التفاصيل في Modal -->
                            <button class="details-btn" data-modal-target="modal-proj1" data-lang-key="viewDetailsBtn">View Details</button>
                        </div>
                    </div>
                    <div class="project-card-content">
                        <h3 data-lang-key="proj1Title">Two Tower Gate (Aliemen Towers)</h3>
                        <p class="project-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-lang-key="proj1Location">New Alamin</span>
                        </p>
                        <p class="project-short-desc" data-lang-key="proj1ShortDesc">A significant mixed-use skyscraper project featuring offices, residential apartments, and commercial facilities...</p> <!-- وصف مختصر -->
                    </div>
                    <div class="project-card-footer">
                            <!-- مثال للحالة (يمكن جلبها من JS أو وضعها مباشرة) -->
                            <span class="project-status ongoing"><i class="fas fa-spinner fa-spin"></i> <span data-lang-key="statusOngoing">Ongoing</span></span>
                    </div>
                </div>

                <!-- Project Card 2: University Housing -->
                <div class="project-card" data-aos="fade-up" data-aos-delay="100" data-aos-duration="600">
                    <div class="project-card-image">
                        <div class="project-icon"><i class="fas fa-graduation-cap"></i></div><!-- أو fa-building -->
                            <div class="project-card-overlay">
                            <button class="details-btn" data-modal-target="modal-proj2" data-lang-key="viewDetailsBtn">View Details</button>
                        </div>
                    </div>
                    <div class="project-card-content">
                        <h3 data-lang-key="proj2Title">University Student Housing</h3>
                        <p class="project-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-lang-key="proj2Location">New Alamin</span>
                        </p>
                        <p class="project-short-desc" data-lang-key="proj2ShortDesc">Involved in the development of student accommodation for the well-known Alamein university...</p>
                    </div>
                        <div class="project-card-footer">
                            <span class="project-status ongoing"><i class="fas fa-tasks"></i> <span data-lang-key="statusInProgress">In Progress (80%+)</span></span>
                        </div>
                </div>

                <!-- Project Card 3: Latin Quarter -->
                    <div class="project-card" data-aos="fade-up" data-aos-delay="200" data-aos-duration="600">
                    <div class="project-card-image">
                            <div class="project-icon"><i class="fas fa-hotel"></i></div> <!-- أو fa-home -->
                            <div class="project-card-overlay">
                            <button class="details-btn" data-modal-target="modal-proj3" data-lang-key="viewDetailsBtn">View Details</button>
                        </div>
                    </div>
                    <div class="project-card-content">
                        <h3 data-lang-key="proj3Title">Latin Quarter Residential Buildings</h3>
                        <p class="project-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-lang-key="proj3Location">New Alamin</span>
                        </p>
                        <p class="project-short-desc" data-lang-key="proj3ShortDesc">Completed one building and currently delivering three additional residential buildings in the quarter...</p>
                    </div>
                        <div class="project-card-footer">
                        <span class="project-status completed"><i class="fas fa-check-circle"></i> <span data-lang-key="statusCompleted">Completed/Delivering</span></span>
                        </div>
                </div>

                <!-- أضف المزيد من بطاقات المشاريع -->

            </div> <!-- نهاية projects-grid -->
            </div> <!-- نهاية container -->

            <!-- === Modals for Project Details (Initially Hidden) === -->

            <!-- Modal for Project 1 -->
            <div id="modal-proj1" class="project-modal">
            <div class="project-modal-content">
                <span class="project-modal-close">×</span>
                <h2 data-lang-key="proj1Title">Two Tower Gate (Aliemen Towers)</h2>
                <p class="modal-location"><i class="fas fa-map-marker-alt"></i> <span data-lang-key="proj1Location">New Alamin</span></p>
                <p data-lang-key="proj1Desc">A significant mixed-use skyscraper project that includes office spaces, residential apartments, and commercial facilities, located in a prime location. It has been designed using the latest engineering techniques to meet the demands of the modern real estate market.</p>
                <h4 data-lang-key="proj1ContribTitle">Contribution (with Cilling Sharm Company & Personal):</h4>
                <ul>
                    <li data-lang-key="proj1Contrib1">Played a key role in installing suspended ceilings throughout the tower, covering mechanical works such as electricity, firefighting and air conditioning systems.</li>
                    <li data-lang-key="proj1Contrib2">Personally prepared the architectural drawings, as well as the inventory and shop rounding works.</li>
                    <li data-lang-key="proj1Contrib3">Managed approvals for meters and inspection doors.</li>
                    <li data-lang-key="proj1Contrib4">Handled the extracts for the subcontractors and made a final extract for the tower with pricing for the entire building.</li>
                </ul>
            </div>
            </div>

            <!-- Modal for Project 2 -->
            <div id="modal-proj2" class="project-modal">
            <div class="project-modal-content">
                <span class="project-modal-close">×</span>
                    <h2 data-lang-key="proj2Title">University Student Housing</h2>
                    <p class="modal-location"><i class="fas fa-map-marker-alt"></i> <span data-lang-key="proj2Location">New Alamin</span></p>
                    <p data-lang-key="proj2Desc">Involved in the development of student accommodation for the well-known Alamein university.</p>
                    <h4>Details:</h4>
                    <ul>
                    <li data-lang-key="proj2Detail1">Phase 1 (Completed & Delivered).</li>
                    <li data-lang-key="proj2Detail2">Phase 2 (Ongoing): Working on completing the second phase, which includes two residential buildings for students, each consisting of a ground floor and 7 repeated floors.</li>
                    <li data-lang-key="proj2Detail3"><strong>Status:</strong> Achieved Completion of work by no less than 80% on current phase work.</li>
                    </ul>
            </div>
            </div>

            <!-- Modal for Project 3 -->
            <div id="modal-proj3" class="project-modal">
            <div class="project-modal-content">
                <span class="project-modal-close">×</span>
                    <h2 data-lang-key="proj3Title">Latin Quarter Residential Buildings</h2>
                    <p class="modal-location"><i class="fas fa-map-marker-alt"></i> <span data-lang-key="proj3Location">New Alamin</span></p>
                    <h4>Details:</h4>
                    <ul>
                    <li data-lang-key="proj3Detail1">One complete building has been completed and delivered.</li>
                    <li data-lang-key="proj3Detail2">Currently working on delivering three other buildings.</li>
                    </ul>
            </div>
            </div>

            <!-- أضف المزيد من Modals حسب عدد المشاريع -->

        </section>





        <!-- Contact Section -->
        <!-- ============================ Contact Section Start ============================ -->
        <section id="contact">
            <!-- Overlay Pattern (::before) applied via CSS -->
            <div class="container">

                <!-- عنوان القسم يأخذ عرض الشبكة بالكامل -->
                <h2 class="section-title" data-lang-key="contactTitle" data-aos="fade-down">Get In Touch</h2>

                <!-- عمود معلومات الاتصال -->
                <div class="contact-details" data-aos="fade-right" data-aos-delay="100">
                    <h3 data-lang-key="contactInfoTitle">
                        <!-- <i class="fas fa-info-circle"></i> --> <!-- أيقونة اختيارية -->
                        Contact Information
                    </h3>

                    <!-- بطاقة الموقع -->
                    <div class="contact-info-item">
                        <i class="fas fa-map-marker-alt fa-fw"></i>
                        <div class="info-text">
                            <span data-lang-key="contactAddress">31812, El-Mahala El-Kubra, Gharbia, Egypt</span>
                        </div>
                    </div>

                    <!-- بطاقة الهاتف -->
                    <div class="contact-info-item">
                        <i class="fas fa-phone-alt fa-fw"></i>
                        <div class="info-text">
                            <span data-lang-key="contactPhone1"><a href="tel:+201011274183">+20 1011 274 183</a></span>
                            <span data-lang-key="contactPhone2"><a href="tel:+201276574897">+20 1276 574 897</a></span>
                        </div>
                    </div>

                    <!-- بطاقة الايميل -->
                    <div class="contact-info-item">
                        <i class="fas fa-envelope fa-fw"></i>
                        <div class="info-text">
                            <span data-lang-key="contactEmail"><a href="mailto:m.hagag.lala@gmail.com">m.hagag.lala@gmail.com</a></span>
                        </div>
                    </div>

                    <!-- بطاقة واتساب -->
                    <div class="contact-info-item">
                        <i class="fab fa-whatsapp fa-fw"></i>
                        <div class="info-text">
                            <span data-lang-key="contactWhatsapp1"><a href="https://wa.me/201011274183" target="_blank">+20 1011 274 183</a></span>
                            <span data-lang-key="contactWhatsapp2"><a href="https://wa.me/201276574897" target="_blank">+20 1276 574 897</a></span>
                        </div>
                    </div>

                    <!-- قسم المراجع -->
                    <div class="contact-references" style="margin-top: 40px;">
                        <h3 data-lang-key="contactRefTitle">
                            <!-- <i class="fas fa-users"></i> --> <!-- أيقونة اختيارية -->
                            References
                        </h3>
                        <p data-lang-key="contactRefText">Available upon request. Contact details for Cilling Sharm provided in CV.</p>
                    </div>

                </div> <!-- نهاية contact-details -->

                <!-- عمود النموذج و QR والتواصل -->
                <div class="contact-form-column" data-aos="fade-left" data-aos-delay="200">
                    <h3 data-lang-key="contactFormTitle">
                        <!-- <i class="fas fa-paper-plane"></i> --> <!-- أيقونة اختيارية -->
                        Send a Message
                    </h3>

                    <!-- ==== نموذج الاتصال ==== -->
                    <form id="contact-form" action="https://formspree.io/f/YOUR_EMAIL_OR_FORM_ID" method="POST">
                        <!-- حقل الاسم -->
                        <div class="form-group">
                            <label for="form-name" data-lang-key="formNameLabel">Name</label>
                            <input type="text" id="form-name" name="name" required placeholder="Your Name">
                        </div>
                        <!-- حقل الهاتف -->
                        <div class="form-group">
                            <label for="form-phone" data-lang-key="formPhoneLabel">Phone</label>
                            <input type="tel" id="form-phone" name="phone" placeholder="Your Phone (Optional)">
                        </div>
                        <!-- حقل عنوان الرسالة -->
                        <div class="form-group">
                            <label for="form-subject" data-lang-key="formSubjectLabel">Subject</label>
                            <input type="text" id="form-subject" name="_subject" required placeholder="Message Subject">
                        </div>
                        <!-- حقل نص الرسالة -->
                        <div class="form-group">
                            <label for="form-message" data-lang-key="formMessageLabel">Message</label>
                            <textarea id="form-message" name="message" rows="5" required placeholder="Your Message"></textarea>
                        </div>
                        <!-- زر الإرسال -->
                        <div class="form-group form-submit-group">
                            <button type="submit" class="btn contact-submit-btn" data-lang-key="formSubmitBtn">Send Message</button>
                            <span class="form-status"></span>
                        </div>
                    </form>
                    <!-- ==== نهاية نموذج الاتصال ==== -->

                    <!-- قسم التواصل الاجتماعي -->
                    <div class="contact-social-links" style="margin-top: 50px;">
                        <h3 data-lang-key="contactSocialTitle">
                            <!-- <i class="fas fa-share-alt"></i> --> <!-- أيقونة اختيارية -->
                            Connect Online
                        </h3>
                        <div class="social-links">
                            <a href="https://www.linkedin.com/in/mohamed-ahmed-807178a2/" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                            <a href="https://www.facebook.com/moh.gogo11" target="_blank" title="Facebook"><i class="fab fa-facebook-square"></i></a>
                            <a href="https://twitter.com/1__24M" target="_blank" title="X (Twitter)"><i class="fab fa-xing"></i></a>
                            <a href="https://www.behance.net/mohamed183" target="_blank" title="Behance"><i class="fab fa-behance-square"></i></a>
                        </div>
                    </div>

                    <!-- قسم QR Code -->
                    <div class="contact-qr" style="margin-top: 40px;">
                        <h3 data-lang-key="contactQRTitle">
                            <!-- <i class="fas fa-qrcode"></i> --> <!-- أيقونة اختيارية -->
                            Quick Contact
                        </h3>
                        <div class="qr-code">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=mailto:m.hagag.lala@gmail.com" alt="Contact QR Code"> <!-- ** REPLACE QR ** -->
                            <p data-lang-key="contactQRDesc">Scan for Email</p>
                        </div>
                    </div>

                </div> <!-- نهاية contact-form-column -->

            </div> <!-- نهاية container -->
        </section>
        <!-- ============================ Contact Section End ============================ -->
    </main>

    <!-- Footer -->
    <!-- ============================ Footer Start ============================ -->
    <footer>
        <!-- Optional Top Glow Effect (::before) applied via CSS -->
        <div class="container">

            <!-- (اختياري) القسم العلوي: شعار وروابط سريعة -->
            <div class="footer-top" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
                <div class="footer-logo">
                    <a href="#hero" data-lang-key="logoText">Mohamed Hagag</a>
                </div>
                <nav class="footer-quick-links">
                    <ul>
                        <!-- نسخ روابط الهيدر الرئيسية هنا -->
                        <li><a href="#hero" data-lang-key="navHome">Home</a></li>
                        <li><a href="#about" data-lang-key="navAbout">About</a></li>
                        <li><a href="#skills" data-lang-key="navSkills">Skills</a></li>
                        <li><a href="#experience" data-lang-key="navExperience">Experience</a></li>
                        <li><a href="#education" data-lang-key="navEducation">Education</a></li>
                        <li><a href="#projects" data-lang-key="navProjects">Projects</a></li>
                        <li><a href="#contact" data-lang-key="navContact">Contact</a></li>
                    </ul>
                </nav>
            </div>

            <!-- القسم الأوسط: روابط التواصل الاجتماعي -->
            <div class="footer-social" data-aos="fade-up" data-aos-delay="100" data-aos-anchor-placement="top-bottom">
                <h4 data-lang-key="footerConnect">Connect Socially</h4> <!-- يمكن إضافة مفتاح لغة -->
                <div class="social-links">
                    <a href="https://www.linkedin.com/in/mohamed-ahmed-807178a2/" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.facebook.com/moh.gogo11" target="_blank" title="Facebook"><i class="fab fa-facebook-square"></i></a>
                    <a href="https://twitter.com/1__24M" target="_blank" title="X (Twitter)"><i class="fab fa-xing"></i></a>
                    <a href="https://www.behance.net/mohamed183" target="_blank" title="Behance"><i class="fab fa-behance-square"></i></a>
                    <!-- أضف أي روابط أخرى -->
                </div>
            </div>

        </div> <!-- نهاية container الرئيسي -->

        <!-- القسم السفلي: حقوق النشر (خارج الـ container الرئيسي ليأخذ عرض كامل) -->
        <div class="footer-bottom">
            <div class="container"> <!-- حاوية داخلية للتوسيط -->
                <p>
                    © <span id="year"></span> <strong data-lang-key="footerName">Mohamed Hagag</strong>.
                    <span data-lang-key="footerRights">All Rights Reserved</span>.
                    <span data-lang-key="footerEnhanced">Portfolio designed with</span> <i class="fas fa-heart"></i>.
                </p>
            </div>
        </div>
    </footer>
    <!-- ============================ Footer End ============================ -->

    <!-- Back to Top Button -->
    <a href="#hero" id="back-to-top" title="Back to Top"><i class="fas fa-arrow-up"></i></a>

    <!-- AOS Library JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- Typed.js Library -->
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>

    <!-- Custom JavaScript -->
    <script>

        // ---=== Language Data Object (UPDATED with missing keys) ===---
        const languages = {
            en: {
                // Meta & Settings
                docTitle: "Mohamed Hagag - Portfolio",
                settingsLanguage: "Language",
                settingsTheme: "Theme",
                settingsFontSize: "Font Size",
                preloaderLoading: "Loading...",
                // Navigation & Logo
                logoText: "Mohamed Hagag",
                navHome: "Home", navAbout: "About", navSkills: "Skills", navExperience: "Experience", navEducation: "Education", navProjects: "Projects", navContact: "Contact",
                // Hero
                heroImageAlt: "Mohamed Hagag Profile Picture",
                heroTitle: "Mohamed Hagag",
                heroSubtitleTyped: ['Civil Structural Engineer', 'BIM Specialist', 'Graphic Designer', 'Technical Office Expert'],
                heroLocation: "31812, El-Mahala El-Kubra, Gharbia",
                heroPhone: "+20 1011 274 183 | +20 1276 574 897",
                heroEmail: "m.hagag.lala@gmail.com",
                heroButton: "Get In Touch",
                // About
                aboutTitle: "About Me",
                aboutP1: "I am a dedicated Civil Structural Engineer, graduating in 2022 with an excellent grade in my reinforced concrete structures design project. This project encompassed both rigorous manual calculations and proficiency in advanced engineering software such as SAP2000, ETABS, SAFE, SCI Column, Excel, and Revit (structural and architectural).",
                aboutP2: "My practical experience includes over a year as a site engineer, where I supervised various construction tasks, including finishing works and project execution. Additionally, I worked as a technical office engineer for more than a year in Sharm El-Sheikh, handling tasks such as quantity surveying, shop drawings, and preparing invoices.",
                aboutP3: "Beyond my engineering expertise, I have over 6 years of experience in graphic design and marketing, mastering tools like Photoshop, Illustrator, and CorelDRAW. I also possess advanced skills in SEO, content creation, video editing, and social media management.",
                aboutQuickFacts: "Quick Facts",
                aboutName: "Name: Mohamed Hagag",
                aboutRole: "Role: Structural Engineer / BIM",
                aboutGraduated: "Graduated: 2022",
                aboutEmailAside: "Email: m.hagag.lala@gmail.com",
                aboutLocationAside: "Location: El-Mahala El-Kubra, Egypt",
                aboutLanguages: "Languages: Arabic (Native), English (Very Good)",
                aboutHobbies: "Hobbies",
                hobbyLearning: "Learning", hobbyWriting: "Writing", hobbyMovies: "Watching Movies",
                // Skills
                skillsTitle: "Skills & Proficiencies",
                skillsCatEngSoft: "Engineering Software",
                skillsDescEngSoft: "Proficiency in industry-standard structural analysis and modeling tools.",
                skillRevit: "Revit (Struct/Arch)",
                skillAutocad: "AutoCAD",
                skillCsi: "ETABS/SAP2000/SAFE",
                skillsCatBim: "BIM & Technical Office",
                skillsDescBim: "Expertise in BIM workflows, coordination, and technical documentation.",
                skillBimMgmt: "BIM Management",
                skillQsBoq: "Quantity Surveying / BOQ",
                skillShopDraw: "Shop Drawings",
                skillsCatCreative: "Design & Creative Suite",
                skillsDescCreative: "Skilled in graphic design software for visual communication and marketing.",
                skillPs: "Adobe Photoshop",
                skillAi: "Adobe Illustrator",
                skillCorel: "CorelDRAW",
                skillsCatDigital: "Digital & Management",
                skillsDescDigital: "Experience in digital marketing, content, AI, and office productivity.",
                skillSeoMarket: "SEO & Digital Marketing",
                skillContentCreate: "Content Creation",
                skillAiUsage: "Professional AI Usage",
                skillMsOffice: "Microsoft Office",
                skillsExploring: "Exploring Next",
                skillsExploringListParsed: "<span>Prokon</span> | <span>RAM</span> | <span>ANSYS</span> | <span>STAAD.Pro</span>",
                // Experience
                experienceTitle: "Work Experience",
                exp1Title: "Technical Office Engineer (BIM Manager)", exp1Location: "New Alamin", exp1Duration: "1.5 Years",
                exp1Detail1: "Conducted detailed quantity surveying and prepared BOQs, utilizing <strong>BIM-based takeoffs</strong> for enhanced accuracy.", exp1Detail2: "Worked extensively with <strong>Building Information Modeling (BIM)</strong> to optimize project coordination.", exp1Detail3: "Utilized <strong>4D & 5D BIM</strong> for scheduling and cost control.", exp1Detail4: "Developed structural/architectural <strong>shop drawings</strong> using <strong>Revit</strong> and <strong>AutoCAD</strong>.", exp1Detail5: "Managed project documentation (invoices, submittals, reports).", exp1Detail6: "Coordinated with contractors & suppliers.",
                exp2Title: "Site Engineer", exp2Location: "New Alamin", exp2Duration: "1.5 Years",
                exp2Detail1: "Supervised on-site construction and <strong>finishing works</strong>, ensuring <strong>quality & safety</strong> compliance.", exp2Detail2: "Monitored daily activities & resolved technical issues promptly.", exp2Detail3: "Collaborated with stakeholders for workflow efficiency.", exp2Detail4: "Oversaw material delivery & specification adherence.",
                exp3Title: "Media Buyer & SMMA Manager", exp3Location: "Remote/Various", exp3Duration: "2+ Years",
                exp3Detail1: "Planned and managed <strong>digital advertising</strong> campaigns (various platforms).", exp3Detail2: "Handled advertising <strong>budgets</strong> effectively for targeted <strong>ROI</strong>.", exp3Detail3: "Analyzed campaign performance & adjusted strategies.", exp3Detail4: "Developed marketing strategies with clients.",
                exp4Title: "Graphic Designer", exp4Location: "Remote/Freelance", exp4Duration: "6+ Years (2017 - 2023)",
                exp4Detail1: "Designed creative materials using <strong>Photoshop, Illustrator, & CorelDRAW</strong>.", exp4Detail2: "Executed branding (logos, brochures), social media visuals.", exp4Detail3: "Collaborated with marketing teams on campaigns.", exp4Detail4: "Managed design projects concept-to-delivery.",
                // Education
                educationTitle: "Educational Background",
                eduDegree: "Bachelor's Degree in Civil Engineering", eduUniversity: "Future academy in MANS, Mansoura", eduGradYearLabel: "Graduated:", eduGradYear: "2022",
                eduOverallGradeLabel: "Overall Grade:",
                eduOverallGradeValue: "Good",
                eduFinalYearGradeLabel: "Final Year Grade:",
                eduFinalYearGradeValue: "Very Good",
                eduProjectTitleShort: "Graduation Project",
                eduProjectFullNameLabel: "Project Title:",
                eduProjectFullNameDesc: "Design of Reinforced Concrete Structures",
                eduProjectGradeLabel: "Project Grade:",
                eduProjectGradeValue: "Excellent",
                eduProjectMethodLabel: "Methodology:",
                eduProjectMethodDesc: "Combined manual calculations with advanced software.",
                eduProjectToolsLabel: "Tools Used:",
                eduProjectToolsList: `<span>Revit (Struct/Arch)</span> <span>SAP2000</span> <span>ETABS</span> <span>SAFE</span> <span>SCI Column</span> <span>Excel</span>`,
                // Projects
                projectsTitle: "Key Project Achievements",
                viewDetailsBtn: "View Details",
                proj1Title: "Two Tower Gate (Aliemen Towers)", proj1Location: "New Alamin",
                proj1ShortDesc: "A significant mixed-use skyscraper project featuring offices, residential apartments, and commercial facilities...",
                proj1Desc: "A significant mixed-use skyscraper project that includes office spaces, residential apartments, and commercial facilities, located in a prime location. It has been designed using the latest engineering techniques to meet the demands of the modern real estate market.",
                proj1ContribTitle: "Contribution (with Cilling Sharm Company & Personal):",
                proj1Contrib1: "Played a key role in installing suspended ceilings throughout the tower, covering mechanical works such as electricity, firefighting and air conditioning systems.", proj1Contrib2: "Personally prepared the architectural drawings, as well as the inventory and shop rounding works.", proj1Contrib3: "Managed approvals for meters and inspection doors.", proj1Contrib4: "Handled the extracts for the subcontractors and made a final extract for the tower with pricing for the entire building.",
                proj2Title: "University Student Housing", proj2Location: "New Alamin",
                proj2ShortDesc: "Involved in the development of student accommodation for the well-known Alamein university...",
                proj2Desc: "Involved in the development of student accommodation for the well-known Alamein university.",
                proj2Detail1: "Phase 1 (Completed & Delivered).", proj2Detail2: "Phase 2 (Ongoing): Working on completing the second phase, which includes two residential buildings for students, each consisting of a ground floor and 7 repeated floors.", proj2Detail3: "<strong>Status:</strong> Achieved Completion of work by no less than 80% on current phase work.",
                proj3Title: "Latin Quarter Residential Buildings", proj3Location: "New Alamin",
                proj3ShortDesc: "Completed one building and currently delivering three additional residential buildings in the quarter...",
                proj3Detail1: "One complete building has been completed and delivered.", proj3Detail2: "Currently working on delivering three other buildings.",
                statusOngoing: "Ongoing",
                statusInProgress: "In Progress (80%+)",
                statusCompleted: "Completed/Delivering",
                // Contact
                contactTitle: "Get In Touch",
                contactInfoTitle: "Contact Information",
                contactAddress: "31812, El-Mahala El-Kubra, Gharbia, Egypt",
                contactPhone1: "+20 1011 274 183", contactPhone2: "+20 1276 574 897",
                contactEmail: "m.hagag.lala@gmail.com",
                contactWhatsapp1: "+20 1011 274 183", contactWhatsapp2: "+20 1276 574 897",
                contactSocialTitle: "Connect Online",
                contactRefTitle: "References",
                contactRefText: "Available upon request. Contact details for Cilling Sharm provided in CV.",
                contactFormTitle: "Send a Message",
                formNameLabel: "Name",
                formPhoneLabel: "Phone",
                formSubjectLabel: "Subject",
                formMessageLabel: "Message",
                formSubmitBtn: "Send Message",
                contactQRTitle: "Quick Contact",
                contactQRDesc: "Scan for Email",
                // Footer
                footerConnect: "Connect Socially",
                footerName: "Mohamed Hagag",
                footerRights: "All Rights Reserved",
                footerEnhanced: "Portfolio designed with",
            },
            ar: {
                // Meta & Settings
                docTitle: "محمد حجاج - بورتفوليو",
                settingsLanguage: "اللغة",
                settingsTheme: "المظهر",
                settingsFontSize: "حجم الخط",
                preloaderLoading: "جاري التحميل...",
                // Navigation & Logo
                logoText: "محمد حجاج",
                navHome: "الرئيسية", navAbout: "عني", navSkills: "المهارات", navExperience: "الخبرة", navEducation: "التعليم", navProjects: "المشاريع", navContact: "تواصل",
                // Hero
                heroImageAlt: "صورة محمد حجاج الشخصية",
                heroTitle: "محمد حجاج",
                heroSubtitleTyped: ['مهندس مدني إنشائي', 'أخصائي BIM', 'مصمم جرافيك', 'خبير مكتب فني'],
                heroLocation: "31812، المحلة الكبرى، الغربية",
                heroPhone: "+20 1011 274 183 | +20 1276 574 897",
                heroEmail: "m.hagag.lala@gmail.com",
                heroButton: "تواصل معي",
                // About
                aboutTitle: "عني",
                aboutP1: "أنا مهندس مدني إنشائي متخصص، تخرجت عام 2022 وحصلت على تقدير ممتاز في مشروع التخرج الخاص بي، والذي ركز على تصميم المنشآت الخرسانية المسلحة. شمل المشروع كلاً من الحسابات اليدوية الدقيقة واستخدام برامج هندسية متقدمة مثل SAP2000, ETABS, SAFE, SCI Column, Excel, و Revit (إنشائي ومعماري).",
                aboutP2: "لدي خبرة عملية تزيد عن عام كمهندس موقع، حيث أشرفت على مهام إنشائية متنوعة تشمل أعمال التشطيبات وتنفيذ المشاريع. بالإضافة إلى ذلك، عملت كمهندس مكتب فني لأكثر من عام في شرم الشيخ، وتوليت مهام مثل حصر الكميات، وإعداد الرسومات التنفيذية (Shop Drawings)، وتجهيز المستخلصات والفواتير.",
                aboutP3: "إلى جانب خبرتي الهندسية، أمتلك خبرة تزيد عن 6 سنوات في مجال التصميم الجرافيكي والتسويق، وأتقن استخدام أدوات مثل Photoshop, Illustrator, و CorelDRAW. كما أمتلك مهارات متقدمة في تحسين محركات البحث (SEO)، إنشاء المحتوى، تحرير الفيديو، وإدارة وسائل التواصل الاجتماعي.",
                aboutQuickFacts: "حقائق سريعة",
                aboutName: "الاسم: محمد حجاج",
                aboutRole: "الوظيفة: مهندس إنشائي / BIM",
                aboutGraduated: "تخرج: 2022",
                aboutEmailAside: "البريد: m.hagag.lala@gmail.com",
                aboutLocationAside: "الموقع: المحلة الكبرى، مصر",
                aboutLanguages: "اللغات: العربية (الأم)، الإنجليزية (جيد جداً)",
                aboutHobbies: "الهوايات",
                hobbyLearning: "التعلم", hobbyWriting: "الكتابة", hobbyMovies: "مشاهدة الأفلام",
                // Skills
                skillsTitle: "المهارات والكفاءات",
                skillsCatEngSoft: "البرامج الهندسية",
                skillsDescEngSoft: "إجادة أدوات التحليل الإنشائي والنمذجة القياسية في الصناعة.",
                skillRevit: "Revit (إنشائي/معماري)",
                skillAutocad: "AutoCAD",
                skillCsi: "ETABS/SAP2000/SAFE",
                skillsCatBim: "BIM والمكتب الفني",
                skillsDescBim: "خبرة في سير عمل BIM، التنسيق، والتوثيق الفني.",
                skillBimMgmt: "إدارة BIM",
                skillQsBoq: "حصر الكميات / BOQ",
                skillShopDraw: "الرسومات التنفيذية",
                skillsCatCreative: "التصميم والجناح الإبداعي",
                skillsDescCreative: "مهارة في برامج التصميم الجرافيكي للتواصل البصري والتسويق.",
                skillPs: "Adobe Photoshop",
                skillAi: "Adobe Illustrator",
                skillCorel: "CorelDRAW",
                skillsCatDigital: "الرقميات والإدارة",
                skillsDescDigital: "خبرة في التسويق الرقمي، المحتوى، الذكاء الاصطناعي، والإنتاجية المكتبية.",
                skillSeoMarket: "SEO والتسويق الرقمي",
                skillContentCreate: "إنشاء المحتوى",
                skillAiUsage: "استخدام الذكاء الاصطناعي باحتراف",
                skillMsOffice: "Microsoft Office",
                skillsExploring: "أستكشف تالياً",
                skillsExploringListParsed: "<span dir='ltr'>Prokon</span> | <span dir='ltr'>RAM</span> | <span dir='ltr'>ANSYS</span> | <span dir='ltr'>STAAD.Pro</span>",
                // Experience
                experienceTitle: "الخبرة العملية",
                exp1Title: "مهندس مكتب فني (مدير BIM)", exp1Location: "العلمين الجديدة", exp1Duration: "1.5 سنة",
                exp1Detail1: "إجراء حصر كميات تفصيلي وإعداد قوائم الكميات (BOQ)، مع استخدام <strong>تقنيات BIM</strong> لتعزيز الدقة.", exp1Detail2: "العمل المكثف <strong>بنمذجة معلومات البناء (BIM)</strong> لتحسين تنسيق المشاريع.", exp1Detail3: "استخدام <strong>4D و 5D BIM</strong> لجدولة المشاريع والتحكم في التكاليف.", exp1Detail4: "تطوير <strong>الرسومات التنفيذية</strong> الإنشائية والمعمارية باستخدام <strong>Revit</strong> و <strong>AutoCAD</strong>.", exp1Detail5: "إدارة وثائق المشروع (الفواتير، تقديمات المواد، التقارير).", exp1Detail6: "التنسيق مع المقاولين والموردين.",
                exp2Title: "مهندس موقع", exp2Location: "العلمين الجديدة", exp2Duration: "1.5 سنة",
                exp2Detail1: "الإشراف على أعمال الإنشاء <strong>والتشطيبات</strong> في الموقع، مع ضمان الامتثال <strong>للجودة والسلامة</strong>.", exp2Detail2: "مراقبة الأنشطة اليومية وحل المشكلات الفنية.", exp2Detail3: "التعاون مع أصحاب المصلحة لكفاءة سير العمل.", exp2Detail4: "الإشراف على تسليم المواد والالتزام بالمواصفات.",
                exp3Title: "مشتري إعلانات ومدير SMMA", exp3Location: "عن بعد/متنوع", exp3Duration: "2+ سنوات",
                exp3Detail1: "تخطيط وإدارة حملات <strong>الإعلان الرقمي</strong> (منصات مختلفة).", exp3Detail2: "إدارة <strong>ميزانيات</strong> الإعلانات بفعالية لتحقيق <strong>عائد استثمار</strong> مستهدف.", exp3Detail3: "تحليل أداء الحملات وتعديل الاستراتيجيات.", exp3Detail4: "تطوير استراتيجيات التسويق مع العملاء.",
                exp4Title: "مصمم جرافيك", exp4Location: "عن بعد/مستقل", exp4Duration: "6+ سنوات (2017 - 2023)",
                exp4Detail1: "تصميم مواد إبداعية باستخدام <strong>Photoshop, Illustrator, & CorelDRAW</strong>.", exp4Detail2: "تنفيذ مشاريع العلامات التجارية والمرئيات لوسائل التواصل الاجتماعي.", exp4Detail3: "التعاون مع فرق التسويق في الحملات.", exp4Detail4: "إدارة مشاريع التصميم من المفهوم إلى التسليم.",
                // Education
                educationTitle: "الخلفية التعليمية",
                eduDegree: "بكالوريوس في الهندسة المدنية", eduUniversity: "أكاديمية المستقبل بالمنصورة", eduGradYearLabel: "تخرج:", eduGradYear: "2022",
                eduOverallGradeLabel: "التقدير العام:",
                eduOverallGradeValue: "جيد",
                eduFinalYearGradeLabel: "تقدير السنة النهائية:",
                eduFinalYearGradeValue: "جيد جداً",
                eduProjectTitleShort: "مشروع التخرج",
                eduProjectFullNameLabel: "عنوان المشروع:",
                eduProjectFullNameDesc: "تصميم المنشآت الخرسانية المسلحة",
                eduProjectGradeLabel: "تقدير المشروع:",
                eduProjectGradeValue: "ممتاز",
                eduProjectMethodLabel: "المنهجية:",
                eduProjectMethodDesc: "دمج الحسابات اليدوية مع البرامج المتقدمة.",
                eduProjectToolsLabel: "الأدوات المستخدمة:",
                eduProjectToolsList: `<span dir="ltr">Revit (Struct/Arch)</span> <span dir="ltr">SAP2000</span> <span dir="ltr">ETABS</span> <span dir="ltr">SAFE</span> <span dir="ltr">SCI Column</span> <span dir="ltr">Excel</span>`,
                // Projects
                projectsTitle: "إنجازات المشاريع الرئيسية",
                viewDetailsBtn: "عرض التفاصيل",
                proj1Title: "بوابة البرجين (أبراج العلمين)", proj1Location: "العلمين الجديدة",
                proj1ShortDesc: "مشروع ناطحة سحاب كبير متعدد الاستخدامات يضم مكاتب وشقق سكنية ومرافق تجارية...",
                proj1Desc: "مشروع ناطحة سحاب متعدد الاستخدامات يضم مساحات مكتبية وشقق سكنية ومرافق تجارية، يقع في موقع متميز. تم تصميمه باستخدام أحدث التقنيات الهندسية لتلبية متطلبات السوق العقاري الحديث.",
                proj1ContribTitle: "المساهمة (مع شركة سيلينج شرم وشخصياً):",
                proj1Contrib1: "لعب دورًا رئيسيًا في تركيب الأسقف المعلقة في جميع أنحاء البرج، وتغطية الأعمال الميكانيكية مثل الكهرباء ومكافحة الحرائق وأنظمة تكييف الهواء.", proj1Contrib2: "قمت شخصيًا بإعداد الرسومات المعمارية، وكذلك قوائم الجرد وأعمال التسعير التنفيذية.", proj1Contrib3: "إدارة الموافقات للعدادات وأبواب التفتيش.", proj1Contrib4: "توليت عمل المستخلصات للمقاولين من الباطن وقمت بعمل مستخلص نهائي للبرج مع تسعير للمبنى بأكمله.",
                proj2Title: "إسكان الطلاب الجامعيين", proj2Location: "العلمين الجديدة",
                proj2ShortDesc: "المشاركة في تطوير سكن الطلاب لجامعة العلمين المعروفة...",
                proj2Desc: "المشاركة في تطوير سكن الطلاب لجامعة العلمين المعروفة.",
                proj2Detail1: "المرحلة الأولى (اكتملت وتم تسليمها).", proj2Detail2: "المرحلة الثانية (جارية): العمل على استكمال المرحلة الثانية التي تشمل مبنيين سكنيين للطلاب، يتكون كل منهما من طابق أرضي و 7 طوابق متكررة.", proj2Detail3: "<strong>الحالة:</strong> تم إنجاز ما لا يقل عن 80٪ من العمل في المرحلة الحالية.",
                proj3Title: "مباني الحي اللاتيني السكنية", proj3Location: "العلمين الجديدة",
                proj3ShortDesc: "تم الانتهاء من مبنى واحد ويجري حاليًا تسليم ثلاثة مبانٍ إضافية في الحي...",
                proj3Detail1: "تم الانتهاء من بناء مبنى كامل وتسليمه بنجاح.", proj3Detail2: "العمل حاليًا على تسليم ثلاثة مبانٍ أخرى.",
                statusOngoing: "جاري العمل",
                statusInProgress: "قيد التنفيذ (80%+)",
                statusCompleted: "مكتمل/جاري التسليم",
                // Contact
                contactTitle: "تواصل معي",
                contactInfoTitle: "معلومات الاتصال",
                contactAddress: "31812، المحلة الكبرى، الغربية، مصر",
                contactPhone1: "+20 1011 274 183", contactPhone2: "+20 1276 574 897",
                contactEmail: "m.hagag.lala@gmail.com",
                contactWhatsapp1: "+20 1011 274 183", contactWhatsapp2: "+20 1276 574 897",
                contactSocialTitle: "تواصل عبر الإنترنت",
                contactRefTitle: "المراجع",
                contactRefText: "متوفرة عند الطلب. تفاصيل الاتصال بشركة سيلينج شرم متوفرة في السيرة الذاتية.",
                contactFormTitle: "أرسل رسالة",
                formNameLabel: "الاسم",
                formPhoneLabel: "الهاتف",
                formSubjectLabel: "الموضوع",
                formMessageLabel: "الرسالة",
                formSubmitBtn: "إرسال الرسالة",
                contactQRTitle: "اتصال سريع",
                contactQRDesc: "امسح للبريد الإلكتروني",
                // Footer
                footerConnect: "تواصل اجتماعياً",
                footerName: "محمد حجاج",
                footerRights: "جميع الحقوق محفوظة",
                footerEnhanced: "تم تصميم البورتفوليو بواسطة",
            }
        };


        // ---=== Global Variables ===---
        let currentLang = localStorage.getItem('portfolioLang') || 'en';
        let currentTheme = localStorage.getItem('portfolioTheme') || 'ivory';
        let typedInstance = null;
        const settingsPreviouslySaved = localStorage.getItem('portfolioSettingsSaved');
        const DEFAULT_FONT_SIZE_PERCENT = 100;
        const FONT_SIZE_STEP = 10;
        const MIN_FONT_SIZE_PERCENT = 80;
        const MAX_FONT_SIZE_PERCENT = 140;
        let currentFontSizePercent = parseInt(localStorage.getItem('portfolioFontSizePercent')) || DEFAULT_FONT_SIZE_PERCENT;


        // ---=== DOM Elements ===---
        const bodyElement = document.body;
        const htmlElement = document.documentElement;
        const settingsToggleBtn = document.getElementById('settings-toggle');
        const settingsPanel = document.getElementById('settings-panel');
        const settingsCloseBtn = document.getElementById('settings-close');
        const langButtons = document.querySelectorAll('.lang-btn');
        const themeOptions = document.querySelectorAll('.theme-option');
        const preloader = document.getElementById('preloader');
        const decreaseFontBtn = document.getElementById('decrease-fontsize');
        const resetFontBtn = document.getElementById('reset-fontsize');
        const increaseFontBtn = document.getElementById('increase-fontsize');
        const fontSizeDisplay = document.getElementById('current-fontsize-display');
        const heroSection = document.getElementById('hero');
        const header = document.getElementById('main-header');
        const mobileNavToggle = document.getElementById('mobile-nav-toggle');
        const mobileNavContainer = document.getElementById('mobile-nav-container');
        const mobileNavClose = document.getElementById('mobile-nav-close');
        const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
        const mobileNav = document.getElementById('mobile-nav');
        const contactForm = document.getElementById('contact-form');
        const formStatus = contactForm ? contactForm.querySelector('.form-status') : null;
        const submitButton = contactForm ? contactForm.querySelector('.contact-submit-btn') : null;
        const openModalButtons = document.querySelectorAll('[data-modal-target]');
        const closeModalButtons = document.querySelectorAll('.project-modal-close');
        const modals = document.querySelectorAll('.project-modal');


        // ---=== Functions ===---

        /**
         * Applies the given font size percentage to the root element (<html>)
         * and updates the display.
         * @param {number} sizePercent - The font size percentage (e.g., 90, 100, 110).
         */
        const applyFontSize = (sizePercent) => {
            sizePercent = Math.max(MIN_FONT_SIZE_PERCENT, Math.min(sizePercent, MAX_FONT_SIZE_PERCENT));
            htmlElement.style.fontSize = `${sizePercent}%`;
            if (fontSizeDisplay) {
                fontSizeDisplay.textContent = `${sizePercent}%`;
            }
            currentFontSizePercent = sizePercent;
            localStorage.setItem('portfolioFontSizePercent', sizePercent.toString());
            if (typeof AOS === 'object' && AOS.refreshHard) { // Check if AOS and refreshHard exist
                AOS.refreshHard();
            } else if (typeof AOS === 'object' && AOS.refresh) { // Fallback to refresh if refreshHard doesn't exist
                AOS.refresh();
            }
            console.log(`Font size set to: ${sizePercent}%`);
        };

        /**
         * Animates progress bars when they become visible in the viewport.
         */
        const animateProgressBars = () => {
            const progressBars = document.querySelectorAll('.progress-bar-fill');
            if (!progressBars || progressBars.length === 0) {
                console.warn("No progress bars found to animate.");
                return;
            }
            const observerOptions = { root: null, rootMargin: '0px', threshold: 0.5 };
            const observerCallback = (entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const progressBar = entry.target;
                        const progressValue = progressBar.dataset.progress || '0';
                        setTimeout(() => {
                            progressBar.style.width = progressValue + '%';
                        }, 150);
                        observer.unobserve(progressBar);
                    }
                });
            };
            const observer = new IntersectionObserver(observerCallback, observerOptions);
            progressBars.forEach(bar => observer.observe(bar));
            console.log(`Observing ${progressBars.length} progress bars for animation.`);
        };

        /**
         * Opens the specified modal.
         * @param {HTMLElement} modal - The modal element to open.
         */
        const openModal = (modal) => {
            if (modal == null) return;
            modal.classList.add('active');
            bodyElement.classList.add('modal-active');
            updateModalLanguage(modal, currentLang);
            console.log(`Modal opened: #${modal.id}`);
        };

        /**
         * Closes the specified modal.
         * @param {HTMLElement} modal - The modal element to close.
         */
        const closeModal = (modal) => {
            if (modal == null) return;
            modal.classList.remove('active');
            bodyElement.classList.remove('modal-active');
            console.log(`Modal closed: #${modal.id}`);
        };

        /**
         * Updates the language content within a specific modal.
         * @param {HTMLElement} modal - The modal element.
         * @param {string} langCode - The language code ('en' or 'ar').
         */
        const updateModalLanguage = (modal, langCode) => {
            if (!languages[langCode] || !modal) return;
            console.log(`Updating language in modal #${modal.id} to ${langCode}`);
            modal.querySelectorAll('[data-lang-key]').forEach(el => {
                const keyAttr = el.dataset.langKey;
                const [key, attribute] = keyAttr.split('|');
                if (languages[langCode][key] !== undefined) {
                    const keysWithHtmlContent = [
                        'eduProjectToolsList', // Edu section
                        'proj1Contrib1', 'proj1Contrib2', 'proj1Contrib3', 'proj1Contrib4', // Project Modals
                        'proj2Detail3'
                    ];
                    if (attribute) {
                        el[attribute] = languages[langCode][key];
                    } else if (keysWithHtmlContent.includes(key)) {
                        el.innerHTML = languages[langCode][key];
                    } else {
                        el.textContent = languages[langCode][key];
                    }
                } else {
                    // Warning is good, no need to repeat here if setLanguage already warns
                    // console.warn(`Lang key "${key}" not found in modal for lang "${langCode}"`);
                }
            });
        };

        /**
         * Sets the application language.
         * @param {string} langCode - 'en' or 'ar'.
         */
        const setLanguage = (langCode) => {
            if (!languages[langCode]) {
                console.error(`Language code "${langCode}" not found in languages object.`);
                return;
            }

            currentLang = langCode;
            htmlElement.lang = langCode;
            htmlElement.dir = langCode === 'ar' ? 'rtl' : 'ltr';

            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const keyAttr = el.dataset.langKey;
                const [key, attribute] = keyAttr.split('|');

                if (languages[langCode][key] !== undefined) {
                    // *** List of keys known to require HTML interpretation ***
                    const keysWithHtmlContent = [
                        'eduOverallGrade', 'eduFinalYearGrade', 'eduProjectTitle', 'eduProjectGrade',
                        'eduProjectMethod', 'eduProjectTools', 'eduProjectToolsList', // Edu section
                        'skillsExploringListParsed', // Skills section
                        'exp1Detail1','exp1Detail2','exp1Detail3','exp1Detail4', 'exp1Detail5', 'exp1Detail6', // Experience (using strong)
                        'exp2Detail1', 'exp2Detail2', 'exp2Detail3', 'exp2Detail4',
                        'exp3Detail1', 'exp3Detail2', 'exp3Detail3', 'exp3Detail4',
                        'exp4Detail1', 'exp4Detail2', 'exp4Detail3', 'exp4Detail4',
                        'proj1Detail1','proj1Detail2','proj1Detail3','proj1Detail4', // Project details (if using strong/em)
                        'proj2Detail3', 'proj3Detail1', 'proj3Detail2'
                    ];


                    try { // Add error handling for safety
                        if (attribute) {
                            el[attribute] = languages[langCode][key];
                        } else if (keysWithHtmlContent.includes(key)) {
                            el.innerHTML = languages[langCode][key];
                        } else if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.placeholder !== undefined) {
                            // Check if placeholder exists before trying to set it
                            el.placeholder = languages[langCode][key];
                        } else {
                            el.textContent = languages[langCode][key];
                        }
                    } catch (e) {
                        console.error(`Error setting language for key "${key}" on element:`, el, e);
                    }

                } else {
                    console.warn(`Language key "${key}" not found for language "${langCode}". Element:`, el);
                }
            });

            document.title = languages[langCode].docTitle || 'Portfolio';

            if (typeof Typed === 'function' && languages[langCode].heroSubtitleTyped) {
                if (typedInstance) {
                    typedInstance.destroy();
                }
                initializeTyped(languages[langCode].heroSubtitleTyped);
            }

            langButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === langCode);
            });

            localStorage.setItem('portfolioLang', langCode);

            if (typeof AOS === 'object' && AOS.refresh) { // Check if AOS and refresh exist
                AOS.refresh();
            }
        };

        /**
         * Initializes or re-initializes the Typed.js instance.
         * @param {string[]} stringsArray - Array of strings for Typed.js.
         */
        const initializeTyped = (stringsArray) => {
            const options = {
                strings: stringsArray, typeSpeed: 50, backSpeed: 30, backDelay: 1500,
                startDelay: 500, loop: true, showCursor: true, cursorChar: '|',
            };
            const typedTarget = document.getElementById('typed-subtitle');
            if (typedTarget) {
            // Destroy previous instance if it exists
            if (typedInstance) {
                typedInstance.destroy();
            }
            typedInstance = new Typed(typedTarget, options);
            } else {
                console.error("Typed.js target element '#typed-subtitle' not found.");
            }
        };


        /**
         * Sets the color theme.
         * @param {string} themeName - 'ivory', 'sapphire', 'emerald', 'crimson'.
         */
        const setTheme = (themeName) => {
            bodyElement.classList.remove('theme-ivory', 'theme-sapphire', 'theme-emerald', 'theme-crimson');
            // Add any other theme classes you might add in the future here
            bodyElement.classList.add(`theme-${themeName}`);
            currentTheme = themeName;
            themeOptions.forEach(opt => {
                opt.classList.toggle('active', opt.dataset.theme === themeName);
            });
            localStorage.setItem('portfolioTheme', themeName);
            console.log(`Theme set to: ${themeName}`);
            // Update QR code colors after theme change
            if (typeof QRCodeStyling !== 'undefined' && window.qrCodeInstance) {
            updateQrCodeThemeColors();
            }
        };


        // Function to update QR code colors based on current theme
        function updateQrCodeThemeColors() {
            if (typeof QRCodeStyling === 'undefined' || !window.qrCodeInstance) {
                console.log("QR instance not ready for theme update yet.");
                return;
            }
            console.log("Updating QR code colors based on new theme...");
            const getThemeColor = (cssVar, fallback) => {
                try {
                    return getComputedStyle(document.documentElement).getPropertyValue(cssVar).trim() || fallback;
                } catch (e) {
                    console.warn(`Could not get theme color for ${cssVar}, using fallback. Error: ${e}`);
                    return fallback;
                }
            };
            // Ensure the QR instance exists before updating
            if (window.qrCodeInstance && typeof window.qrCodeInstance.update === 'function') {
                window.qrCodeInstance.update({
                    dotsOptions: { color: getThemeColor('--secondary-color', '#003366') },
                    cornersSquareOptions: { color: getThemeColor('--accent-color', '#B08D57') },
                    cornersDotOptions: { color: getThemeColor('--primary-color', '#7D7C7A') }
                    // Add backgroundOptions update if needed:
                    // backgroundOptions: { color: getThemeColor('--card-bg-color', '#ffffff') }
                });
                console.log("QR code colors updated.");
            } else {
                console.warn("QR code instance or update method not available for theme update.");
            }
        }


        /**
         * Toggles the settings panel visibility.
         */
        const toggleSettingsPanel = () => {
            console.log("toggleSettingsPanel function executed!"); // Check if function is called
            if (!settingsPanel || !bodyElement) {
                console.error("Settings panel or body element not found in toggleSettingsPanel.");
                return;
            }
            const isOpen = bodyElement.classList.toggle('settings-panel-active');
            settingsPanel.classList.toggle('open', isOpen);
            console.log(`Settings panel toggled. Is open: ${isOpen}`); // Check state

            if (isOpen) {
                const groups = settingsPanel.querySelectorAll('.setting-group');
                groups.forEach((group, index) => {
                    group.style.setProperty('--group-index', index);
                });
            }
        };

        /**
         * Populates the mobile navigation menu by cloning desktop links.
         */
        const populateMobileNav = () => {
            console.log("Populating mobile nav...");
            const newUl = document.createElement('ul');
            const desktopUl = document.querySelector('#main-nav ul.desktop-nav');

            if (desktopUl && mobileNav) {
                newUl.innerHTML = desktopUl.innerHTML;
                newUl.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        if (bodyElement.classList.contains('mobile-nav-active')) {
                            toggleMobileNav();
                        }
                    });
                });
                mobileNav.innerHTML = '';
                mobileNav.appendChild(newUl);
                console.log("Mobile nav populated.");
            } else {
                if (!desktopUl) console.error("Desktop navigation list not found for cloning.");
                if (!mobileNav) console.error("Mobile navigation container (#mobile-nav) not found.");
            }
        };

        /**
         * Toggles the mobile navigation open/closed.
         */
        const toggleMobileNav = () => {
            if (!bodyElement) {
                console.error("Body element not found in toggleMobileNav.");
                return;
            }
            bodyElement.classList.toggle('mobile-nav-active');
            console.log("Mobile nav toggled. Active:", bodyElement.classList.contains('mobile-nav-active'));
        };

        /**
         * Handles header changes on scroll (shrink/style).
         */
        const handleScrollHeader = () => {
            const scrollThreshold = 50;
            if (header) {
            header.classList.toggle('header-scrolled', window.scrollY > scrollThreshold);
            } else {
                // console.warn("Header element not found in handleScrollHeader."); // Optional warning
            }
        };

        /**
         * Highlights the active navigation link based on scroll position.
         */
        const activateNavLinkOnScroll = () => {
            console.log("Initializing activateNavLinkOnScroll");
            const sections = document.querySelectorAll('main section[id]');
            if (sections.length === 0) {
                console.warn("No sections found to observe for active link highlighting.");
                return;
            }
            // Calculate offset based on current header height (or default)
            const headerHeight = header?.offsetHeight || 70;
            // Adjust rootMargin: negative top margin equals header height + a little extra space
            // Negative bottom margin pushes the trigger point up (e.g., -50% means trigger when section reaches halfway up the screen)
            const rootMarginValue = `-${headerHeight + 10}px 0px -50% 0px`;
            // console.log("Observer rootMargin:", rootMarginValue); // Debug margin

            const observerOptions = { root: null, rootMargin: rootMarginValue, threshold: 0 };
            const observerCallback = (entries) => {
                let bestCandidate = null; // Track the best candidate section to be active

                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    // isIntersecting is true if *any part* crosses the threshold within the rootMargin
                    if (entry.isIntersecting) {
                        // console.log(`Section ${id} is intersecting.`);
                        // If multiple are intersecting, prioritize the one whose top is closest to the ideal position (just below the header)
                        const targetPosition = entry.boundingClientRect.top - headerHeight;
                        if (bestCandidate === null || Math.abs(targetPosition) < Math.abs(bestCandidate.position)) {
                            bestCandidate = { id: id, position: targetPosition };
                        }
                    }
                });

                // Fallback for top/bottom of page or between sections
                if (!bestCandidate) {
                    if (window.scrollY < window.innerHeight * 0.5) { // Check if near the top
                        bestCandidate = { id: 'hero', position: 0 };
                        // console.log("Near top, activating hero.");
                    } else {
                        // Find the last section whose top has passed the trigger line
                        let lastPassedSection = null;
                        Array.from(sections).reverse().forEach(section => {
                            if (section.getBoundingClientRect().top < headerHeight + 10) { // Section top passed trigger line
                                if (!lastPassedSection) lastPassedSection = section.getAttribute('id');
                            }
                        });
                        if (lastPassedSection) {
                            bestCandidate = { id: lastPassedSection, position: 0 }; // Position doesn't matter here
                            // console.log(`Between sections, activating last passed: ${lastPassedSection}`);
                        }
                    }
                }


                // Update active classes based on the best candidate
                document.querySelectorAll('#main-nav ul.desktop-nav a.active, #mobile-nav ul a.active').forEach(link => {
                    link.classList.remove('active');
                });

                if (bestCandidate) {
                    const desktopNavLink = document.querySelector(`#main-nav ul.desktop-nav a[href="#${bestCandidate.id}"]`);
                    const mobileNavLink = document.querySelector(`#mobile-nav ul a[href="#${bestCandidate.id}"]`);
                    if (desktopNavLink) desktopNavLink.classList.add('active');
                    if (mobileNavLink) mobileNavLink.classList.add('active');
                    // console.log(`Final Active section: ${bestCandidate.id}`);
                }
            };

            try { // Add try-catch for IntersectionObserver initialization
                const observer = new IntersectionObserver(observerCallback, observerOptions);
                sections.forEach(section => observer.observe(section));
                console.log(`Observing ${sections.length} sections.`);
            } catch (e) {
                console.error("Failed to create IntersectionObserver:", e);
            }
        };


        // ---=== Event Listeners ===---

        // Font Size Buttons
        if (decreaseFontBtn && resetFontBtn && increaseFontBtn) {
            decreaseFontBtn.addEventListener('click', () => {
                applyFontSize(currentFontSizePercent - FONT_SIZE_STEP);
                localStorage.setItem('portfolioSettingsSaved', 'true');
            });
            resetFontBtn.addEventListener('click', () => {
                applyFontSize(DEFAULT_FONT_SIZE_PERCENT);
                localStorage.setItem('portfolioSettingsSaved', 'true');
            });
            increaseFontBtn.addEventListener('click', () => {
                applyFontSize(currentFontSizePercent + FONT_SIZE_STEP);
                localStorage.setItem('portfolioSettingsSaved', 'true');
            });
        } else {
            console.warn("Font size control buttons not found.");
        }

        // Scroll Listener for Header & Back-to-Top
        window.addEventListener('scroll', () => {
            handleScrollHeader();
            const backToTopButton = document.getElementById('back-to-top');
            if (backToTopButton) {
                backToTopButton.classList.toggle('visible', window.scrollY > 300);
            }
        });

        // Modal Buttons
        if (openModalButtons.length > 0 && closeModalButtons.length > 0 && modals.length > 0) {
            openModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modalTargetId = button.dataset.modalTarget;
                    const modal = document.getElementById(modalTargetId);
                    if (modal) openModal(modal);
                    else console.error(`Modal not found for target ID: ${modalTargetId}`);
                });
            });
            closeModalButtons.forEach(button => {
                button.addEventListener('click', () => closeModal(button.closest('.project-modal')));
            });
            modals.forEach(modal => {
                modal.addEventListener('click', (event) => { if (event.target === modal) closeModal(modal); });
            });
        } else {
            console.warn("Modal elements (buttons or containers) not found.");
        }

        // Mobile Nav Toggle/Close
        if (mobileNavToggle && mobileNavClose && mobileNavOverlay) {
            mobileNavToggle.addEventListener('click', toggleMobileNav);
            mobileNavClose.addEventListener('click', toggleMobileNav);
            mobileNavOverlay.addEventListener('click', toggleMobileNav);
        } else {
            console.error("Mobile navigation toggle/close/overlay elements not found.");
        }

        // Settings Panel Buttons (Language & Theme)
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                setLanguage(button.dataset.lang);
                localStorage.setItem('portfolioSettingsSaved', 'true');
            });
        });
        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                setTheme(option.dataset.theme);
                localStorage.setItem('portfolioSettingsSaved', 'true');
            });
        });

        // --- Settings Panel Toggle/Close Listener ---
        // Place this *after* the variables are defined
        if (settingsToggleBtn && settingsPanel && settingsCloseBtn) {
            console.log("Found settings toggle/panel/close elements. Attaching listeners...");
            settingsToggleBtn.addEventListener('click', () => {
                console.log("Settings toggle button CLICKED!");
                toggleSettingsPanel();
            });
            settingsCloseBtn.addEventListener('click', () => {
                console.log("Settings close button CLICKED!");
                toggleSettingsPanel();
            });
        } else {
            // Ensure error messages are logged if elements are missing
            if (!settingsToggleBtn) console.error("Settings Toggle Button (#settings-toggle) not found!");
            if (!settingsPanel) console.error("Settings Panel (#settings-panel) not found!");
            if (!settingsCloseBtn) console.error("Settings Close Button (#settings-close) not found!");
        }


        // Smooth Scrolling & Panel Closing for Nav Links
        const allNavLinks = document.querySelectorAll('#main-nav ul.desktop-nav a, #mobile-nav ul a, #back-to-top, .logo a[href="#hero"]');
        allNavLinks.forEach(link => {
            if (link.getAttribute('href') && link.getAttribute('href').startsWith('#')) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const headerOffset = header ? (header.classList.contains('header-scrolled') ? header.offsetHeight : header.offsetHeight) : 70;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - (targetId === '#hero' ? 0 : headerOffset);
                        window.scrollTo({ top: offsetPosition, behavior: "smooth" });

                        if (bodyElement.classList.contains('mobile-nav-active') && this.closest('#mobile-nav')) {
                            toggleMobileNav();
                        }
                        // Only close settings panel if it's open
                        if (settingsPanel && settingsPanel.classList.contains('open')) {
                            toggleSettingsPanel();
                        }
                    } else {
                        console.warn(`Target element not found for link: ${targetId}`);
                    }
                });
            }
        });

        // Contact Form Submission
        if (contactForm && formStatus && submitButton) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(contactForm);
                submitButton.classList.add('loading');
                formStatus.textContent = '';
                formStatus.className = 'form-status';

                // Replace YOUR_EMAIL_OR_FORM_ID in the action URL
                const formAction = contactForm.action;
                if (formAction.includes('YOUR_EMAIL_OR_FORM_ID')) {
                    console.warn("Formspree action URL needs to be updated in the HTML form tag!");
                    submitButton.classList.remove('loading');
                    formStatus.textContent = 'Form setup error.';
                    formStatus.classList.add('error');
                    return; // Stop submission if URL is not configured
                }


                fetch(formAction, { // Use the actual action from HTML
                    method: 'POST', body: formData, headers: { 'Accept': 'application/json' }
                }).then(response => {
                    submitButton.classList.remove('loading');
                    if (response.ok) {
                        formStatus.textContent = languages[currentLang]?.formSuccess || 'Message sent successfully!'; // Use lang key
                        formStatus.classList.add('success');
                        contactForm.reset();
                        setTimeout(() => { formStatus.textContent = ''; formStatus.className = 'form-status'; }, 5000);
                    } else {
                        response.json().then(data => {
                            formStatus.textContent = data.errors?.map(e => e.message).join(', ') || languages[currentLang]?.formError || 'Oops! There was a problem.';
                            formStatus.classList.add('error');
                        }).catch(() => {
                            formStatus.textContent = languages[currentLang]?.formError || 'Oops! There was a problem submitting your form.';
                            formStatus.classList.add('error');
                        });
                    }
                }).catch(error => {
                    submitButton.classList.remove('loading');
                    formStatus.textContent = languages[currentLang]?.formNetworkError || 'Network error. Please try again.';
                    formStatus.classList.add('error');
                    console.error('Form submission error:', error);
                });
            });
            // Add missing lang keys for form status messages
            languages.en.formSuccess = "Message sent successfully!";
            languages.en.formError = "Oops! There was a problem submitting your form.";
            languages.en.formNetworkError = "Network error. Please try again.";
            languages.ar.formSuccess = "تم إرسال الرسالة بنجاح!";
            languages.ar.formError = "عفواً! حدثت مشكلة أثناء إرسال النموذج.";
            languages.ar.formNetworkError = "خطأ في الشبكة. يرجى المحاولة مرة أخرى.";
        } else {
            if (!contactForm) console.warn("Contact form (#contact-form) not found.");
            else if (!formStatus) console.warn("Form status element (.form-status) not found within the contact form.");
            else if (!submitButton) console.warn("Submit button (.contact-submit-btn) not found within the contact form.");
        }

        // Dynamic Footer Year
        const yearElement = document.getElementById('year');
        if (yearElement) {
        yearElement.textContent = new Date().getFullYear();
        }


        // ---=== Initial Setup on DOMContentLoaded ===---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM Content Loaded. Running DOM-dependent initializations.");
            // Populate mobile nav requires desktop nav to be present in DOM
            populateMobileNav();

            // -----===== START: Generate vCard QR Code =====-----
            // Generate QR code *after* DOM is ready so the target element exists
            try {
                const qrCodeContainerElement = document.getElementById('vcard-qrcode-target');
                // Check if the QR Code library is loaded
                if (typeof QRCodeStyling !== 'undefined') {
                    console.log("QRCodeStyling library loaded.");
                    if (qrCodeContainerElement) {
                        const vCardData = `BEGIN:VCARD
        VERSION:3.0
        FN:Mohamed Hagag Lala
        N:Lala;Mohamed;Hagag;;
        TITLE:Civil Structural Engineer / BIM Specialist
        TEL;TYPE=CELL;TYPE=PREF:+201011274183
        TEL;TYPE=CELL:+201276574897
        EMAIL;TYPE=INTERNET;TYPE=PREF:m.hagag.lala@gmail.com
        URL:https://www.linkedin.com/in/mohamed-ahmed-807178a2/ // <<<<<===== Consider replacing with a personal portfolio URL if available
        ADR;TYPE=WORK:;;;El-Mahala El-Kubra;Gharbia;31812;Egypt
        NOTE:Contact via Portfolio
        END:VCARD`;

                        // Helper to get theme colors (defined locally)
                        const getThemeColorForQR = (cssVar, fallback) => {
                            try { return getComputedStyle(document.documentElement).getPropertyValue(cssVar).trim() || fallback; }
                            catch (e) { console.warn(`QR Color Error for ${cssVar}: ${e}`); return fallback; }
                        };

                        // Create and store the QR code instance globally
                        window.qrCodeInstance = new QRCodeStyling({
                            width: 180, height: 180, data: vCardData, margin: 0,
                            qrOptions: { errorCorrectionLevel: 'H' },
                            dotsOptions: { color: getThemeColorForQR('--secondary-color', '#003366'), type: 'square' },
                            backgroundOptions: { color: '#ffffff' },
                            cornersSquareOptions: { color: getThemeColorForQR('--accent-color', '#B08D57'), type: 'square' },
                            cornersDotOptions: { color: getThemeColorForQR('--primary-color', '#7D7C7A'), type: 'square' }
                        });

                        qrCodeContainerElement.innerHTML = ''; // Clear previous content
                        window.qrCodeInstance.append(qrCodeContainerElement);
                        console.log("vCard QR Code generated successfully.");

                    } else {
                        console.warn("QR Code target container ('vcard-qrcode-target') not found.");
                    }
                } else {
                    console.error("QRCodeStyling library is not loaded. QR code cannot be generated.");
                    if(qrCodeContainerElement) {
                        qrCodeContainerElement.innerHTML = "<p style='color: red; font-size: 0.8em;'>QR Library Error.</p>";
                    }
                }
            } catch (error) {
                console.error("Error during QR Code generation:", error);
                const qrCodeContainerElement = document.getElementById('vcard-qrcode-target');
                if (qrCodeContainerElement) {
                    qrCodeContainerElement.innerHTML = "<p style='color: red; font-size: 0.8em;'>Failed to generate QR code.</p>";
                }
            }
            // -----===== END: Generate vCard QR Code =====-----

        });


        // ---=== Initial Setup on Window Load ===---
        window.addEventListener('load', () => {
            console.log("Window loaded event fired.");

            // Initialize libraries that might depend on layout/styles
            if (typeof AOS !== 'undefined' && typeof AOS.init === 'function') {
                AOS.init({ duration: 800, once: true, offset: 100 });
            } else {
                console.warn("AOS library not found or init function missing.");
            }

            // Run functions that need full page load
            handleScrollHeader(); // Initial check
            activateNavLinkOnScroll(); // Start observing
            applyFontSize(currentFontSizePercent); // Apply initial font size
            animateProgressBars(); // Set up progress bar animations

            // Apply initial language and theme (ensure Typed.js runs AFTER target element is ready)
            setLanguage(currentLang); // This will call initializeTyped if needed
            setTheme(currentTheme); // This will call updateQrCodeThemeColors if needed

            // Settings Panel Auto-Open Logic
            if (!settingsPreviouslySaved) {
                console.log("First visit or settings not saved, opening settings panel automatically.");
                setTimeout(() => {
                    // Double-check elements exist before toggling
                    if (settingsPanel && !settingsPanel.classList.contains('open') && bodyElement) {
                        toggleSettingsPanel();
                    }
                    localStorage.setItem('portfolioSettingsSaved', 'true');
                }, 1000);
            } else {
                console.log("Settings previously saved, not opening panel automatically.");
            }

            // Preloader Hide Logic
            const preloaderHideDelay = 3500; // Adjust as needed for progress bar animation
            console.log(`Scheduling preloader hide after ${preloaderHideDelay}ms delay...`);
            setTimeout(() => {
                if (preloader) {
                    console.log("Hiding preloader now after delay.");
                    preloader.classList.add('hidden');
                } else {
                    console.warn("Preloader element not found when trying to hide.");
                }
            }, preloaderHideDelay);

            console.log("Page loaded and initial setup complete (preloader hide scheduled).");
        });

        // Ensure QR Code Styling library is loaded (add this script tag in your HTML <head> or before your custom script)
        // <script src="https://unpkg.com/qr-code-styling@1.6.0/lib/qr-code-styling.js">
    </script>

        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js"></script>
        <script src="https://unpkg.com/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>


</body>
</html>